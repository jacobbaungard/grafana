{"version":3,"file":"alert-rules-toolbar-button.6f275f0d03748b6c297d.js","mappings":"4PAOA,MAAMA,EAA0B,OAC9B,IAAM,8BACR,EAOO,SAASC,EAAiB,CAAE,aAAAC,EAAc,QAAAC,CAAQ,EAAU,CACjE,OACE,gBAACC,EAAA,EAAM,CAAC,MAAM,cAAc,SAAU,gBAACC,EAAA,CAAe,aAAAH,CAAA,CAA4B,EAAI,QAAAC,EAAkB,KAAK,MAC3G,gBAAC,YAAe,SAAU,gBAACG,EAAA,EAAkB,CAAC,KAAK,qBAAsB,IACvE,gBAACN,EAAA,CAAwB,aAAAE,CAAA,CAA4B,CACvD,CACF,CAEJ,CAEA,SAASG,EAAe,CAAE,aAAAH,CAAa,EAA6B,CAClE,MAAMK,EAAe,IAAI,gBAAgB,CAAE,OAAQ,aAAaL,GAAe,CAAC,EAEhF,OACE,gBAACM,EAAA,EAAK,CAAC,IAAK,GACV,gBAAC,cAAK,KAAE,wCAAyC,uCAAuC,CAAE,EAC1F,gBAACC,EAAA,EAAQ,CAAC,QAAM,KAAU,mBAAmBF,EAAa,SAAS,GAAG,MACnE,KAAE,6CAA8C,0BAA0B,CAC7E,CACF,CAEJ,CCtBe,SAASG,EAAwB,CAAE,aAAAR,CAAa,EAAiC,CAC9F,KAAM,CAAE,UAAAS,EAAW,UAAAC,CAAU,KAAI,MAA0B,EAErD,CAAE,KAAMC,EAAa,CAAC,CAAE,EAAIC,EAAA,GAAa,UAAU,yBAAyB,SAAS,CACzF,eAAgB,KAChB,aAAAZ,CACF,CAAC,EAED,OAAIW,EAAW,SAAW,EACjB,KAIP,gBAACE,EAAA,GACC,WAAS,KAAE,gCAAiC,aAAa,EACzD,KAAK,OACL,QAAS,IAAMJ,EAAU,gBAACV,EAAgB,CAAC,aAAAC,EAA4B,QAASU,CAAA,CAAW,CAAE,EAC7F,IAAI,kBACN,CAEJ,C","sources":["webpack://grafana/./public/app/features/alerting/unified/integration/AlertRulesDrawer.tsx","webpack://grafana/./public/app/features/alerting/unified/integration/AlertRulesToolbarButton.tsx"],"sourcesContent":["import React from 'react';\n\nimport { Drawer, LoadingPlaceholder, Stack, TextLink } from '@grafana/ui';\n\nimport { t } from '../../../../core/internationalization';\nimport { createUrl } from '../utils/url';\n\nconst AlertRulesDrawerContent = React.lazy(\n  () => import(/* webpackChunkName: \"alert-rules-drawer-content\" */ './AlertRulesDrawerContent')\n);\n\ninterface Props {\n  dashboardUid: string;\n  onClose: () => void;\n}\n\nexport function AlertRulesDrawer({ dashboardUid, onClose }: Props) {\n  return (\n    <Drawer title=\"Alert rules\" subtitle={<DrawerSubtitle dashboardUid={dashboardUid} />} onClose={onClose} size=\"lg\">\n      <React.Suspense fallback={<LoadingPlaceholder text=\"Loading alert rules\" />}>\n        <AlertRulesDrawerContent dashboardUid={dashboardUid} />\n      </React.Suspense>\n    </Drawer>\n  );\n}\n\nfunction DrawerSubtitle({ dashboardUid }: { dashboardUid: string }) {\n  const searchParams = new URLSearchParams({ search: `dashboard:${dashboardUid}` });\n\n  return (\n    <Stack gap={2}>\n      <div>{t('dashboard.alert-rules-drawer.subtitle', 'Alert rules related to this dashboard')}</div>\n      <TextLink href={createUrl(`/alerting/list/?${searchParams.toString()}`)}>\n        {t('dashboard.alert-rules-drawer.redirect-link', 'List in Grafana Alerting')}\n      </TextLink>\n    </Stack>\n  );\n}\n","import React from 'react';\n\nimport { ToolbarButton } from '@grafana/ui';\n\nimport { t } from '../../../../core/internationalization';\nimport { useDashNavModalController } from '../../../dashboard/components/DashNav/DashNav';\nimport { alertRuleApi } from '../api/alertRuleApi';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\n\nimport { AlertRulesDrawer } from './AlertRulesDrawer';\n\ninterface AlertRulesToolbarButtonProps {\n  dashboardUid: string;\n}\n\nexport default function AlertRulesToolbarButton({ dashboardUid }: AlertRulesToolbarButtonProps) {\n  const { showModal, hideModal } = useDashNavModalController();\n\n  const { data: namespaces = [] } = alertRuleApi.endpoints.prometheusRuleNamespaces.useQuery({\n    ruleSourceName: GRAFANA_RULES_SOURCE_NAME,\n    dashboardUid: dashboardUid,\n  });\n\n  if (namespaces.length === 0) {\n    return null;\n  }\n\n  return (\n    <ToolbarButton\n      tooltip={t('dashboard.toolbar.alert-rules', 'Alert rules')}\n      icon=\"bell\"\n      onClick={() => showModal(<AlertRulesDrawer dashboardUid={dashboardUid} onClose={hideModal} />)}\n      key=\"button-alerting\"\n    />\n  );\n}\n"],"names":["AlertRulesDrawerContent","AlertRulesDrawer","dashboardUid","onClose","Drawer","DrawerSubtitle","LoadingPlaceholder","searchParams","Stack","TextLink","AlertRulesToolbarButton","showModal","hideModal","namespaces","alertRuleApi","ToolbarButton"],"sourceRoot":""}