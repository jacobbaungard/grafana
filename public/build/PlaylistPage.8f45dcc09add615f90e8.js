"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1168],{72557:(U,C,e)=>{e.d(C,{A:()=>D});var t=e(96540),T=e(14186),d=e(67647),A=e(55852),O=e(73725);class D extends t.PureComponent{render(){const{searchQuery:l,linkButton:i,setSearchQuery:c,target:u,placeholder:f="Search by name or type",sortPicker:y}=this.props,S={href:i?.href,disabled:i?.disabled};return u&&(S.target=u),t.createElement("div",{className:"page-action-bar"},t.createElement(T.I,{grow:!0},t.createElement(d.Z,{value:l,onChange:c,placeholder:f})),y&&t.createElement(O.r,{onChange:y.onChange,value:y.value,getSortOptions:y.getSortOptions}),i&&t.createElement(A.z9,{...S},i.title))}}},73725:(U,C,e)=>{e.d(C,{r:()=>l});var t=e(96540),T=e(16817),d=e(88323),A=e(14578),O=e(53477),D=e(24439);const L=()=>(0,D.getGrafanaSearcher)().getSortOptions();function l({onChange:i,value:c,placeholder:u,filter:f,getSortOptions:y,isClearable:S}){const E=(0,T.A)(async()=>{const M=await(y??L)();return f?M.filter(K=>f.includes(K.value)):M},[y,f]);if(E.loading)return null;const p=!!(c?.includes("desc")||c?.startsWith("-"));return t.createElement(d.l6,{key:c,width:28,onChange:i,value:E.value?.find(M=>M.value===c)??null,options:E.value,"aria-label":"Sort",placeholder:u??`Sort (Default ${O.r4.label})`,prefix:t.createElement(A.I,{name:p?"sort-amount-down":"sort-amount-up"}),isClearable:S})}},43719:(U,C,e)=>{e.r(C),e.d(C,{PlaylistPage:()=>Z,default:()=>at});var t=e(96540),T=e(16817),d=e(55852),A=e(96374),O=e(7521),D=e(36830),L=e(72557),l=e(44836),i=e(16233),c=e(32196),u=e(40845);const f=()=>{const a=(0,u.of)(y);return t.createElement("div",{className:a.noResult},"No playlist found!")},y=a=>({noResult:(0,c.css)`
      padding: ${a.spacing(2)};
      background: ${a.colors.secondary.main};
      font-style: italic;
      margin-top: ${a.spacing(2)};
    `});var S=e(72129),E=e(70255),p=e(10860),M=e(71678),K=e(67061),j=e(93030),k=e(76885),x=e(37390),N=e(84167),B=e(88575),W=e(94354),$=e(10880),G=e(10354),H=e(10534),V=e(22699);const Y=({playlistUid:a,onDismiss:n})=>{const[o,s]=(0,t.useState)(!1),[r,h]=(0,t.useState)(!1),g=[{label:(0,l.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,l.t)("share-playlist.mode-tv","TV"),value:"tv"},{label:(0,l.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],v={};o&&(v.kiosk=o),r&&(v.autofitpanels=!0);const m=k.kM.renderUrl(`${(0,V.P_)()}/play/${a}`,v);return t.createElement(x.a,{isOpen:!0,title:(0,l.t)("share-playlist.title","Share playlist"),onDismiss:n},t.createElement(N.n,null,t.createElement(B.D,{label:(0,l.t)("share-playlist.mode","Mode")},t.createElement(W.z,{value:o,options:g,onChange:s})),t.createElement(B.D,null,t.createElement($.S,{label:(0,l.t)("share-playlist.checkbox-label","Autofit"),description:(0,l.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:r,onChange:P=>h(P.currentTarget.checked)})),t.createElement(B.D,{label:(0,l.t)("share-playlist.link-url-label","Link URL")},t.createElement(G.p,{id:"link-url-input",value:m,readOnly:!0,addonAfter:t.createElement(H.b,{icon:"copy",variant:"primary",getText:()=>m},t.createElement(l.x6,{i18nKey:"share-playlist.copy-link-button"},"Copy"))}))))},J=({playlist:a,setStartPlaylist:n,setPlaylistToDelete:o})=>t.createElement(p.Z,null,t.createElement(p.Z.Heading,null,a.name,t.createElement(M.$s,{key:"button-share"},({showModal:s,hideModal:r})=>t.createElement(j._,{tooltip:(0,l.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{s(Y,{playlistUid:a.uid,onDismiss:r})}}))),t.createElement(p.Z.Actions,null,t.createElement(d.$n,{variant:"secondary",icon:"play",onClick:()=>n(a)},t.createElement(l.x6,{i18nKey:"playlist-page.card.start"},"Start playlist")),i.TP.isEditor&&t.createElement(t.Fragment,null,t.createElement(d.z9,{key:"edit",variant:"secondary",href:`/playlists/edit/${a.uid}`,icon:"cog"},t.createElement(l.x6,{i18nKey:"playlist-page.card.edit"},"Edit playlist")),t.createElement(d.$n,{disabled:!1,onClick:()=>o(a),icon:"trash-alt",variant:"destructive"},t.createElement(l.x6,{i18nKey:"playlist-page.card.delete"},"Delete playlist"))))),X=({rootProps:a})=>{const n=(0,u.of)(w);return t.createElement(p.Z,{...a},t.createElement(p.Z.Heading,null,t.createElement(E.A,{width:140})),t.createElement(p.Z.Actions,null,t.createElement(K.B,{direction:"row",wrap:"wrap"},t.createElement(E.A,{containerClassName:n.button,width:142,height:32}),i.TP.isEditor&&t.createElement(t.Fragment,null,t.createElement(E.A,{containerClassName:n.button,width:135,height:32}),t.createElement(E.A,{containerClassName:n.button,width:153,height:32})))))},I=(0,S.j)(J,X);function w(a){return{button:(0,c.css)({lineHeight:1})}}const q=({playlists:a,setStartPlaylist:n,setPlaylistToDelete:o})=>{const s=(0,u.of)(b);return t.createElement("ul",{className:s.list},a.map(r=>t.createElement("li",{className:s.listItem,key:r.uid},t.createElement(I,{playlist:r,setStartPlaylist:n,setPlaylistToDelete:o}))))},_=({rootProps:a})=>{const n=(0,u.of)(b);return t.createElement("div",{"data-testid":"playlist-page-list-skeleton",className:n.list,...a},t.createElement(I.Skeleton,null),t.createElement(I.Skeleton,null),t.createElement(I.Skeleton,null))},F=(0,S.j)(q,_);function b(a){return{list:(0,c.css)({display:"grid"}),listItem:(0,c.css)({listStyle:"none"})}}var tt=e(12131);const et=({playlist:a,onDismiss:n})=>{const[o,s]=(0,t.useState)(!1),[r,h]=(0,t.useState)(!1),g=[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],v=()=>{const m={};o&&(m.kiosk=o),r&&(m.autofitpanels=!0),tt.Ny.push(k.kM.renderUrl(`/playlists/play/${a.uid}`,m))};return t.createElement(x.a,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:n},t.createElement(N.n,null,t.createElement(B.D,{label:"Mode"},t.createElement(W.z,{value:o,options:g,onChange:s})),t.createElement($.S,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:r,onChange:m=>h(m.currentTarget.checked)})),t.createElement(x.a.ButtonRow,null,t.createElement(d.$n,{variant:"primary",onClick:v},"Start ",a.name)))};var z=e(86022);const Z=()=>{const a=(0,z.NF)(),[n,o]=(0,t.useState)(0),[s,r]=(0,t.useState)(""),h=(0,T.A)(()=>a.getAllPlaylist(),[n]),g=(0,t.useMemo)(()=>(0,z.GM)(h.value??[],s),[s,h]),[v,m]=(0,t.useState)(),[P,R]=(0,t.useState)(),lt=g&&g.length>0,nt=()=>R(void 0),st=()=>{P&&a.deletePlaylist(P.uid).finally(()=>{o(n+1),R(void 0)})},ot=t.createElement(O.A,{title:(0,l.t)("playlist-page.empty.title","There are no playlists created yet"),buttonIcon:"plus",buttonLink:"playlists/new",buttonTitle:(0,l.t)("playlist-page.empty.button","Create Playlist"),buttonDisabled:!i.TP.isEditor,proTip:(0,l.t)("playlist-page.empty.pro-tip","You can use playlists to cycle dashboards on TVs without user control"),proTipLink:"http://docs.grafana.org/reference/playlist/",proTipLinkTitle:(0,l.t)("playlist-page.empty.pro-tip-link-title","Learn more"),proTipTarget:"_blank"}),Q=h.loading||g.length>0||s.length>0;return t.createElement(D.Y,{actions:i.TP.isEditor?t.createElement(d.z9,{href:"/playlists/new"},t.createElement(l.x6,{i18nKey:"playlist-page.create-button.title"},"New playlist")):void 0,navId:"dashboards/playlists"},t.createElement(D.Y.Contents,null,Q&&t.createElement(L.A,{searchQuery:s,setSearchQuery:r}),h.loading?t.createElement(F.Skeleton,null):t.createElement(t.Fragment,null,!lt&&s?t.createElement(f,null):t.createElement(F,{playlists:g,setStartPlaylist:m,setPlaylistToDelete:R}),!Q&&ot,P&&t.createElement(A.u,{title:P.name,confirmText:(0,l.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,l.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:P.name}),onConfirm:st,isOpen:!!P,onDismiss:nt}),v&&t.createElement(et,{playlist:v,onDismiss:()=>m(void 0)}))))},at=Z}}]);

//# sourceMappingURL=PlaylistPage.8f45dcc09add615f90e8.js.map