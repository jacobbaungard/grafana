"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1515],{33809:(v,E,e)=>{e.r(E),e.d(E,{SupportBundlesCreateUnconnected:()=>C,default:()=>g});var t=e(96540),D=e(69733),s=e(42418),O=e(51253),r=e(88575),c=e(10880),P=e(66864),_=e(55852),p=e(36830),i=e(58330);const f=t.createElement("span",null,"Choose the components for the support bundle. The support bundle will be available for 3 days after creation."),a=u=>({collectors:u.supportBundles.supportBundleCollectors,isLoading:u.supportBundles.createBundlePageLoading,loadCollectorsError:u.supportBundles.loadBundlesError,createBundleError:u.supportBundles.createBundleError}),n={loadSupportBundleCollectors:i.OS,createSupportBundle:i.iO},B=(0,D.connect)(a,n),C=({collectors:u,isLoading:A,loadCollectorsError:M,createBundleError:y,loadSupportBundleCollectors:m,createSupportBundle:T})=>{const I=o=>{const d=Object.keys(o).filter(l=>o[l]);T({collectors:d})};(0,t.useEffect)(()=>{m()},[m]);const L=u.reduce((o,d)=>({...o,[d.uid]:d.default}),{});return t.createElement(p.Y,{navId:"support-bundles",pageNav:{text:"Create support bundle"},subTitle:f},t.createElement(p.Y.Contents,{isLoading:A},M&&t.createElement(s.F,{title:M,severity:"error"}),y&&t.createElement(s.F,{title:y,severity:"error"}),!!u.length&&t.createElement(O.l,{defaultValues:L,onSubmit:I,validateOn:"onSubmit"},({register:o,errors:d})=>t.createElement(t.Fragment,null,[...u].sort((l,U)=>l.displayName.localeCompare(U.displayName)).map(l=>t.createElement(r.D,{key:l.uid},t.createElement(c.S,{...o(l.uid),label:l.displayName,id:l.uid,description:l.description,defaultChecked:l.default,disabled:l.includedByDefault}))),t.createElement(P.Gy,null,t.createElement(_.$n,{type:"submit"},"Create"),t.createElement(_.z9,{href:"/support-bundles",variant:"secondary"},"Cancel"))))))},g=B(C)},58330:(v,E,e)=>{e.d(E,{Hb:()=>p,OS:()=>i,WJ:()=>c,ac:()=>_,iO:()=>f});var t=e(2543),D=e.n(t),s=e(17172),O=e(12131),r=e(8212);function c(a=!1){return async n=>{try{a||n((0,r.sF)());const B=await(0,s.AI)().get("/api/support-bundles");n((0,r.sJ)(B))}finally{n((0,r.kH)())}}}const P=(0,t.throttle)(async a=>{const n=await(0,s.AI)().get("/api/support-bundles");a((0,r.sJ)(n))},1e3);function _(){return async a=>{a(P)}}function p(a){return async n=>{await(0,s.AI)().delete(`/api/support-bundles/${a}`),n(c(!0))}}function i(){return async a=>{try{a((0,r.Y1)());const n=await(0,s.AI)().get("/api/support-bundles/collectors");a((0,r.j7)(n))}catch{a((0,r.pB)("Error loading support bundles data collectors"))}finally{a((0,r.s7)())}}}function f(a){return async n=>{try{await(0,s.AI)().post("/api/support-bundles",a),O.Ny.push("/support-bundles")}catch{n((0,r.NV)("Error creating support bundle"))}}}}}]);

//# sourceMappingURL=SupportBundlesCreate.fc6b6e4cf6366f751081.js.map