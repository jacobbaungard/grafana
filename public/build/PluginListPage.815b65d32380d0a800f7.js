"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4519],{50691:(ne,C,s)=>{s.d(C,{fk:()=>m,yf:()=>h,Df:()=>r,Uj:()=>z,Jn:()=>A,z$:()=>U});var l=s(96540),e=s(43429),f=s(39938);function r({error:c}){const x=D(c);return l.createElement(f.E,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:x})}function D(c){switch(c){case e.ZK.modifiedSignature:return"Plugin disabled due to modified content";case e.ZK.invalidSignature:return"Plugin disabled due to invalid plugin signature";case e.ZK.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${c?`: ${c}`:""}`}}var u=s(40845),P=s(32196);const S=c=>(0,P.css)`
  background: ${c.colors.background.primary};
  border-color: ${c.colors.border.strong};
  color: ${c.colors.text.secondary};
`;function A(){const c=(0,u.of)(S);return l.createElement(f.E,{text:"Installed",color:"orange",className:c})}var N=s(33378),R=s(66864),b=s(98624),T=s(55852);function z({plugin:c}){const x=(0,u.of)(S),F=W=>{W.preventDefault(),window.open(`https://grafana.com/grafana/plugins/${c.id}?utm_source=grafana_catalog_learn_more`,"_blank","noopener,noreferrer")};return(0,N.a)("enterprise.plugins")?l.createElement(f.E,{text:"Enterprise",color:"blue"}):l.createElement(R.Gy,null,l.createElement(b.B,{status:c.signature}),l.createElement(f.E,{icon:"lock","aria-label":"lock icon",text:"Enterprise",color:"blue",className:x}),l.createElement(T.$n,{size:"sm",fill:"text",icon:"external-link-alt",onClick:F},"Learn more"))}function U({plugin:c}){const x=(0,u.of)(L);return l.createElement("p",{className:x.hasUpdate},"Update available!")}const L=c=>({hasUpdate:(0,P.css)`
      color: ${c.colors.text.secondary};
      font-size: ${c.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function m(){return l.createElement(f.E,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function h(){return l.createElement(f.E,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},65965:(ne,C,s)=>{s.r(C),s.d(C,{default:()=>E});var l=s(32196),e=s(96540),f=s(24180),r=s(12131),D=s(40845),u=s(88575),P=s(88323),S=s(94354),A=s(56034),N=s(36830),R=s(17422),b=s(6320),T=s(80348),z=s(42930),U=s(32264),L=s(71259),m=s(66253),h=s(70255),c=s(14578),x=s(67061),F=s(39938),W=s(72129),O=s(43429),Z=s(66864),Q=s(98624),v=s(50691);function X({plugin:n}){const g=n.hasUpdate&&!n.isCore&&n.type!==O.QE.renderer;return n.isEnterprise?e.createElement(Z.Gy,{height:"auto",wrap:!0},e.createElement(v.Uj,{plugin:n}),n.isDisabled&&e.createElement(v.Df,{error:n.error}),g&&e.createElement(v.z$,{plugin:n}),n.angularDetected&&e.createElement(v.fk,null)):e.createElement(Z.Gy,{height:"auto",wrap:!0},e.createElement(Q.B,{status:n.signature}),n.isDisabled&&e.createElement(v.Df,{error:n.error}),n.isDeprecated&&e.createElement(v.yf,null),n.isInstalled&&e.createElement(v.Jn,null),g&&e.createElement(v.z$,{plugin:n}),n.angularDetected&&e.createElement(v.fk,null))}function Y({alt:n,className:g,src:o,height:i}){return e.createElement("img",{src:o,className:g,alt:n,loading:"lazy",height:i})}const G="48px";function V({plugin:n,pathName:g,displayMode:o=m.fy.Grid}){const i=(0,D.of)($),y=o===m.fy.List;return e.createElement("a",{href:`${g}/${n.id}`,className:(0,l.cx)(i.container,{[i.list]:y})},e.createElement(Y,{src:n.info.logos.small,className:i.pluginLogo,height:G,alt:""}),e.createElement("h2",{className:(0,l.cx)(i.name,"plugin-name")},n.name),e.createElement("div",{className:(0,l.cx)(i.content,"plugin-content")},e.createElement("p",null,"By ",n.orgName),e.createElement(X,{plugin:n})),e.createElement("div",{className:i.pluginType},n.type&&e.createElement(c.I,{name:m.Ip[n.type],title:`${n.type} plugin`})))}const w=({displayMode:n=m.fy.Grid,rootProps:g})=>{const o=(0,D.of)($),i=n===m.fy.List;return e.createElement("div",{className:(0,l.cx)(o.container,{[o.list]:i}),...g},e.createElement(h.A,{containerClassName:(0,l.cx)(o.pluginLogo,(0,l.css)({lineHeight:1})),width:G,height:G}),e.createElement("h2",{className:o.name},e.createElement(h.A,{width:100})),e.createElement("div",{className:o.content},e.createElement("p",null,e.createElement(h.A,{width:120})),e.createElement(x.B,{direction:"row"},e.createElement(F.E.Skeleton,null),e.createElement(F.E.Skeleton,null))),e.createElement("div",{className:o.pluginType},e.createElement(h.A,{width:16,height:16})))},J=(0,W.j)(V,w),$=n=>({container:(0,l.css)({display:"grid",gridTemplateColumns:`${G} 1fr ${n.spacing(3)}`,gridTemplateRows:"auto",gap:n.spacing(2),gridAutoFlow:"row",background:n.colors.background.secondary,borderRadius:n.shape.radius.default,padding:n.spacing(3),transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":{background:n.colors.emphasize(n.colors.background.secondary,.03)}}),list:(0,l.css)({rowGap:0,"> img":{alignSelf:"start"},"> .plugin-content":{minHeight:0,gridArea:"2 / 2 / 4 / 3","> p":{margin:n.spacing(0,0,.5,0)}},"> .plugin-name":{alignSelf:"center",gridArea:"1 / 2 / 2 / 3"}}),pluginType:(0,l.css)({gridArea:"1 / 3 / 2 / 4",color:n.colors.text.secondary}),pluginLogo:(0,l.css)({gridArea:"1 / 1 / 3 / 2",maxWidth:"100%",alignSelf:"center",objectFit:"contain"}),content:(0,l.css)({gridArea:"3 / 1 / 4 / 3",color:n.colors.text.secondary}),name:(0,l.css)({gridArea:"1 / 2 / 3 / 3",alignSelf:"center",fontSize:n.typography.h4.fontSize,color:n.colors.text.primary,margin:0})}),k=({plugins:n,displayMode:g,isLoading:o})=>{const i=g===m.fy.List,{pathname:y}=(0,f.zy)(),te=U.$.appSubUrl+(y.endsWith("/")?y.slice(0,-1):y);return e.createElement(L.x,{gap:3,...i?{columns:1}:{minColumnWidth:34},"data-testid":"plugin-list"},o?new Array(50).fill(null).map((I,M)=>e.createElement(J.Skeleton,{key:M,displayMode:g})):n.map(I=>e.createElement(J,{key:I.id,plugin:I,pathName:te,displayMode:g})))};var q=s(40996),_=s(67647);const ee=(n,g=0,o=[])=>{const i=(0,e.useRef)(!0),y=[...o,i];return(0,q.A)(()=>{if(i.current){i.current=!1;return}return n()},g,y)},t=({value:n,onSearch:g})=>{const[o,i]=(0,e.useState)(n);return ee(()=>g(o??""),500,[o]),e.createElement(_.Z,{value:o,onKeyDown:y=>{(y.key==="Enter"||y.keyCode===13)&&g(y.currentTarget.value)},placeholder:"Search Grafana plugins",onChange:y=>{i(y)},width:46})};var a=s(5129);const d=()=>({push:({query:n})=>{r.Ny.partial(n)}});var p=s(83391);function E({route:n}){const g=(0,f.zy)(),o=(0,r.SE)(g.search),i=(0,T.useSelector)(B=>(0,R.tc)(B.navIndex,"plugins")),{displayMode:y,setDisplayMode:te}=(0,p.Tr)(),I=(0,D.of)(j),M=d(),ce=(0,p.pw)(),se=o.q?.toString()||"",H=o.filterBy?.toString()||"installed",K=o.filterByType||"all",ae=o.sortBy||a.by.nameAsc,{isLoading:ie,error:le,plugins:ue}=(0,p.PW)({keyword:se,type:K!=="all"?K:void 0,isInstalled:H==="installed"?!0:void 0},ae),oe=[{value:"all",label:"All"},{value:"installed",label:"Installed"}],de=B=>{M.push({query:{sortBy:B.value}})},re=B=>{M.push({query:{filterBy:B}})},ge=B=>{M.push({query:{filterByType:B.value}})},me=B=>{M.push({query:{filterBy:H,filterByType:K,q:B}})};if(le)return console.error(le.message),null;const pe=e.createElement("div",null,"Extend the Grafana experience with panel plugins and apps. To find more data sources go to"," ",e.createElement("a",{className:"external-link",href:`${b.b.AddNewConnection}?cat=data-source`},"Connections"),".");return e.createElement(N.Y,{navModel:i,subTitle:pe},e.createElement(N.Y.Contents,null,e.createElement(z.G,{wrap:!0},e.createElement(u.D,{label:"Search"},e.createElement(t,{value:se,onSearch:me})),e.createElement(z.G,{wrap:!0,className:I.actionBar},e.createElement(u.D,{label:"Type"},e.createElement(P.l6,{"aria-label":"Plugin type filter",value:K,onChange:ge,width:18,options:[{value:"all",label:"All"},{value:"datasource",label:"Data sources"},{value:"panel",label:"Panels"},{value:"app",label:"Applications"}]})),ce?e.createElement(u.D,{label:"State"},e.createElement(S.z,{value:H,onChange:re,options:oe})):e.createElement(A.m,{content:"This filter has been disabled because the Grafana server cannot access grafana.com",placement:"top"},e.createElement("div",null,e.createElement(u.D,{label:"State"},e.createElement(S.z,{disabled:!0,value:H,onChange:re,options:oe})))),e.createElement(u.D,{label:"Sort"},e.createElement(P.l6,{"aria-label":"Sort Plugins List",width:24,value:ae,onChange:de,options:[{value:"nameAsc",label:"By name (A-Z)"},{value:"nameDesc",label:"By name (Z-A)"},{value:"updated",label:"By updated date"},{value:"published",label:"By published date"},{value:"downloads",label:"By downloads"}]})),e.createElement(u.D,{label:"View"},e.createElement(S.z,{className:I.displayAs,value:y,onChange:te,options:[{value:m.fy.Grid,icon:"table",description:"Display plugins in a grid layout"},{value:m.fy.List,icon:"list-ul",description:"Display plugins in list"}]})))),e.createElement("div",{className:I.listWrap},e.createElement(k,{plugins:ue,displayMode:y,isLoading:ie}))))}const j=n=>({actionBar:(0,l.css)({[n.breakpoints.up("xl")]:{marginLeft:"auto"}}),listWrap:(0,l.css)({marginTop:n.spacing(2)}),displayAs:(0,l.css)({svg:{marginRight:0}})})},83391:(ne,C,s)=>{s.d(C,{Tr:()=>ee,A5:()=>_,wr:()=>V,m5:()=>G,PW:()=>x,F9:()=>O,ob:()=>F,xX:()=>Z,XN:()=>w,pw:()=>X,Gp:()=>v,qG:()=>J,SQ:()=>Q});var l=s(96540),e=s(80348),f=s(5129),r=s(20701),D=s(31326),u=s(1081),P=s(54479),S=s(66253);const A=t=>t.plugins,N=(0,u.Mz)(A,({items:t})=>t),R=(0,u.Mz)(A,({settings:t})=>t.displayMode),{selectAll:b,selectById:T}=D.AI.getSelectors(N),z=t=>(0,u.Mz)(b,a=>{const d=t.keyword?(0,P.xb)(t.keyword.toLowerCase()):"",p=d!==""?(0,f.TD)(a,d):null;return a.filter(E=>!(d&&p==null||d&&!p?.includes(E.id)||t.type&&E.type!==t.type||t.isInstalled!==void 0&&E.isInstalled!==t.isInstalled||t.isEnterprise!==void 0&&E.isEnterprise!==t.isEnterprise))}),U=t=>(0,u.Mz)(b,a=>{const d=[];for(const p of a)p.error&&(!t||p.type===t)&&d.push({pluginId:p.id,errorCode:p.error,pluginType:p.type});return d}),L=t=>(0,u.Mz)(A,({requests:a={}})=>a[t]),m=t=>(0,u.Mz)(L(t),a=>a?.status===S.IZ.Pending),h=t=>(0,u.Mz)(L(t),a=>a?.status===S.IZ.Rejected?a?.error:null),c=t=>(0,u.Mz)(L(t),a=>a===void 0),x=(t,a=f.by.nameAsc)=>{$();const d=(0,l.useMemo)(()=>z(t),[t]),p=(0,e.useSelector)(d),{isLoading:E,error:j}=Y(),n=(0,f.Xc)(p,a);return{isLoading:E,error:j,plugins:n}},F=t=>($(),q(t),(0,e.useSelector)(a=>T(a,t))),W=t=>(k(),useSelector(a=>selectById(a,t))),O=t=>($(),(0,e.useSelector)(U(t))),Z=()=>{const t=(0,e.useDispatch)();return(a,d,p)=>t((0,r.ai)({id:a,version:d,isUpdating:p}))},Q=()=>{const t=(0,e.useDispatch)();return()=>t((0,r.nT)())},v=()=>{const t=(0,e.useDispatch)();return a=>t((0,r.JC)(a))},X=()=>(0,e.useSelector)(h(r.JJ.typePrefix))===null,Y=()=>{const t=(0,e.useSelector)(m("plugins/fetchLocal")),a=(0,e.useSelector)(h("plugins/fetchLocal"));return{isLoading:t,error:a}},G=()=>{const t=(0,e.useSelector)(m(r.mj.typePrefix)),a=(0,e.useSelector)(h(r.mj.typePrefix));return{isLoading:t,error:a}},V=()=>{const t=(0,e.useSelector)(m(r.t5.typePrefix)),a=(0,e.useSelector)(h(r.t5.typePrefix));return{isLoading:t,error:a}},w=()=>{const t=(0,e.useSelector)(m(r.ai.typePrefix)),a=(0,e.useSelector)(h(r.ai.typePrefix));return{isInstalling:t,error:a}},J=()=>{const t=(0,e.useSelector)(m(r.JC.typePrefix)),a=(0,e.useSelector)(h(r.JC.typePrefix));return{isUninstalling:t,error:a}},$=()=>{const t=(0,e.useDispatch)(),a=(0,e.useSelector)(c(r.mj.typePrefix));(0,l.useEffect)(()=>{a&&t((0,r.mj)())},[])},k=()=>{const t=useDispatch(),a=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{a&&t(fetchAllLocal())},[])},q=t=>{const a=(0,e.useDispatch)(),d=(0,e.useSelector)(j=>T(j,t)),E=!(0,e.useSelector)(m(r.t5.typePrefix))&&d&&!d.details;(0,l.useEffect)(()=>{E&&a((0,r.t5)(t))},[d])},_=()=>{const t=(0,e.useDispatch)();return a=>t((0,r.t5)(a))},ee=()=>{const t=(0,e.useDispatch)();return{displayMode:(0,e.useSelector)(R),setDisplayMode:d=>t((0,D.qo)(d))}}}}]);

//# sourceMappingURL=PluginListPage.815b65d32380d0a800f7.js.map