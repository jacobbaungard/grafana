"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1168],{72557:(b,P,t)=>{t.d(P,{A:()=>T});var e=t(96540),A=t(14186),c=t(67647),S=t(55852),M=t(73725);class T extends e.PureComponent{render(){const{searchQuery:O,linkButton:a,setSearchQuery:p,target:v,placeholder:f="Search by name or type",sortPicker:E}=this.props,h={href:a?.href,disabled:a?.disabled};return v&&(h.target=v),e.createElement("div",{className:"page-action-bar"},e.createElement(A.I,{grow:!0},e.createElement(c.Z,{value:O,onChange:p,placeholder:f})),E&&e.createElement(M.r,{onChange:E.onChange,value:E.value,getSortOptions:E.getSortOptions}),a&&e.createElement(S.z9,{...h},a.title))}}},44450:(b,P,t)=>{t.r(P),t.d(P,{PlaylistPage:()=>R,default:()=>te});var e=t(96540),A=t(16817),c=t(55852),S=t(69529),M=t(72109),T=t(96374),x=t(67608),O=t(72557),a=t(8484),p=t(16233),v=t(32196),f=t(40845),E=t(72129),h=t(70255),g=t(10860),Z=t(71678),W=t(67061),j=t(93030),N=t(76885),B=t(37390),L=t(84167),C=t(88575),k=t(94354),z=t(10880),Q=t(10354),Y=t(10534),H=t(22699);const V=({playlistUid:l,onDismiss:n})=>{const[o,s]=(0,e.useState)(!1),[r,m]=(0,e.useState)(!1),d=[{label:(0,a.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,a.t)("share-playlist.mode-tv","TV"),value:"tv"},{label:(0,a.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],y={};o&&(y.kiosk=o),r&&(y.autofitpanels=!0);const i=N.kM.renderUrl(`${(0,H.P_)()}/play/${l}`,y);return e.createElement(B.a,{isOpen:!0,title:(0,a.t)("share-playlist.title","Share playlist"),onDismiss:n},e.createElement(L.n,null,e.createElement(C.D,{label:(0,a.t)("share-playlist.mode","Mode")},e.createElement(k.z,{value:o,options:d,onChange:s})),e.createElement(C.D,null,e.createElement(z.S,{label:(0,a.t)("share-playlist.checkbox-label","Autofit"),description:(0,a.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:r,onChange:u=>m(u.currentTarget.checked)})),e.createElement(C.D,{label:(0,a.t)("share-playlist.link-url-label","Link URL")},e.createElement(Q.p,{id:"link-url-input",value:i,readOnly:!0,addonAfter:e.createElement(Y.b,{icon:"copy",variant:"primary",getText:()=>i},e.createElement(a.x6,{i18nKey:"share-playlist.copy-link-button"},"Copy"))}))))},G=({playlist:l,setStartPlaylist:n,setPlaylistToDelete:o})=>e.createElement(g.Z,null,e.createElement(g.Z.Heading,null,l.name,e.createElement(Z.$s,{key:"button-share"},({showModal:s,hideModal:r})=>e.createElement(j._,{tooltip:(0,a.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{s(V,{playlistUid:l.uid,onDismiss:r})}}))),e.createElement(g.Z.Actions,null,e.createElement(c.$n,{variant:"secondary",icon:"play",onClick:()=>n(l)},e.createElement(a.x6,{i18nKey:"playlist-page.card.start"},"Start playlist")),p.TP.isEditor&&e.createElement(e.Fragment,null,e.createElement(c.z9,{key:"edit",variant:"secondary",href:`/playlists/edit/${l.uid}`,icon:"cog"},e.createElement(a.x6,{i18nKey:"playlist-page.card.edit"},"Edit playlist")),e.createElement(c.$n,{disabled:!1,onClick:()=>o(l),icon:"trash-alt",variant:"destructive"},e.createElement(a.x6,{i18nKey:"playlist-page.card.delete"},"Delete playlist"))))),J=({rootProps:l})=>{const n=(0,f.of)(X);return e.createElement(g.Z,{...l},e.createElement(g.Z.Heading,null,e.createElement(h.A,{width:140})),e.createElement(g.Z.Actions,null,e.createElement(W.B,{direction:"row",wrap:"wrap"},e.createElement(h.A,{containerClassName:n.button,width:142,height:32}),p.TP.isEditor&&e.createElement(e.Fragment,null,e.createElement(h.A,{containerClassName:n.button,width:135,height:32}),e.createElement(h.A,{containerClassName:n.button,width:153,height:32})))))},D=(0,E.j)(G,J);function X(l){return{button:(0,v.css)({lineHeight:1})}}const w=({playlists:l,setStartPlaylist:n,setPlaylistToDelete:o})=>{const s=(0,f.of)(I);return e.createElement("ul",{className:s.list},l.map(r=>e.createElement("li",{className:s.listItem,key:r.uid},e.createElement(D,{playlist:r,setStartPlaylist:n,setPlaylistToDelete:o}))))},q=({rootProps:l})=>{const n=(0,f.of)(I);return e.createElement("div",{"data-testid":"playlist-page-list-skeleton",className:n.list,...l},e.createElement(D.Skeleton,null),e.createElement(D.Skeleton,null),e.createElement(D.Skeleton,null))},F=(0,E.j)(w,q);function I(l){return{list:(0,v.css)({display:"grid"}),listItem:(0,v.css)({listStyle:"none"})}}var _=t(12131);const ee=({playlist:l,onDismiss:n})=>{const[o,s]=(0,e.useState)(!1),[r,m]=(0,e.useState)(!1),d=[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],y=()=>{const i={};o&&(i.kiosk=o),r&&(i.autofitpanels=!0),_.Ny.push(N.kM.renderUrl(`/playlists/play/${l.uid}`,i))};return e.createElement(B.a,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:n},e.createElement(L.n,null,e.createElement(C.D,{label:"Mode"},e.createElement(k.z,{value:o,options:d,onChange:s})),e.createElement(z.S,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:r,onChange:i=>m(i.currentTarget.checked)})),e.createElement(B.a.ButtonRow,null,e.createElement(c.$n,{variant:"primary",onClick:y},"Start ",l.name)))};var U=t(86022);const R=()=>{const l=(0,U.NF)(),[n,o]=(0,e.useState)(0),[s,r]=(0,e.useState)(""),m=(0,A.A)(()=>l.getAllPlaylist(),[n]),d=(0,e.useMemo)(()=>(0,U.GM)(m.value??[],s),[s,m]),[y,i]=(0,e.useState)(),[u,K]=(0,e.useState)(),ae=d&&d.length>0,le=()=>K(void 0),ne=()=>{u&&l.deletePlaylist(u.uid).finally(()=>{o(n+1),K(void 0)})},$=m.loading||d.length>0||s.length>0;return e.createElement(x.Y,{actions:p.TP.isEditor?e.createElement(c.z9,{href:"/playlists/new"},e.createElement(a.x6,{i18nKey:"playlist-page.create-button.title"},"New playlist")):void 0,navId:"dashboards/playlists"},e.createElement(x.Y.Contents,null,$&&e.createElement(O.A,{searchQuery:s,setSearchQuery:r}),m.loading?e.createElement(F.Skeleton,null):e.createElement(e.Fragment,null,!ae&&s?e.createElement(S.p,{variant:"not-found",message:(0,a.t)("playlists.empty-state.message","No playlists found")}):e.createElement(F,{playlists:d,setStartPlaylist:i,setPlaylistToDelete:K}),!$&&e.createElement(S.p,{variant:"call-to-action",button:e.createElement(c.z9,{disabled:!p.TP.isEditor,href:"playlists/new",icon:"plus",size:"lg"},e.createElement(a.x6,{i18nKey:"playlist-page.empty.button"},"Create playlist")),message:(0,a.t)("playlist-page.empty.title","There are no playlists created yet")},e.createElement(a.x6,{i18nKey:"playlist-page.empty.pro-tip"},"You can use playlists to cycle dashboards on TVs without user control."," ",e.createElement(M.Y,{external:!0,href:"https://docs.grafana.org/reference/playlist/"},"Learn more"))),u&&e.createElement(T.u,{title:u.name,confirmText:(0,a.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,a.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:u.name}),onConfirm:ne,isOpen:!!u,onDismiss:le}),y&&e.createElement(ee,{playlist:y,onDismiss:()=>i(void 0)}))))},te=R}}]);

//# sourceMappingURL=PlaylistPage.f97e458cf94290bdecbd.js.map