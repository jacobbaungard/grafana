(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1133],{74526:()=>{(function(){"use strict";/**
 * Bindonce - Zero watches binding for AngularJs
 * @version v0.3.1
 * @link https://github.com/Pasvaz/bindonce
 * @author Pasquale Vazzana <pasqualevazzana@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */var A=angular.module("pasvaz.bindonce",[]);A.directive("bindonce",function(){var w=function(I){if(I&&I.length!==0){var E=angular.lowercase(""+I);I=!(E==="f"||E==="0"||E==="false"||E==="no"||E==="n"||E==="[]")}else I=!1;return I},i=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(i)&&(i=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var z={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(I,E,S,k){var o=function(c,h,d){var B=h==="show"?"":"none",Z=h==="hide"?"":"none";c.css("display",w(d)?B:Z)},s=function(c,h){if(angular.isObject(h)&&!angular.isArray(h)){var d=[];angular.forEach(h,function(B,Z){B&&d.push(Z)}),h=d}h&&c.addClass(angular.isArray(h)?h.join(" "):h)},p={watcherRemover:void 0,binders:[],group:S.boName,element:E,ran:!1,addBinder:function(c){this.binders.push(c),this.ran&&this.runBinders()},setupWatcher:function(c){var h=this;this.watcherRemover=I.$watch(c,function(d){d!==void 0&&(h.removeWatcher(),h.runBinders())},!0)},removeWatcher:function(){this.watcherRemover!==void 0&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var c=this.binders.shift();if(!(this.group&&this.group!=c.group)){var h=c.scope.$eval(c.interpolate?k(c.value):c.value);switch(c.attr){case"boIf":w(h)&&c.transclude(c.scope.$new(),function(H){var q=c.element.parent(),R=c.element&&c.element[c.element.length-1],j=q&&q[0]||R&&R.parentNode,g=R&&R.nextSibling||null;angular.forEach(H,function(ie){j.insertBefore(ie,g)})});break;case"boSwitch":var d,B=c.controller[0];(d=B.cases["!"+h]||B.cases["?"])&&(c.scope.$eval(c.attrs.change),angular.forEach(d,function(H){H.transclude(c.scope.$new(),function(q){var R=H.element.parent(),j=H.element&&H.element[H.element.length-1],g=R&&R[0]||j&&j.parentNode,ie=j&&j.nextSibling||null;angular.forEach(q,function(pe){g.insertBefore(pe,ie)})})}));break;case"boSwitchWhen":var Z=c.controller[0];Z.cases["!"+c.attrs.boSwitchWhen]=Z.cases["!"+c.attrs.boSwitchWhen]||[],Z.cases["!"+c.attrs.boSwitchWhen].push({transclude:c.transclude,element:c.element});break;case"boSwitchDefault":var Z=c.controller[0];Z.cases["?"]=Z.cases["?"]||[],Z.cases["?"].push({transclude:c.transclude,element:c.element});break;case"hide":case"show":o(c.element,c.attr,h);break;case"class":s(c.element,h);break;case"text":c.element.text(h);break;case"html":c.element.html(h);break;case"style":c.element.css(h);break;case"src":c.element.attr(c.attr,h),i&&c.element.prop("src",h);break;case"attr":angular.forEach(c.attrs,function(H,q){var R,j;q.match(/^boAttr./)&&c.attrs[q]&&(R=q.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),j=c.scope.$eval(c.attrs[q]),c.element.attr(R,j))});break;case"href":case"alt":case"title":case"id":case"value":c.element.attr(c.attr,h);break}}}this.ran=!0}};return p}],link:function(I,E,S,k){var o=S.bindonce?I.$eval(S.bindonce):!0;o!==void 0?k.runBinders():(k.setupWatcher(S.bindonce),E.bind("$destroy",k.removeWatcher))}};return z}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(w){var i=200;return A.directive(w.directiveName,function(){var z={priority:w.priority||i,transclude:w.transclude||!1,terminal:w.terminal||!1,require:["^bindonce"].concat(w.require||[]),controller:w.controller,compile:function(I,E,S){return function(k,o,s,p){var c=p[0],h=s.boParent;if(h&&c.group!==h){var d=c.element.parent();c=void 0;for(var B;d[0].nodeType!==9&&d.length;){if((B=d.data("$bindonceController"))&&B.group===h){c=B;break}d=d.parent()}if(!c)throw new Error("No bindonce controller: "+h)}c.addBinder({element:o,attr:w.attribute||w.directiveName,attrs:s,value:s[w.directiveName],interpolate:w.interpolate,group:h,transclude:S,controller:p.slice(1),scope:k})}}};return z})})})()},32747:()=>{/**
 * @license AngularJS v1.8.3
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */(function(A,w){"use strict";function i(H,q){if(I(H)){q=q||[];for(var R=0,j=H.length;R<j;R++)q[R]=H[R]}else if(E(H)){q=q||{};for(var g in H)g.charAt(0)==="$"&&g.charAt(1)==="$"||(q[g]=H[g])}return q||H}function z(H,q){var R=[],j=H.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(g,ie,pe,K){var ae=K==="?"||K==="*?",le=K==="*"||K==="*?";return R.push({name:pe,optional:ae}),ie=ie||"",(ae?"(?:"+ie:ie+"(?:")+(le?"(.+?)":"([^/]+)")+(ae?"?)?":")")}).replace(/([/$*])/g,"\\$1");return q.ignoreTrailingSlashes&&(j=j.replace(/\/+$/,"")+"/*"),{keys:R,regexp:new RegExp("^"+j+"(?:[?#]|$)",q.caseInsensitiveMatch?"i":"")}}var I,E,S,k,o=w.module("ngRoute",[]).info({angularVersion:"1.8.3"}).provider("$route",c).run(h),s=w.$$minErr("ngRoute"),p;function c(){I=w.isArray,E=w.isObject,S=w.isDefined,k=w.noop;function H(R,j){return w.extend(Object.create(R),j)}var q={};this.when=function(R,j){var g=i(j);if(w.isUndefined(g.reloadOnUrl)&&(g.reloadOnUrl=!0),w.isUndefined(g.reloadOnSearch)&&(g.reloadOnSearch=!0),w.isUndefined(g.caseInsensitiveMatch)&&(g.caseInsensitiveMatch=this.caseInsensitiveMatch),q[R]=w.extend(g,{originalPath:R},R&&z(R,g)),R){var ie=R[R.length-1]==="/"?R.substr(0,R.length-1):R+"/";q[ie]=w.extend({originalPath:R,redirectTo:R},z(ie,g))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(R){return typeof R=="string"&&(R={redirectTo:R}),this.when(null,R),this},p=!0,this.eagerInstantiationEnabled=function(j){return S(j)?(p=j,this):p},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(R,j,g,ie,pe,K,ae,le){var b=!1,oe,U,ue={routes:q,reload:function(){b=!0;var O={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,b=!1}};R.$evalAsync(function(){ne(O),O.defaultPrevented||ee()})},updateParams:function(O){if(this.current&&this.current.$$route)O=w.extend({},this.current.params,O),j.path(Ae(this.current.$$route.originalPath,O)),j.search(O);else throw s("norout","Tried updating route with no current route")}};return R.$on("$locationChangeStart",ne),R.$on("$locationChangeSuccess",ee),ue;function C(O,F){var T=F.keys,V={};if(!F.regexp)return null;var Q=F.regexp.exec(O);if(!Q)return null;for(var te=1,Y=Q.length;te<Y;++te){var fe=T[te-1],M=Q[te];fe&&M&&(V[fe.name]=M)}return V}function ne(O){var F=ue.current;oe=be(),U=Ce(oe,F),!U&&(F||oe)&&R.$broadcast("$routeChangeStart",oe,F).defaultPrevented&&O&&O.preventDefault()}function ee(){var O=ue.current,F=oe;if(U)O.params=F.params,w.copy(O.params,g),R.$broadcast("$routeUpdate",O);else if(F||O){b=!1,ue.current=F;var T=ie.resolve(F);le.$$incOutstandingRequestCount("$route"),T.then(W).then(G).then(function(V){return V&&T.then(me).then(function(Q){F===ue.current&&(F&&(F.locals=Q,w.copy(F.params,g)),R.$broadcast("$routeChangeSuccess",F,O))})}).catch(function(V){F===ue.current&&R.$broadcast("$routeChangeError",F,O,V)}).finally(function(){le.$$completeOutstandingRequest(k,"$route")})}}function W(O){var F={route:O,hasRedirection:!1};if(O){if(O.redirectTo)if(w.isString(O.redirectTo))F.path=Ae(O.redirectTo,O.params),F.search=O.params,F.hasRedirection=!0;else{var T=j.path(),V=j.search(),Q=O.redirectTo(O.pathParams,T,V);w.isDefined(Q)&&(F.url=Q,F.hasRedirection=!0)}else if(O.resolveRedirectTo)return ie.resolve(pe.invoke(O.resolveRedirectTo)).then(function(te){return w.isDefined(te)&&(F.url=te,F.hasRedirection=!0),F})}return F}function G(O){var F=!0;if(O.route!==ue.current)F=!1;else if(O.hasRedirection){var T=j.url(),V=O.url;V?j.url(V).replace():V=j.path(O.path).search(O.search).replace().url(),V!==T&&(F=!1)}return F}function me(O){if(O){var F=w.extend({},O.resolve);w.forEach(F,function(V,Q){F[Q]=w.isString(V)?pe.get(V):pe.invoke(V,null,null,Q)});var T=de(O);return w.isDefined(T)&&(F.$template=T),ie.all(F)}}function de(O){var F,T;return w.isDefined(F=O.template)?w.isFunction(F)&&(F=F(O.params)):w.isDefined(T=O.templateUrl)&&(w.isFunction(T)&&(T=T(O.params)),w.isDefined(T)&&(O.loadedTemplateUrl=ae.valueOf(T),F=K(T))),F}function be(){var O,F;return w.forEach(q,function(T,V){!F&&(O=C(j.path(),T))&&(F=H(T,{params:w.extend({},j.search(),O),pathParams:O}),F.$$route=T)}),F||q[null]&&H(q[null],{params:{},pathParams:{}})}function Ce(O,F){return!b&&O&&F&&O.$$route===F.$$route&&(!O.reloadOnUrl||!O.reloadOnSearch&&w.equals(O.pathParams,F.pathParams))}function Ae(O,F){var T=[];return w.forEach((O||"").split(":"),function(V,Q){if(Q===0)T.push(V);else{var te=V.match(/(\w+)(?:[?*])?(.*)/),Y=te[1];T.push(F[Y]),T.push(te[2]||""),delete F[Y]}}),T.join("")}}]}h.$inject=["$injector"];function h(H){p&&H.get("$route")}o.provider("$routeParams",d);function d(){this.$get=function(){return{}}}o.directive("ngView",B),o.directive("ngView",Z),B.$inject=["$route","$anchorScroll","$animate"];function B(H,q,R){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(j,g,ie,pe,K){var ae,le,b,oe=ie.autoscroll,U=ie.onload||"";j.$on("$routeChangeSuccess",C),C();function ue(){b&&(R.cancel(b),b=null),ae&&(ae.$destroy(),ae=null),le&&(b=R.leave(le),b.done(function(ne){ne!==!1&&(b=null)}),le=null)}function C(){var ne=H.current&&H.current.locals,ee=ne&&ne.$template;if(w.isDefined(ee)){var W=j.$new(),G=H.current,me=K(W,function(de){R.enter(de,null,le||g).done(function(Ce){Ce!==!1&&w.isDefined(oe)&&(!oe||j.$eval(oe))&&q()}),ue()});le=me,ae=G.scope=W,ae.$emit("$viewContentLoaded"),ae.$eval(U)}else ue()}}}}Z.$inject=["$compile","$controller","$route"];function Z(H,q,R){return{restrict:"ECA",priority:-400,link:function(j,g){var ie=R.current,pe=ie.locals;g.html(pe.$template);var K=H(g.contents());if(ie.controller){pe.$scope=j;var ae=q(ie.controller,pe);ie.controllerAs&&(j[ie.controllerAs]=ae),g.data("$ngControllerController",ae),g.children().data("$ngControllerController",ae)}j[ie.resolveAs||"$resolve"]=pe,K(j)}}}})(window,window.angular)},23345:(A,w,i)=>{i(32747),A.exports="ngRoute"},81221:()=>{/**
 * @license AngularJS v1.8.3
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */(function(A,w){"use strict";var i=w.$$minErr("$sanitize"),z,I,E,S,k,o,s,p,c,h;function d(){var Z=!1,H=!1;this.$get=["$$sanitizeUri",function(T){return Z=!0,H&&I(oe,le),function(V){var Q=[];return c(V,h(Q,function(te,Y){return!/^unsafe:/.test(T(te,Y))})),Q.join("")}}],this.enableSvg=function(T){return k(T)?(H=T,this):H},this.addValidElements=function(T){return Z||(S(T)&&(T={htmlElements:T}),G(le,T.svgElements),G(j,T.htmlVoidElements),G(oe,T.htmlVoidElements),G(oe,T.htmlElements)),this},this.addValidAttrs=function(T){return Z||I(ne,W(T,!0)),this},z=w.bind,I=w.extend,E=w.forEach,S=w.isArray,k=w.isDefined,o=w.$$lowercase,s=w.noop,c=de,h=Ae,p=A.Node.prototype.contains||function(T){return!!(this.compareDocumentPosition(T)&16)};var q=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,R=/([^#-~ |!])/g,j=ee("area,br,col,hr,img,wbr"),g=ee("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ie=ee("rp,rt"),pe=I({},ie,g),K=I({},g,ee("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),ae=I({},ie,ee("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),le=ee("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),b=ee("script,style"),oe=I({},j,K,ae,pe),U=ee("background,cite,href,longdesc,src,xlink:href,xml:base"),ue=ee("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),C=ee("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),ne=I({},U,C,ue);function ee(T,V){return W(T.split(","),V)}function W(T,V){var Q={},te;for(te=0;te<T.length;te++)Q[V?o(T[te]):T[te]]=!0;return Q}function G(T,V){V&&V.length&&I(T,W(V))}var me=function(T,V){if(Y())return fe;if(!V||!V.implementation)throw i("noinert","Can't create an inert html document");var Q=V.implementation.createHTMLDocument("inert"),te=(Q.documentElement||Q.getDocumentElement()).querySelector("body");return M;function Y(){try{return!!fe("")}catch{return!1}}function fe(se){se="<remove></remove>"+se;try{var D=new T.DOMParser().parseFromString(se,"text/html").body;return D.firstChild.remove(),D}catch{return}}function M(se){return te.innerHTML=se,V.documentMode&&O(te),te}}(A,A.document);function de(T,V){T==null?T="":typeof T!="string"&&(T=""+T);var Q=me(T);if(!Q)return"";var te=5;do{if(te===0)throw i("uinput","Failed to sanitize html because the input is unstable");te--,T=Q.innerHTML,Q=me(T)}while(T!==Q.innerHTML);for(var Y=Q.firstChild;Y;){switch(Y.nodeType){case 1:V.start(Y.nodeName.toLowerCase(),be(Y.attributes));break;case 3:V.chars(Y.textContent);break}var fe;if(!(fe=Y.firstChild)&&(Y.nodeType===1&&V.end(Y.nodeName.toLowerCase()),fe=F("nextSibling",Y),!fe))for(;fe==null&&(Y=F("parentNode",Y),Y!==Q);)fe=F("nextSibling",Y),Y.nodeType===1&&V.end(Y.nodeName.toLowerCase());Y=fe}for(;Y=Q.firstChild;)Q.removeChild(Y)}function be(T){for(var V={},Q=0,te=T.length;Q<te;Q++){var Y=T[Q];V[Y.name]=Y.value}return V}function Ce(T){return T.replace(/&/g,"&amp;").replace(q,function(V){var Q=V.charCodeAt(0),te=V.charCodeAt(1);return"&#"+((Q-55296)*1024+(te-56320)+65536)+";"}).replace(R,function(V){return"&#"+V.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ae(T,V){var Q=!1,te=z(T,T.push);return{start:function(Y,fe){Y=o(Y),!Q&&b[Y]&&(Q=Y),!Q&&oe[Y]===!0&&(te("<"),te(Y),E(fe,function(M,se){var D=o(se),xe=Y==="img"&&D==="src"||D==="background";ne[D]===!0&&(U[D]!==!0||V(M,xe))&&(te(" "),te(se),te('="'),te(Ce(M)),te('"'))}),te(">"))},end:function(Y){Y=o(Y),!Q&&oe[Y]===!0&&j[Y]!==!0&&(te("</"),te(Y),te(">")),Y==Q&&(Q=!1)},chars:function(Y){Q||te(Ce(Y))}}}function O(T){for(;T;){if(T.nodeType===A.Node.ELEMENT_NODE)for(var V=T.attributes,Q=0,te=V.length;Q<te;Q++){var Y=V[Q],fe=Y.name.toLowerCase();(fe==="xmlns:ns1"||fe.lastIndexOf("ns1:",0)===0)&&(T.removeAttributeNode(Y),Q--,te--)}var M=T.firstChild;M&&O(M),T=F("nextSibling",T)}}function F(T,V){var Q=V[T];if(Q&&p.call(V,Q))throw i("elclob","Failed to sanitize html because the element is clobbered: {0}",V.outerHTML||V.outerText);return Q}}function B(Z){var H=[],q=h(H,s);return q.chars(Z),H.join("")}w.module("ngSanitize",[]).provider("$sanitize",d).info({angularVersion:"1.8.3"}),w.module("ngSanitize").filter("linky",["$sanitize",function(Z){var H=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,q=/^mailto:/i,R=w.$$minErr("linky"),j=w.isDefined,g=w.isFunction,ie=w.isObject,pe=w.isString;return function(K,ae,le){if(K==null||K==="")return K;if(!pe(K))throw R("notstring","Expected string but received: {0}",K);for(var b=g(le)?le:ie(le)?function(){return le}:function(){return{}},oe,U=K,ue=[],C,ne;oe=U.match(H);)C=oe[0],!oe[2]&&!oe[4]&&(C=(oe[3]?"http://":"mailto:")+C),ne=oe.index,ee(U.substr(0,ne)),W(C,oe[0].replace(q,"")),U=U.substring(ne+oe[0].length);return ee(U),Z(ue.join(""));function ee(G){G&&ue.push(B(G))}function W(G,me){var de,be=b(G);ue.push("<a ");for(de in be)ue.push(de+'="'+be[de]+'" ');j(ae)&&!("target"in be)&&ue.push('target="',ae,'" '),ue.push('href="',G.replace(/"/g,"&quot;"),'">'),ee(me),ue.push("</a>")}}}])})(window,window.angular)},26415:(A,w,i)=>{i(81221),A.exports="ngSanitize"},12582:A=>{"use strict";function w(i){var z=this,I;if(this._au)return;function E(){z.root[z.origin.offset]?k():S()}function S(){I||(I=setInterval(function(){z.root[z.origin.offset]&&(k(),z.update())},300))}function k(){clearInterval(I),I=null}var o=z._debounce(function(){z.update()},300);this._observer=new i(function(){E(),z.update(),o()}),this.on("init",function(){z._observer.observe(z.root,{childList:!0,subtree:!0,characterData:!0}),E()}),this.on("dispose",function(){z._observer.disconnect(),k(),delete z._observer}),this._au=!0}A.exports=function(z){var I=z.MutationObserver||z.WebKitMutationObserver||z.MozMutationObserver||null;return function(){return I?(w.call(this,I),this):this}}},69786:(A,w,i)=>{"use strict";var z=i(69079).qs;A.exports=function(E){var S,k,o,s,p=this,c;s=E.screen||.9,E.forward&&(S=z(E.forward,this.clipper),c={element:S,handler:function(){var h=p.pos()+(E.delta||30);p.pos(h)},type:"click"},this._eventHandlers.push(c),this.event(c.element,c.type,c.handler,"on")),E.backward&&(k=z(E.backward,this.clipper),c={element:k,handler:function(){var h=p.pos()-(E.delta||30);p.pos(h)},type:"click"},this._eventHandlers.push(c),this.event(c.element,c.type,c.handler,"on")),E.track&&(E.track===!0?o=this.track:o=z(E.track,this.clipper),o&&(c={element:o,handler:function(h){if(h.target==o){var d=h["offset"+p.origin.x],B=p.bar[p.origin.offsetPos],Z=0;d<B?Z=-1:d>B+p.bar[p.origin.offset]&&(Z=1);var H=p.pos()+Z*s*p.scroller[p.origin.client];p.pos(H)}},type:"mousedown"},this._eventHandlers.push(c),this.event(c.element,c.type,c.handler,"on")))}},92747:(A,w,i)=>{"use strict";var z=function(){return this||(0,eval)("this")}(),I=z&&z.window||z,E=i(69079).f0,S=i(69079).AH,k=i(69079).WQ,o=i(69079).zy,s=i(69079).rm,p=i(69079).o8,c=i(69079).qs,h=K,d=["left","top","right","bottom","width","height"],B=[],Z={v:{x:"Y",pos:d[1],oppos:d[3],crossPos:d[0],crossOpPos:d[2],size:d[5],crossSize:d[4],crossMinSize:"min-"+d[4],crossMaxSize:"max-"+d[4],client:"clientHeight",crossClient:"clientWidth",scrollEdge:"scrollLeft",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:d[0],oppos:d[2],crossPos:d[1],crossOpPos:d[3],size:d[4],crossSize:d[5],crossMinSize:"min-"+d[5],crossMaxSize:"max-"+d[5],client:"clientWidth",crossClient:"clientHeight",scrollEdge:"scrollTop",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},H=17,q=15,R=/[\s\S]*Macintosh[\s\S]*\) Gecko[\s\S]*/,j=R.test(I.navigator&&I.navigator.userAgent),g,ie,pe;function K(C){var ne=!!C,ee=C&&C[0]||C,W=typeof C=="string"||ee instanceof HTMLElement,G=W?{root:C}:p(C),me,de,be={direction:"v",barOnCls:"_scrollbar",resizeDebounce:0,event:E,cssGuru:!1,impact:"scroller",position:"static"};G=G||{};for(var Ce in be)G[Ce]==null&&(G[Ce]=be[Ce]);me=this&&this instanceof I.jQuery,G._chain?de=G.root:me?G.root=de=this[0]:de=c(G.root||G.scroller);var Ae=oe(de,G.direction),O=+Ae;if(G.index=O,O==O&&Ae!==null&&B[O])return B[O];G.root&&G.scroller?G.scroller=c(G.scroller,de):G.scroller=de,G.root=de;var F=U(G);return F.autoUpdate&&F.autoUpdate(),F}function ae(C,ne){var ee=0,W=C;for((W.length===void 0||W===I)&&(W=[W]);W[ee];)ne.call(this,W[ee],ee),ee++}function le(){return new Date().getTime()}function b(C,ne,ee){C._eventHandlers=C._eventHandlers||[{element:C.scroller,handler:function(W){C.scroll(W)},type:"scroll"},{element:C.root,handler:function(){C.update()},type:"transitionend animationend"},{element:C.scroller,handler:function(){C.update()},type:"keyup"},{element:C.bar,handler:function(W){W.preventDefault(),C.selection(),C.drag.now=1,C.draggingCls&&k(C.root,C.draggingCls)},type:"touchstart mousedown"},{element:document,handler:function(){C.selection(1),C.drag.now=0,C.draggingCls&&s(C.root,C.draggingCls)},type:"mouseup blur touchend"},{element:document,handler:function(W){W.button!=2&&C._pos0(W)},type:"touchstart mousedown"},{element:document,handler:function(W){C.drag.now&&C.drag(W)},type:"mousemove touchmove"},{element:I,handler:function(){C.update()},type:"resize"},{element:C.root,handler:function(){C.update()},type:"sizeChange"},{element:C.clipper,handler:function(){C.clipperOnScroll()},type:"scroll"}],ae(C._eventHandlers,function(W){if(W.element)if(W.element.length&&W.element!==I)for(var G=0;G<W.element.length;G++)ne(W.element[G],W.type,W.handler,ee);else ne(W.element,W.type,W.handler,ee)})}function oe(C,ne,ee,W){var G="data-baron-"+ne+"-id";return ee=="on"?C.setAttribute(G,W):ee=="off"&&C.removeAttribute(G),C.getAttribute(G)}function U(C){var ne=new K.prototype.constructor(C);return b(ne,C.event,"on"),oe(ne.root,C.direction,"on",B.length),B.push(ne),ne.update(),ne}function ue(C){if(this.events&&this.events[C])for(var ne=0;ne<this.events[C].length;ne++){var ee=Array.prototype.slice.call(arguments,1);this.events[C][ne].apply(this,ee)}}K.prototype={_debounce:function(C,ne){var ee=this,W,G,me=function(){if(ee._disposed){clearTimeout(W),W=ee=null;return}var de=le()-G;de<ne&&de>=0?W=setTimeout(me,ne-de):(W=null,C())};return function(){G=le(),W||(W=setTimeout(me,ne))}},constructor:function(C){var ne,ee,W,G,me,de,be;de=le(),this.params=C,this.event=C.event,this.events={},this.root=C.root,this.scroller=c(C.scroller),this.bar=c(C.bar,this.root),W=this.track=c(C.track,this.root),!this.track&&this.bar&&(W=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=C.direction,this.rtl=C.rtl,this.origin=Z[this.direction],this.barOnCls=C.barOnCls,this.scrollingCls=C.scrollingCls,this.draggingCls=C.draggingCls,this.impact=C.impact,this.position=C.position,this.rtl=C.rtl,this.barTopLimit=0,this.resizeDebounce=C.resizeDebounce;function Ce(M){var se=this.barMinSize||20,D=M;D>0&&D<se&&(D=se),this.bar&&S(this.bar,this.origin.size,parseInt(D,10)+"px")}function Ae(M){if(this.bar){var se=S(this.bar,this.origin.pos),D=+M+"px";D&&D!=se&&S(this.bar,this.origin.pos,D)}}function O(){return W[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function F(M){return M*O.call(this)+this.barTopLimit}function T(M){return(M-this.barTopLimit)/O.call(this)}this.cursor=function(M){return M["client"+this.origin.x]||(((M.originalEvent||M).touches||{})[0]||{})["page"+this.origin.x]};function V(){return!1}if(this.pos=function(M){var se="page"+this.origin.x+"Offset",D=this.scroller[se]?se:this.origin.scroll;return M!==void 0&&(this.scroller[D]=M),this.scroller[D]},this.rpos=function(M){var se=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client],D;return M?D=this.pos(M*se):D=this.pos(),D/(se||1)},this.barOn=function(M){if(this.barOnCls){var se=this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize];M||se?o(this.root,this.barOnCls)&&s(this.root,this.barOnCls):o(this.root,this.barOnCls)||k(this.root,this.barOnCls)}},this._pos0=function(M){ee=this.cursor(M)-ne},this.drag=function(M){var se=T.call(this,this.cursor(M)-ee),D=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];this.scroller[this.origin.scroll]=se*D},this.selection=function(M){this.event(document,"selectpos selectstart",V,M?"off":"on")},this.resize=function(){var M=this,se=M.resizeDebounce===void 0?300:M.resizeDebounce,D=0;le()-de<se&&(clearTimeout(G),D=se);function xe(){var Se=M.scroller[M.origin.crossOffset],ge=M.scroller[M.origin.crossClient],Ne=0,Me,De;if(j?Ne=q:ge>0&&Se===0&&(Se=ge+H),Se)if(M.barOn(),M.impact=="scroller"){var Fe=Se-ge+Ne;if(M.position=="static")Me=S(M.scroller,M.origin.crossSize),De=M.clipper[M.origin.crossClient]+Fe+"px",Me!=De&&M._setCrossSizes(M.scroller,De);else{var Ue={},ze=M.rtl?"Left":"Right";M.direction=="h"&&(ze="Bottom"),Ue["padding"+ze]=Fe+"px",S(M.scroller,Ue)}}else Me=S(M.clipper,M.origin.crossSize),De=ge+"px",Me!=De&&M._setCrossSizes(M.clipper,De);Array.prototype.unshift.call(arguments,"resize"),ue.apply(M,arguments),de=le()}D?G=setTimeout(xe,D):xe()},this.updatePositions=function(M){var se,D=this;D.bar&&(se=(W[D.origin.client]-D.barTopLimit)*D.scroller[D.origin.client]/D.scroller[D.origin.scrollSize],(M||parseInt(be,10)!=parseInt(se,10))&&(Ce.call(D,se),be=se),ne=F.call(D,D.rpos()),Ae.call(D,ne)),Array.prototype.unshift.call(arguments,"scroll"),ue.apply(D,arguments)},this.scroll=function(){var M=this;M.updatePositions(),M.scrollingCls&&(me||k(M.root,M.scrollingCls),clearTimeout(me),me=setTimeout(function(){s(M.root,M.scrollingCls),me=void 0},300))},this.clipperOnScroll=function(){this.rtl?this.clipper[this.origin.scrollEdge]=this.clipper[this.origin.scrollSize]:this.clipper[this.origin.scrollEdge]=0},this._setCrossSizes=function(M,se){var D={};D[this.origin.crossSize]=se,D[this.origin.crossMinSize]=se,D[this.origin.crossMaxSize]=se,S(M,D)},this._dumbCss=function(M){if(!C.cssGuru){var se=M?"hidden":null,D=M?"none":null;S(this.clipper,{overflow:se,msOverflowStyle:D,position:this.position=="static"?"":"relative"});var xe=M?"scroll":null,Se=this.direction=="v"?"y":"x",ge={};ge["overflow-"+Se]=xe,ge["box-sizing"]="border-box",ge.margin="0",ge.border="0",this.position=="absolute"&&(ge.position="absolute",ge.top="0",this.direction=="h"?ge.left=ge.right="0":(ge.bottom="0",ge.right=this.rtl?"0":"",ge.left=this.rtl?"":"0")),S(this.scroller,ge)}},this._dumbCss(!0),j){var Q="paddingRight",te={},Y=I.getComputedStyle(this.scroller)[[Q]];C.direction=="h"?Q="paddingBottom":C.rtl&&(Q="paddingLeft");var fe=parseInt(Y,10);fe!=fe&&(fe=0),te[Q]=q+fe+"px",S(this.scroller,te)}return this},update:function(C){return ue.call(this,"upd",C),this.resize(1),this.updatePositions(1),this},dispose:function(){b(this,this.event,"off"),oe(this.root,this.params.direction,"off"),this.params.direction=="v"?this._setCrossSizes(this.scroller,""):this._setCrossSizes(this.clipper,""),this._dumbCss(!1),this.barOn(!0),ue.call(this,"dispose"),B[this.params.index]=null,this.params=null,this._disposed=!0},on:function(C,ne,ee){for(var W=C.split(" "),G=0;G<W.length;G++)W[G]=="init"?ne.call(this,ee):(this.events[W[G]]=this.events[W[G]]||[],this.events[W[G]].push(function(me){ne.call(this,me||ee)}))},baron:function(C){return C.root=this.params.root,C.scroller=this.params.scroller,C.direction=this.params.direction=="v"?"h":"v",C._chain=!0,K(C)}},K.prototype.constructor.prototype=K.prototype,K.noConflict=function(){return I.baron=h,K},K.version="3.0.1",K.prototype.autoUpdate=i(12582)(I),K.prototype.fix=i(41197),K.prototype.controls=i(69786),A.exports=K},41197:(A,w,i)=>{"use strict";var z=i(37420),I=i(69079).AH,E=i(69079).WQ,S=i(69079).rm;A.exports=function(o){var s,p,c={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},h=[],d=[],B=[],Z=this.scroller,H=this.event,q=this;function R(K,ae,le){var b=ae,oe=le==1?"pos":"oppos";p<(c.minView||0)&&(b=void 0),I(s[K],this.origin.pos,""),I(s[K],this.origin.oppos,""),S(s[K],c.outside),b!==void 0&&(b+="px",I(s[K],this.origin[oe],b),E(s[K],c.outside))}function j(K){try{var ae=document.createEvent("WheelEvent");ae.initWebKitWheelEvent(K.originalEvent.wheelDeltaX,K.originalEvent.wheelDeltaY),Z.dispatchEvent(ae),K.preventDefault()}catch{}}function g(K){var ae;for(var le in K)c[le]=K[le];if(c.elements instanceof HTMLElement?s=[c.elements]:typeof c.elements=="string"?s=this.scroller.querySelectorAll(c.elements):c.elements&&c.elements[0]instanceof HTMLElement&&(s=c.elements),s){p=this.scroller[this.origin.client];for(var b=0;b<s.length;b++)ae={},ae[this.origin.size]=s[b][this.origin.offset]+"px",s[b].parentNode!==this.scroller&&I(s[b].parentNode,ae),ae={},ae[this.origin.crossSize]=s[b].parentNode[this.origin.crossClient]+"px",I(s[b],ae),p-=s[b][this.origin.offset],B[b]=s[b].parentNode[this.origin.offsetPos],h[b]=h[b-1]||0,d[b]=d[b-1]||Math.min(B[b],0),s[b-1]&&(h[b]+=s[b-1][this.origin.offset],d[b]+=s[b-1][this.origin.offset]),b==0&&B[b]==0||(this.event(s[b],"mousewheel",j,"off"),this.event(s[b],"mousewheel",j));c.limiter&&s[0]&&(this.track&&this.track!=this.scroller?(ae={},ae[this.origin.pos]=s[0].parentNode[this.origin.offset]+"px",I(this.track,ae)):this.barTopLimit=s[0].parentNode[this.origin.offset],this.scroll()),c.limiter===!1&&(this.barTopLimit=0)}var oe={element:s,handler:function(){for(var ue=this.parentNode,C=ue.offsetTop,ne,ee=0;ee<s.length;ee++)s[ee]===this&&(ne=ee);var W=C-h[ne];c.scroll?c.scroll({x1:q.scroller.scrollTop,x2:W}):q.scroller.scrollTop=W},type:"click"};if(c.clickable){this._eventHandlers.push(oe);for(var U=0;U<oe.element.length;U++)H(oe.element[U],oe.type,oe.handler,"on")}}this.on("init",g,o);var ie=[],pe=[];return this.on("init scroll",function(){var K,ae,le,b;if(s){var oe;for(b=0;b<s.length;b++)K=0,B[b]-this.pos()<d[b]+c.radius?(K=1,ae=h[b]):B[b]-this.pos()>d[b]+p-c.radius?(K=2,ae=this.scroller[this.origin.client]-s[b][this.origin.offset]-h[b]-p):(K=3,ae=void 0),le=!1,(B[b]-this.pos()<d[b]||B[b]-this.pos()>d[b]+p)&&(le=!0),(K!=ie[b]||le!=pe[b])&&(R.call(this,b,ae,K),ie[b]=K,pe[b]=le,oe=!0);if(oe)for(b=0;b<s.length;b++)ie[b]==1&&c.past&&(E(s[b],c.past),S(s[b],c.future)),ie[b]==2&&c.future&&(E(s[b],c.future),S(s[b],c.past)),ie[b]==3&&(S(s[b],c.past),S(s[b],c.future),E(s[b],c.inside)),ie[b]!=ie[b+1]&&ie[b]==1?(E(s[b],c.before),S(s[b],c.after)):ie[b]!=ie[b-1]&&ie[b]==2?(E(s[b],c.after),S(s[b],c.before)):(S(s[b],c.before),S(s[b],c.after)),c.grad&&(pe[b]?E(s[b],c.grad):S(s[b],c.grad))}}),this.on("resize upd",function(K){g.call(this,K&&K.fix)}),this}},37420:A=>{A.exports=function(i,z,I){var E=console[i]||console.log,S=["Baron: "+z,I];Function.prototype.apply.call(E,console,S)}},69079:A=>{"use strict";var w,i=!1;try{var z=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,z)}catch{}A.exports.f0=function(S,k,o,s){var p=k.split(" "),c=s=="on"?"add":"remove";p.forEach(function(h){var d=!1;["scroll","touchstart","touchmove"].indexOf(h)!=-1&&i&&(d={passive:!0}),S[c+"EventListener"](h,o,d)})};function I(E,S){for(var k in E)E.hasOwnProperty(k)&&S(k,E[k])}A.exports.AH=function(S,k,o){var s;if(o===void 0){if(typeof k=="string")return S.style[k];s=k}else s={},s[k]=o;I(s,function(p,c){S.style[p]=c})},A.exports.WQ=function(S,k){k&&S.classList.add(k)},A.exports.rm=function(S,k){k&&S.classList.remove(k)},A.exports.zy=function(S,k){return k?S.classList.contains(k):!1},A.exports.o8=function(S){var k={},o=S||{};return I(o,function(s,p){k[s]=p}),k},A.exports.qs=function(S,k){if(S instanceof HTMLElement)return S;var o=k||document;return o.querySelector(S)},w=I},4244:(A,w,i)=>{"use strict";i.d(w,{b:()=>k});var z=i(95344),I=i(76885),E=i(12131);const S={http:80,https:443,ftp:21};class k{constructor(){this.absUrl=this.wrapInDeprecationWarning(this.absUrl),this.hash=this.wrapInDeprecationWarning(this.hash),this.host=this.wrapInDeprecationWarning(this.host),this.path=this.wrapInDeprecationWarning(this.path),this.port=this.wrapInDeprecationWarning(this.port,"window.location"),this.protocol=this.wrapInDeprecationWarning(this.protocol,"window.location"),this.replace=this.wrapInDeprecationWarning(this.replace),this.search=this.wrapInDeprecationWarning(this.search),this.state=this.wrapInDeprecationWarning(this.state),this.url=this.wrapInDeprecationWarning(this.url)}wrapInDeprecationWarning(s,p){let c=this;return function(){return(0,z.l)("$location",s.name,p||"locationService"),s.apply(c,arguments)}}absUrl(){return`${window.location.origin}${this.url()}`}hash(s){if((0,E.Lc)("AngularLocationWrapper",!1,"Angular compat layer: hash"),s)throw new Error("AngularLocationWrapper method not implemented.");return E.Ny.getLocation().hash.slice(1)}host(){return new URL(window.location.href).hostname}path(s){(0,E.Lc)("AngularLocationWrapper",!1,"Angular compat layer: path");const p=E.Ny.getLocation();if(s!=null){let c=String(s);c=c.startsWith("/")?c:`/${c}`;const h=new URL(`${window.location.origin}${c}`);return E.Ny.push({pathname:h.pathname,search:h.search.length>0?h.search:p.search,hash:h.hash.length>0?h.hash:p.hash}),this}return s===null?(E.Ny.push("/"),this):p.pathname}port(){const s=new URL(window.location.href);return parseInt(s.port,10)||S[s.protocol]||null}protocol(){return new URL(window.location.href).protocol.slice(0,-1)}replace(){throw new Error("AngularLocationWrapper method not implemented.")}search(s,p){if((0,E.Lc)("AngularLocationWrapper",!1,"Angular compat layer: search"),!s)return E.Ny.getSearchObject();if(s&&arguments.length>1)return E.Ny.partial({[s]:p}),this;if(s){let c;typeof s=="object"?c={...s}:c=(0,E.SE)(s);for(const d of Object.keys(c))(c[d]===null||c[d]===void 0)&&delete c[d];const h=I.kM.renderUrl(E.Ny.getLocation().pathname,c);E.Ny.push(h)}return this}state(s){throw(0,E.Lc)("AngularLocationWrapper",!1,"Angular compat layer: state"),new Error("AngularLocationWrapper method not implemented.")}url(s){if((0,E.Lc)("AngularLocationWrapper",!1,"Angular compat layer: url"),s!==void 0)return s.startsWith("#")?E.Ny.push({...E.Ny.getLocation(),hash:s}):s.startsWith("?")?E.Ny.push({...E.Ny.getLocation(),search:s}):s.trim().length===0?E.Ny.push("/"):E.Ny.push(s),E.Ny;const p=E.Ny.getLocation();return`${p.pathname}${p.search}${p.hash}`}}},31133:(A,w,i)=>{"use strict";i.d(w,{AngularApp:()=>or});var z=i(92747),I=i.n(z),E=i(64423),S=i(26272),k=i(3591),o=i(67982),s=i(28444);const p=`
  <ng-transclude class="panel-height-helper"></ng-transclude>
`;o.m7.directive("grafanaPanel",["$timeout",r=>({restrict:"E",template:p,transclude:!0,scope:{ctrl:"="},link:(e,n)=>{const t=e.ctrl,a=e.ctrl.panel,l=new E.yU;let u;function m(){u&&u.update()}t.events.on(S.ee.componentDidMount,()=>{if(t.__proto__.constructor.scrollable){const v="baron baron__root baron__clipper panel-content--scrollable",L="baron__scroller",f=`
            <div class="baron__track">
              <div class="baron__bar"></div>
            </div>
          `,P=n,x=n.find(":first").find(":first");P.addClass(v),$(f).appendTo(P),x.addClass(L),u=I()({root:P[0],scroller:x[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling"}),u.scroll()}});function y(){t.height=e.$parent.$parent.size.height,t.width=e.$parent.$parent.size.width}y(),l.add(a.events.subscribe(k._,()=>{y(),t.events.emit("refresh")})),l.add(a.events.subscribe(s.XM,v=>{v.payload?.fromAngular||(y(),r(()=>{m(),t.events.emit("render")}))})),l.add(t.events.subscribe(s.XM,v=>{v.payload&&(v.payload.fromAngular=!0,a.events.publish(v))})),e.$on("$destroy",()=>{n.off(),l.unsubscribe(),t.events.emit(S.ee.panelTeardown),t.events.removeAllListeners(),u&&u.dispose()}),a.events.publish(s.vk)}})]);var c=i(59559),h=i(7025),d=i.n(h);const B=d().module("grafana.directives"),Z={};B.directive("panelEditorTab",["dynamicDirectiveSrv",H]);function H(r){return r.create({scope:{ctrl:"=",editorTab:"="},directive:e=>{const n=e.ctrl.pluginId,t=e.editorTab.title.toLowerCase().replace(" ","-").replace("&","").replace(" ","").replace(" ","-");if(Z[n]){if(Z[n][t])return Z[n][t]}else Z[n]=[];const a={fn:()=>e.editorTab.directiveFn(),name:`panel-editor-tab-${n}${t}`};return Z[n][t]=a,a}})}class q{constructor(){this.hasTextEditMode=!1}$onInit(){this.panelCtrl=this.queryCtrl.panelCtrl,this.target=this.queryCtrl.target,this.panel=this.panelCtrl.panel,this.hasTextEditMode&&this.queryCtrl.toggleEditorMode&&(this.panelCtrl.toggleEditorMode=this.queryCtrl.toggleEditorMode.bind(this.queryCtrl)),this.queryCtrl.getCollapsedText&&(this.panelCtrl.getCollapsedText=this.queryCtrl.getCollapsedText.bind(this.queryCtrl))}}o.m7.directive("queryEditorRow",R);function R(){return{restrict:"E",controller:q,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/angular/panel/partials/query_editor_row.html",transclude:!0,scope:{queryCtrl:"=",canCollapse:"=",hasTextEditMode:"="}}}var j=i(50410),g=i(2543),ie=i.n(g),pe=i(47232),K=i(87986);o.Ay.filter("stringSort",()=>r=>r.sort()),o.Ay.filter("slice",()=>(r,e,n)=>(0,g.isUndefined)(r)?r:r.slice(e,n)),o.Ay.filter("stringify",()=>r=>(0,g.isObject)(r)&&!(0,g.isArray)(r)?d().toJson(r):(0,g.isNull)(r)?null:r.toString()),o.Ay.filter("moment",()=>(r,e)=>{switch(e){case"ago":return(0,pe.KQ)(r).fromNow()}return(0,pe.KQ)(r).fromNow()});function ae(r=(0,K.w)()){const e=(n,t)=>{let a;return t.ctrl?a=(t.ctrl.panel||t.ctrl.row).scopedVars:a=t.row.scopedVars,r.replaceWithText(n,a)};return e.$stateful=!0,e}o.Ay.filter("interpolateTemplateVars",ae);const le={};class b{constructor(){}set(){console.warn("old deprecated alert srv being used")}}o.Ay.service("alertSrv",b);class oe{constructor(e){this.$compile=e}addDirective(e,n,t){const a=d().element(document.createElement(n));this.$compile(a)(t),e.empty(),e.append(a)}link(e,n,t,a){const l=a.directive(e);if(!l||!l.fn){n.empty();return}l.fn.registered||(o.Ay.directive(t.$normalize(l.name),l.fn),l.fn.registered=!0),this.addDirective(n,l.name,e)}create(e){return{restrict:"E",scope:e.scope,link:(t,a,l)=>{if(e.watchPath){let u=null;t.$watch(e.watchPath,()=>{u&&u.$destroy(),u=t.$new(),this.link(u,a,l,e)})}else this.link(t,a,l,e)}}}}oe.$inject=["$compile"],o.Ay.service("dynamicDirectiveSrv",oe);var U=i(96540),ue=i(5338);function C(r,e){if(d().isFunction(r))return r;if(!r)throw new Error("ReactComponent name attribute must be specified");let n;try{n=e.get(r)}catch{}if(!n)try{n=r.split(".").reduce((t,a)=>t[a],window)}catch{}if(!n)throw Error("Cannot find react component "+r);return n}function ne(r,e){if(r.wrappedInApply)return r;const n=function(){const t=arguments,a=e.$root.$$phase;return a==="$apply"||a==="$digest"?r.apply(null,t):e.$apply(()=>r.apply(null,t))};return n.wrappedInApply=!0,n}function ee(r,e,n){return Object.keys(r||{}).reduce((t,a)=>{const l=r[a],u=(n||{})[a]||{};return t[a]=d().isFunction(l)&&u.wrapApply!==!1?ne(l,e):l,t},{})}function W(r,e,n,t){const a=d().isFunction(e.$watchCollection),l=d().isFunction(e.$watchGroup),u=[];for(const m of n){const y=be(m),v=Ae(r,m);!y||y.match(/\(.*\)/)||v==="one-time"||(v==="collection"&&a?e.$watchCollection(y,t):v==="reference"&&l?u.push(y):e.$watch(y,t,v!=="reference"))}r==="one-time"&&t(),u.length&&e.$watchGroup(u,t)}function G(r,e,n,t){n.$evalAsync(()=>{t.render(U.createElement(r,e))})}function me(r){return Array.isArray(r)?r[0]:r}function de(r){return Array.isArray(r)?r[1]:{}}function be(r){return Array.isArray(r)?r[0]:r}function Ce(r,e){const n=Object.keys(r).find(t=>t.toLowerCase()===e.toLowerCase()||(0,g.kebabCase)(t)===(0,g.kebabCase)(e));return r[n]}function Ae(r,e){return Array.isArray(e)&&d().isObject(e[1])&&e[1].watchDepth||r}const O=r=>({restrict:"E",replace:!0,link:function(e,n,t){const a=C(t.name,r),l=(0,ue.H)(n[0]),u=()=>{const m=e.$eval(t.props),y=ee(m,e);G(a,y,e,l)};t.props?W(t.watchDepth,e,[t.props],u):u(),e.$on("$destroy",()=>{t.onScopeDestroy?e.$eval(t.onScopeDestroy,{unmountComponent:l.unmount.bind(this)}):l.unmount()})}}),F=r=>(e,n,t,a)=>{const l={restrict:"E",replace:!0,link:function(u,m,y){const v=C(e,r),L=(0,ue.H)(m[0]);n=n||Object.keys(v.propTypes||{});const f=()=>{let x={};const X={};n.forEach(he=>{const N=me(he);x[N]=u.$eval(Ce(y,N)),X[N]=de(he)}),x=ee(x,u,X),x=d().extend({},x,a),G(v,x,u,L)},P=n.map(x=>Array.isArray(x)?[Ce(y,x[0]),de(x)]:Ce(y,x));n.length?W(y.watchDepth,u,P,f):f(),u.$on("$destroy",()=>{y.onScopeDestroy?u.$eval(y.onScopeDestroy,{unmountComponent:L.unmount.bind(this)}):L.unmount()})}};return d().extend(l,t)},T=d().module("react",[]);T.directive("reactComponent",["$injector",O]),T.factory("reactDirective",["$injector",F]),o.Ay.service("uiSegmentSrv",["$sce","templateSrv",V]);function V(r,e){const n=this;class t{constructor(l){if(l==="*"||l.value==="*"){this.value="*",this.html=r.trustAsHtml('<i class="fa fa-asterisk"><i>'),this.type=l.type,this.expandable=!0;return}if((0,g.isString)(l)){this.value=l,this.html=r.trustAsHtml(e.highlightVariablesAsHtml(this.value));return}this.text=l.value,this.cssClass=l.cssClass,this.custom=l.custom,this.type=l.type,this.fake=l.fake,this.value=l.value,this.selectMode=l.selectMode,this.expandable=l.expandable,this.html=l.html||r.trustAsHtml(e.highlightVariablesAsHtml(this.value))}}this.getSegmentForValue=function(a,l){return a?this.newSegment(a):this.newSegment({value:l,fake:!0})},this.newSelectMeasurement=()=>new t({value:"select measurement",fake:!0}),this.newFake=(a,l,u)=>new t({value:a,fake:!0,type:l,cssClass:u}),this.newSegment=a=>new t(a),this.newKey=a=>new t({value:a,type:"key",cssClass:"query-segment-key"}),this.newKeyValue=a=>new t({value:a,type:"value",cssClass:"query-segment-value"}),this.newCondition=a=>new t({value:a,type:"condition",cssClass:"query-keyword"}),this.newOperator=a=>new t({value:a,type:"operator",cssClass:"query-segment-operator"}),this.newOperators=a=>(0,g.map)(a,l=>new t({value:l,type:"operator",cssClass:"query-segment-operator"})),this.transformToSegments=(a,l)=>u=>{const m=(0,g.map)(u,y=>n.newSegment({value:y.text,expandable:y.expandable}));return a&&(0,g.each)(e.getVariables(),y=>{(l===void 0||l===y.type)&&m.unshift(n.newSegment({type:"value",value:"$"+y.name,expandable:!0}))}),m},this.newSelectMetric=()=>new t({value:"select metric",fake:!0}),this.newPlusButton=()=>new t({fake:!0,html:'<i class="fa fa-plus "></i>',type:"plus-button",cssClass:"query-part"})}var Q=i(66899),te=i.n(Q);o.Ay.service("popoverSrv",["$compile","$rootScope","$timeout",Y]);function Y(r,e,n){let t=null;this.close=()=>{t&&t.close()},this.show=a=>{t&&(t.close(),t=null);const l=(0,g.extend)(e.$new(!0),a.model);let u;const m=()=>{setTimeout(()=>{l.$destroy(),u.tether&&u.destroy(),a.onClose&&a.onClose()}),t=null};l.dismiss=()=>{u.close()};const y=document.createElement("div");return y.innerHTML=a.template,r(y)(l),n(()=>{u=new(te())({target:a.element,content:y,position:a.position,classes:a.classNames||"drop-popover",openOn:a.openOn,hoverCloseDelay:200,tetherOptions:{constraints:[{to:"scrollParent",attachment:"together"}]}}),u.on("close",()=>{m()}),t=u,t.open()},100),()=>{u&&u.close()}}}class fe{constructor(e){this.$timeout=e,this.timers=[]}register(e){return this.timers.push(e),e}cancel(e){this.timers=(0,g.without)(this.timers,e),this.$timeout.cancel(e)}cancelAll(){(0,g.each)(this.timers,e=>{this.$timeout.cancel(e)}),this.timers=[]}}fe.$inject=["$timeout"],o.Ay.service("timer",fe);class M{constructor(e,n){this.$compile=e,this.$rootScope=n}load(e,n,t){const a=this.$rootScope.$new();(0,g.assign)(a,n);const l=this.$compile(t)(a);return d().element(e).append(l),{destroy:()=>{a.$destroy(),l.remove()},digest:()=>{a.$$phase||a.$digest()},getScope:()=>a}}}M.$inject=["$compile","$rootScope"],o.Ay.service("angularLoader",M);var se=i(34796),D=i.n(se);const xe=D()(window);D().fn.place_tt=(()=>{const r={offset:5};return function(e,n,t){return t=D().extend(!0,{},r,t),this.each(()=>{const a=D()(this);let l,u;a.addClass("grafana-tooltip"),D()("#tooltip").remove(),a.appendTo(document.body),t.compile&&d().element(document).injector().invoke(["$compile","$rootScope",(v,L)=>{const f=L.$new(!0);(0,g.extend)(f,t.scopeData),v(a)(f),f.$digest(),f.$destroy()}]),l=a.outerWidth(!0),u=a.outerHeight(!0);const m=e+t.offset+l>xe.width()?e-t.offset-l:e+t.offset,y=n+t.offset+u>xe.height()?n-t.offset-u:n+t.offset;a.css("left",m>0?m:0),a.css("top",y>0?y:0)})}})();function Se(r){const e='<input type="text" class="gf-form-input input-medium tight-form-input" spellcheck="false" style="display:none"></input>',n='<a class="gf-form-label tight-form-func dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>';return{scope:{menuItems:"=dropdownTypeahead",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel"},link:(t,a,l)=>{const u=D()(e),m=D()(n);u.appendTo(a),m.appendTo(a),l.linkText&&m.html(l.linkText),l.ngModel&&t.$watch("model",L=>{(0,g.each)(t.menuItems,f=>{(0,g.each)(f.submenu,P=>{P.value===L&&m.html(P.text)})})});const y=(0,g.reduce)(t.menuItems,(L,f,P)=>(f.submenu?(0,g.each)(f.submenu,(x,X)=>{x.click="menuItemSelected("+P+","+X+")",L.push(f.text+" "+x.text)}):(f.click="menuItemSelected("+P+")",L.push(f.text)),L),[]),v=()=>{u.hide(),u.val(""),m.show(),m.focus(),a.removeClass("open")};t.menuItemSelected=(L,f)=>{const P=t.menuItems[L],x={$item:P};P.submenu&&f!==void 0&&(x.$subItem=P.submenu[f]),t.dropdownTypeaheadOnSelect(x),v()},u.attr("data-provide","typeahead"),u.typeahead({source:y,minLength:1,items:10,updater:L=>{const f={};return(0,g.each)(t.menuItems,P=>{(0,g.each)(P.submenu,x=>{L===P.text+" "+x.text&&(f.$subItem=x,f.$item=P)})}),f.$item&&t.$apply(()=>{t.dropdownTypeaheadOnSelect(f)}),u.trigger("blur"),""}}),m.click(()=>{m.hide(),u.show(),u.focus()}),u.keyup(()=>{a.toggleClass("open",u.val()==="")}),a.mousedown(L=>{L.preventDefault()}),u.blur(()=>{u.hide(),u.val(""),m.show(),m.focus(),setTimeout(()=>{a.removeClass("open")},200)}),r(a.contents())(t)}}}function ge(r){const e='<input type="text" class="gf-form-input" spellcheck="false" style="display:none"></input>',n='<a class="{{buttonTemplateClass}} dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>';return{scope:{menuItems:"=dropdownTypeahead2",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel",buttonTemplateClass:"@"},link:(t,a,l)=>{const u=D()(e);t.buttonTemplateClass||(t.buttonTemplateClass="gf-form-input");const m=D()(n),y={blur:null};u.appendTo(a),m.appendTo(a),l.linkText&&m.html(l.linkText),l.ngModel&&t.$watch("model",f=>{(0,g.each)(t.menuItems,P=>{(0,g.each)(P.submenu,x=>{x.value===f&&m.html(x.text)})})});const v=(0,g.reduce)(t.menuItems,(f,P,x)=>(P.submenu?(0,g.each)(P.submenu,(X,he)=>{X.click="menuItemSelected("+x+","+he+")",f.push(P.text+" "+X.text)}):(P.click="menuItemSelected("+x+")",f.push(P.text)),f),[]),L=()=>{u.hide(),u.val(""),m.show(),m.focus(),a.removeClass("open")};t.menuItemSelected=(f,P)=>{const x=t.menuItems[f],X={$item:x};x.submenu&&P!==void 0&&(X.$subItem=x.submenu[P]),t.dropdownTypeaheadOnSelect(X),L()},u.attr("data-provide","typeahead"),u.typeahead({source:v,minLength:1,items:10,updater:f=>{const P={};return(0,g.each)(t.menuItems,x=>{(0,g.each)(x.submenu,X=>{f===x.text+" "+X.text&&(P.$subItem=X,P.$item=x)})}),P.$item&&t.$apply(()=>{t.dropdownTypeaheadOnSelect(P)}),u.trigger("blur"),""}}),m.click(()=>{m.hide(),u.show(),u.focus()}),u.keyup(()=>{a.toggleClass("open",u.val()==="")}),a.mousedown(f=>{f.preventDefault(),y.blur=null}),u.blur(()=>{y.blur=setTimeout(()=>{L()},1)}),r(a.contents())(t)}}}o.Ay.directive("dropdownTypeahead",["$compile",Se]),o.Ay.directive("dropdownTypeahead2",["$compile",ge]);function Ne(r){return{link:(e,n)=>{const t=n[0],a=()=>{const u=new Event("change");return t.dispatchEvent(u)},l=({animationName:u})=>{switch(u){case"onAutoFillStart":return a();case"onAutoFillCancel":return a()}return null};t.addEventListener("animationstart",l),e.$on("$destroy",()=>{t.removeEventListener("animationstart",l)})}}}o.Ay.directive("autofillEventFix",["$compile",Ne]);function Me(r,e,n){const t='<input type="text" data-provide="typeahead"  class="gf-form-input input-medium" spellcheck="false" style="display:none"></input>',a='<a class="gf-form-label" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>',l='<a class="gf-form-input gf-form-input--dropdown" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>';return{scope:{segment:"=",getOptions:"&",onChange:"&",debounce:"@"},link:(u,m)=>{const y=D()(t),v=u.segment,L=D()(v.selectMode?l:a);let f=null,P=null,x=!0;const X=u.debounce;y.appendTo(m),L.appendTo(m),u.updateVariableValue=N=>{N===""||v.value===N||u.$apply(()=>{const _=(0,g.find)(u.altSegments,{value:N});_?(v.value=_.value,v.html=_.html||e.trustAsHtml(n.highlightVariablesAsHtml(_.value)),v.fake=!1,v.expandable=_.expandable,_.type&&(v.type=_.type)):v.custom!=="false"&&(v.value=N,v.html=e.trustAsHtml(n.highlightVariablesAsHtml(N)),v.expandable=!0,v.fake=!1),u.onChange()})},u.switchToLink=N=>{x&&!N||(clearTimeout(P),P=null,x=!0,y.hide(),L.show(),u.updateVariableValue(y.val()))},u.inputBlur=()=>{P=setTimeout(u.switchToLink,200)},u.source=(N,_)=>{u.$apply(()=>{u.getOptions({$query:N}).then(J=>{u.altSegments=J,f=(0,g.map)(u.altSegments,re=>(0,g.escape)(re.value)),v.custom!=="false"&&!v.fake&&(0,g.indexOf)(f,v.value)===-1&&f.unshift((0,g.escape)(v.value)),_(f)})})},u.updater=N=>(N=(0,g.unescape)(N),N===v.value?(clearTimeout(P),y.focus(),N):(y.val(N),u.switchToLink(!0),N)),u.matcher=function(N){if(x)return!1;let _=this.query;_[0]==="/"&&(_=_.substring(1)),_[_.length-1]==="/"&&(_=_.substring(0,_.length-1));try{return N.toLowerCase().match(_.toLowerCase())}catch{return!1}},y.attr("data-provide","typeahead"),y.typeahead({source:u.source,minLength:0,items:1e4,updater:u.updater,matcher:u.matcher});const he=y.data("typeahead");he.lookup=function(){this.query=this.$element.val()||"";const N=this.source(this.query,D().proxy(this.process,this));return N&&this.process(N)},X&&(he.lookup=(0,g.debounce)(he.lookup,500,{leading:!0})),L.keydown(N=>{(N.keyCode===40||N.keyCode===13)&&L.click()}),L.click(()=>{f=null,y.css("width",Math.max(L.width(),80)+16+"px"),L.hide(),y.show(),y.focus(),x=!1;const N=y.data("typeahead");N&&(y.val(""),N.lookup())}),y.blur(u.inputBlur),r(m.contents())(u)}}}function De(r){return{template:'<metric-segment segment="segment" get-options="getOptionsInternal()" on-change="onSegmentChange()"></metric-segment>',restrict:"E",scope:{property:"=",options:"=",getOptions:"&",onChange:"&"},link:{pre:function(n,t,a){let l;n.valueToSegment=u=>{const m=(0,g.find)(n.options,{value:u}),y={cssClass:a.cssClass,custom:a.custom,value:m?m.text:u,selectMode:a.selectMode};return r.newSegment(y)},n.getOptionsInternal=()=>n.options?(l=n.options,Promise.resolve((0,g.map)(n.options,u=>({value:u.text})))):n.getOptions().then(u=>(l=u,(0,g.map)(u,m=>m.html?m:{value:m.text}))),n.onSegmentChange=()=>{if(l){const u=(0,g.find)(l,{text:n.segment.value});u&&u.value!==n.property?n.property=u.value:a.custom!=="false"&&(n.property=n.segment.value)}else n.property=n.segment.value;n.$$postDigest(()=>{n.$apply(()=>{n.onChange()})})},n.segment=n.valueToSegment(n.property)}}}}o.Ay.directive("metricSegment",["$compile","$sce","templateSrv",Me]),o.Ay.directive("metricSegmentModel",["uiSegmentSrv",De]),o.Ay.directive("tip",["$compile",Fe]);function Fe(r){return{restrict:"E",link:(e,n,t)=>{let a='<i class="grafana-tip fa fa-'+(t.icon||"question-circle")+`" bs-tooltip="'`+n.text().replace(/[\'\"\\{}<>&]/g,l=>"&amp;#"+l.charCodeAt(0)+";")+`'"></i>`;n.replaceWith(r(d().element(a))(e))}}}o.Ay.directive("compile",["$compile",Ue]);function Ue(r){return{restrict:"A",link:(e,n,t)=>{e.$watch(a=>a.$eval(t.compile),a=>{n.html(a),r(n.contents())(e)})}}}o.Ay.directive("watchChange",ze);function ze(){return{scope:{onchange:"&watchChange"},link:(r,e)=>{e.on("input",()=>{r.$apply(()=>{r.onchange({inputValue:e.val()})})})}}}o.Ay.directive("editorOptBool",["$compile",tt]);function tt(r){return{restrict:"E",link:(e,n,t)=>{const a=t.change?' ng-change="'+t.change+'"':"",l=t.tip?" <tip>"+t.tip+"</tip>":"",m='<div class="editor-option gf-form-checkbox text-center"'+(t.showIf?' ng-show="'+t.showIf+'" ':"")+'> <label for="'+t.model+'" class="small">'+t.text+l+'</label><input class="cr1" id="'+t.model+'" type="checkbox"        ng-model="'+t.model+'"'+a+'       ng-checked="'+t.model+'"></input> <label for="'+t.model+'" class="cr1"></label>';n.replaceWith(r(d().element(m))(e))}}}o.Ay.directive("editorCheckbox",["$compile, $interpolate",nt]);function nt(r,e){return{restrict:"E",link:(n,t,a)=>{const l=e(a.text)(n),u=e(a.model)(n),m=a.change?' ng-change="'+a.change+'"':"",y=a.tip?" <tip>"+a.tip+"</tip>":"",v='<label for="'+n.$id+u+'" class="checkbox-label">'+l+y+"</label>";let L='<input class="cr1" id="'+n.$id+u+'" type="checkbox"        ng-model="'+u+'"'+m+'       ng-checked="'+u+'"></input> <label for="'+n.$id+u+'" class="cr1"></label>';L=L+v,t.addClass("gf-form-checkbox"),t.html(r(d().element(L))(n))}}}o.Ay.directive("gfDropdown",["$parse","$compile","$timeout",rt]);function rt(r,e,n){function t(a,l){const m=['<ul class="dropdown-menu '+(l==="top"?"dropup":"")+'" role="menu" aria-labelledby="drop1">',"</ul>"];for(let y=0;y<a.length;y++){const v=a[y];if(v.divider){m.splice(y+1,0,'<li class="divider"></li>');continue}let L="<li"+(v.submenu&&v.submenu.length?' class="dropdown-submenu"':"")+'><a tabindex="-1" ng-href="'+(v.href||"")+'"'+(v.click?' ng-click="'+v.click+'"':"")+(v.target?' target="'+v.target+'"':"")+(v.method?' data-method="'+v.method+'"':"")+">"+(v.text||"")+"</a>";v.submenu&&v.submenu.length&&(L+=t(v.submenu).join(`
`)),L+="</li>",m.splice(y+1,0,L)}return m}return{restrict:"EA",scope:!0,link:function(l,u,m){const y=r(m.gfDropdown),v=y(l);n(()=>{const L=u.data("placement");d().element(t(v,L).join("")).insertAfter(u),e(u.next("ul.dropdown-menu"))(l)}),u.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}o.Ay.directive("bsTooltip",["$parse","$compile",function(r,e){return{restrict:"A",scope:!0,link:function(t,a,l){let u=r(l.bsTooltip),m=u(t);t.$watch(l.bsTooltip,function(v,L){v!==L&&(m=v)}),a.on("show",function(v){D()(".tooltip.in").each(function(){const L=D()(this),f=L.data("tooltip");f&&!f.$element.is(a)&&L.tooltip("hide")})}),a.tooltip({title:function(){return d().isFunction(m)?m.apply(null,arguments):m},html:!0,container:"body"});const y=a.data("tooltip");y.show=function(){const v=D().fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),v},t._tooltip=function(v){a.tooltip(v)},t.hide=function(){a.tooltip("hide")},t.show=function(){a.tooltip("show")},t.dismiss=t.hide}}}]),o.Ay.directive("bsTypeahead",["$parse",function(r){return{restrict:"A",require:"?ngModel",link:function(n,t,a,l){let u=r(a.bsTypeahead),m=u(n);n.$watch(a.bsTypeahead,function(v,L){v!==L&&(m=v)}),t.attr("data-provide","typeahead"),t.typeahead({source:function(){return d().isFunction(m)?m.apply(null,arguments):m},minLength:a.minLength||1,items:a.item,updater:function(v){return l&&n.$apply(function(){l.$setViewValue(v)}),n.$emit("typeahead-updated",v),v}});const y=t.data("typeahead");y.lookup=function(){let v;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(v=(0,g.isFunction)(this.source)?this.source(this.query,D().proxy(this.process,this)):this.source,v?this.process(v):this)},a.matchAll&&(y.matcher=function(){return!0}),a.minLength==="0"&&setTimeout(function(){t.on("focus",function(){t.val().length===0&&setTimeout(t.typeahead.bind(t,"lookup"),200)})})}}}]);var it=i(65879);function at(){return{restrict:"A",priority:1,require:"ngModel",link:(r,e,n,t)=>{n.type==="radio"||n.type==="checkbox"||(e.off("input keydown change"),e.bind("blur",()=>{r.$apply(()=>{t.$setViewValue(e.val())})}))}}}function ot(){return{restrict:"A",require:"ngModel",link:(r,e,n,t)=>{t.$parsers.push(a=>a===""?null:a)}}}function st(){return{require:"ngModel",link:(r,e,n,t)=>{t.$validators.integer=(a,l)=>t.$isEmpty(a)||l.indexOf("$")===0||l.indexOf("+$")===0?!0:it.describeTextRange(l).invalid!==!0}}}o.Ay.directive("ngModelOnblur",at),o.Ay.directive("emptyToNull",ot),o.Ay.directive("validTimeSpan",st);var lt=i(69613),lr=i(42346);function je(r,e){const{color:n,borderColor:t}=(0,lt.MC)(r);e.css("background-color",n),e.css("border-color",t)}function ct(){return{scope:{tagColorFromName:"="},link:(r,e)=>{je(r.tagColorFromName,e)}}}function ut(){function r(e,n){if(n)return d().isFunction(e.$parent[n])?e.$parent[n]:t=>t[n]}return{restrict:"EA",scope:{model:"=ngModel",onTagsUpdated:"&"},template:"<select multiple></select>",replace:!1,link:function(e,n,t){d().isArray(e.model)||(e.model=[]);const a=D()("select",n);t.placeholder&&a.attr("placeholder",t.placeholder),a.tagsinput({typeahead:{source:d().isFunction(e.$parent[t.typeaheadSource])?e.$parent[t.typeaheadSource]:null},widthClass:t.widthClass,itemValue:r(e,t.itemvalue),itemText:r(e,t.itemtext),tagClass:d().isFunction(e.$parent[t.tagclass])?e.$parent[t.tagclass]:()=>t.tagclass}),a.on("itemAdded",l=>{e.model.indexOf(l.item)===-1&&(e.model.push(l.item),e.onTagsUpdated&&e.onTagsUpdated());const u=a.next().children("span").filter(()=>D()(this).text()===l.item);je(l.item,u)}),a.on("itemRemoved",l=>{const u=e.model.indexOf(l.item);u!==-1&&(e.model.splice(u,1),e.onTagsUpdated&&e.onTagsUpdated())}),e.$watch("model",()=>{d().isArray(e.model)||(e.model=[]),a.tagsinput("removeAll");for(let l=0;l<e.model.length;l++)a.tagsinput("add",e.model[l])},!0)}}}o.Ay.directive("tagColorFromName",ct),o.Ay.directive("bootstrapTagsinput",ut);function ht(r){let e=r[0];const n=r[r.length-1];let t;e=e.nextSibling;for(let a=1;e!==n&&e;a++)(t||r[a]!==e)&&(t||(t=D()([].slice.call(r,0,a))),t.push(e)),e=e.nextSibling;return t||r}o.Ay.directive("rebuildOnChange",["$animate",dt]);function dt(r){return{multiElement:!0,terminal:!0,transclude:!0,priority:600,restrict:"E",link:(e,n,t,a,l)=>{let u,m,y;function v(){y&&(y.remove(),y=null),m&&(m.$destroy(),m=null),u&&(y=ht(u.clone),r.leave(y).then(()=>{y=null}),u=null)}e.$watch(t.property,function(f,P){m&&f!==P&&v(),!m&&(f||t.showNull)?l((x,X)=>{m=X,x[x.length++]=document.createComment(" end rebuild on change "),u={clone:x},r.enter(x,n.parent(),n)}):v()})}}}o.Ay.directive("giveFocus",()=>(r,e,n)=>{e.click(t=>{t.stopPropagation()}),r.$watch(n.giveFocus,t=>{t&&setTimeout(()=>{e.focus();const a=e[0];if(a.setSelectionRange){const l=e.val().length*2;a.setSelectionRange(l,l)}},200)},!0)});const cr={};class pt{constructor(){const e=()=>{};this.observer=new MutationObserver(e);const n={attributes:!0,attributeFilter:["class"],characterData:!1,childList:!0,subtree:!1};this.observer.observe(d().element(".delta-html")[0],n)}$onDestroy(){this.observer.disconnect()}}function ft(){return{controller:pt,replace:!1,restrict:"A"}}o.Ay.directive("diffDelta",ft);class Qe{constructor(e,n,t){this.$scope=e,this.$rootScope=n,this.$anchorScroll=t}goToLine(e){let n;const t=()=>{this.$anchorScroll(`l${e}`),n()};this.$scope.switchView().then(()=>{n=this.$rootScope.$on("json-diff-ready",t.bind(this))})}}Qe.$inject=["$scope","$rootScope","$anchorScroll"];function mt(){return{controller:Qe,controllerAs:"ctrl",replace:!0,restrict:"E",scope:{line:"@lineDisplay",link:"@lineLink",switchView:"&"},template:'<a class="diff-linenum btn btn-inverse btn-small" ng-click="ctrl.goToLine(link)">Line {{ line }}</a>'}}o.Ay.directive("diffLinkJson",mt);function gt(){"use strict";return{restrict:"A",require:"ngModel",link:(r,e,n,t)=>{function a(u){return(u||"").split(",")}function l(u){return(0,g.isArray)(u)?(u||"").join(","):u}t.$parsers.push(a),t.$formatters.push(l)}}}o.Ay.directive("arrayJoin",gt);var vt=i(94333),Le=i(14578),yt=i(62930),bt=i(83598),Ct=i(70104),Et=i(2056),wt=i(33083),At=i(64919),xt=i(91409),Tt=i(10534),St=i(32264),Dt=i(96378);function ve(r,e,n){o.Ay.directive(r,["reactDirective",t=>t((0,Dt.e)(e,St.$.theme2),n)])}var $t=i(85242),Pt=i(75590),Mt=i(38054),kt=i(7521),Lt=i(38645),$e=i(32196),Ot=i(63021),It=i(40675),Ke=i(40845),Ge=i(8984),Xe=i(13544);const Rt=r=>{const[e,n]=(0,U.useState)(null),t=r.type==="submenu",a=(0,Ke.of)(Ft),l=r.iconClassName?(0,Ge.toIconName)(r.iconClassName):void 0;switch(r.type){case"divider":return U.createElement("li",{className:"divider"});case"group":return U.createElement("li",null,U.createElement("span",{className:a.groupLabel},r.text));default:return U.createElement("li",{className:t?`dropdown-submenu ${Nt(e)}`:void 0,ref:n,"data-testid":Xe.Tp.components.Panels.Panel.menuItems(r.text)},U.createElement("a",{onClick:r.onClick,href:r.href,role:"menuitem"},l&&U.createElement(Le.I,{name:l,className:a.menuIconClassName}),U.createElement("span",{className:"dropdown-item-text","data-testid":Xe.Tp.components.Panels.Panel.headerItems(r.text)},r.text,t&&U.createElement(Le.I,{name:"angle-right",className:a.shortcutIconClassName})),r.shortcut&&U.createElement("span",{className:"dropdown-menu-item-shortcut"},U.createElement(Le.I,{name:"keyboard",className:a.menuIconClassName})," ",r.shortcut)),r.children)}};function Nt(r){if(!r)return"invisible";const e=r.parentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return n.width===0?"invisible":e.right+n.width+10>window.innerWidth?"pull-left":"pull-right"}function Ft(r){return{menuIconClassName:(0,$e.css)({marginRight:r.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,$e.css)({position:"absolute",top:"7px",right:r.spacing(.5),color:r.colors.text.secondary}),groupLabel:(0,$e.css)({color:r.colors.text.secondary,fontSize:r.typography.size.sm,padding:r.spacing(.5,1)})}}var Ut=i(13773),zt=i(76323);const Wt=({children:r,customCss:e})=>{if(!r||r.length===0)return null;const n=r.find(t=>t.active===!0);return U.createElement("div",{className:`gf-form-select-wrapper width-20 ${e}`},U.createElement("div",{className:"dropdown"},U.createElement("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"}},n?.text),U.createElement("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu"},r.map(t=>t.hideFromTabs?null:U.createElement(Rt,{key:t.url,iconClassName:t.icon,text:t.text,href:t.url})))))},Bt=({children:r})=>!r||r.length===0?null:U.createElement("nav",null,U.createElement(Wt,{customCss:"page-header__select-nav"},r),U.createElement(Ot.U,{className:"page-header__tabs",hideBorder:!0},r.map((e,n)=>!e.hideFromTabs&&U.createElement(It.o,{label:e.text,active:e.active,key:`${e.url}-${n}`,icon:e.icon,href:e.url,suffix:e.tabSuffix})))),Vt=({navItem:r,renderTitle:e,actions:n,info:t,subTitle:a})=>{const l=(0,Ke.of)(jt);if(!r)return null;const u=m=>{const y=m.icon==="grafana"?12:14,v=m.icon&&(0,Ge.toIconName)(m.icon),L=a??m.subTitle;return U.createElement("div",{className:"page-header__inner"},U.createElement("span",{className:"page-header__logo"},v&&U.createElement(Le.I,{name:v,size:"xxxl",style:{marginTop:y}}),m.img&&U.createElement("img",{className:"page-header__img",src:m.img,alt:""})),U.createElement("div",{className:(0,$e.cx)("page-header__info-block",l.headerText)},e?e(m.text):Ht(m.text,m.highlightText),t&&U.createElement(Ut.Q,{info:t}),L&&U.createElement("div",{className:"page-header__sub-title"},L),n&&U.createElement("div",{className:l.actions},n)))};return U.createElement("div",{className:l.headerCanvas},U.createElement("div",{className:"page-container"},U.createElement("div",{className:"page-header"},u(r),r.children&&r.children.length>0&&U.createElement(Bt,null,r.children))))};function Ht(r,e){return r?U.createElement("h1",{className:"page-header__title"},r,e&&U.createElement(zt.J,{text:e,className:(0,$e.css)`
            vertical-align: middle;
          `})):null}const jt=r=>({actions:(0,$e.css)({display:"flex",flexDirection:"row",gap:r.spacing(1)}),headerText:(0,$e.css)({display:"flex",flexDirection:"column",gap:r.spacing(1)}),headerCanvas:(0,$e.css)`
    background: ${r.colors.background.canvas};
  `});var Qt=i(88323);const Kt=r=>{const{value:e,placeholder:n,className:t,isSearchable:a,onChange:l}=r,u=Gt(r),m=Xt(u,e),y=(0,U.useCallback)(v=>l(v.value),[l]);return U.createElement(Qt.l6,{className:t,isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:y,options:u,isSearchable:a,maxMenuHeight:500,placeholder:n,noOptionsMessage:"No options found",value:m})},Gt=({variables:r=[],options:e})=>(0,U.useMemo)(()=>!Array.isArray(r)||r.length===0?e:[{label:"Template Variables",options:r.map(({name:n})=>({label:`$${n}`,value:`$${n}`}))},...e],[r,e]),Xt=(r,e)=>(0,U.useMemo)(()=>(r.every(t=>t.options)?(0,g.flatten)(r.map(t=>t.options)):r).find(t=>t.value===e),[r,e]);var Jt=i(99818),Yt=i(93522);const{SecretFormField:Zt}=vt.LegacyForms;function qt(){ve("footer",Lt.wi,[]),ve("icon",Le.I,["name","size","type",["onClick",{watchDepth:"reference",wrapApply:!0}]]),ve("spinner",yt.y,["inline"]),ve("helpModal",Yt.N,[]),ve("pageHeader",Vt,["model","noTabs"]),ve("emptyListCta",kt.A,["title","buttonIcon","buttonLink","buttonTitle",["onClick",{watchDepth:"reference",wrapApply:!0}],"proTip","proTipLink","proTipLinkTitle","proTipTarget","infoBox","infoBoxTitle"]),ve("tagFilter",Jt.$,["tags",["onChange",{watchDepth:"reference"}],["tagOptions",{watchDepth:"reference"}]]),ve("colorPicker",bt.sk,["color",["onChange",{watchDepth:"reference",wrapApply:!0}]]),ve("seriesColorPickerPopover",Ct.t,["color","series","onColorChange","onToggleAxis"]),ve("unitPicker",Et.p,["value","width",["onChange",{watchDepth:"reference",wrapApply:!0}]]),ve("metricSelect",Kt,["options","onChange","value","isSearchable","className","placeholder",["variables",{watchDepth:"reference"}]]),ve("cloudMonitoringQueryEditor",Mt.w,["target","onQueryChange","onExecuteQuery",["events",{watchDepth:"reference"}],["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),ve("secretFormField",Zt,["value","isConfigured","inputWidth","labelWidth","aria-label",["onReset",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),ve("graphContextMenu",wt.H,["x","y","itemsGroup",["onClose",{watchDepth:"reference",wrapApply:!0}],["getContextMenuSource",{watchDepth:"reference",wrapApply:!0}],["timeZone",{watchDepth:"reference",wrapApply:!0}]]),ve("drilldownLinksEditor",At.e,["value","links","suggestions",["onChange",{watchDepth:"reference",wrapApply:!0}]]),ve("datasourceHttpSettingsNext",xt.t,["defaultUrl","showAccessOptions","dataSourceConfig","showForwardOAuthIdentityOption",["onChange",{watchDepth:"reference",wrapApply:!0}]]),ve("folderPicker",$t.sR,["labelClass","rootName","enableCreateNew","enableReset","initialTitle","initialFolderId","dashboardId","onCreateFolder",["enterFolderCreation",{watchDepth:"reference",wrapApply:!0}],["exitFolderCreation",{watchDepth:"reference",wrapApply:!0}],["onLoad",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),ve("timePickerSettings",Pt.p,["renderCount","refreshIntervals","timePickerHidden","nowDelay","timezone",["onTimeZoneChange",{watchDepth:"reference",wrapApply:!0}],["onRefreshIntervalChange",{watchDepth:"reference",wrapApply:!0}],["onNowDelayChange",{watchDepth:"reference",wrapApply:!0}],["onHideTimePickerChange",{watchDepth:"reference",wrapApply:!0}]]),ve("clipboardButton",Tt.b,[["getText",{watchDepth:"reference",wrapApply:!0}]])}var We=i(8678);const _t=`
<div class="dropdown cascade-open">
<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.def.type}}</a>
<span>(</span><span class="query-part-parameters"></span><span>)</span>
<ul class="dropdown-menu">
  <li ng-repeat="action in partActions">
    <a ng-click="triggerPartAction(action)">{{action.text}}</a>
  </li>
</ul>
`;o.Ay.directive("queryPartEditor",["templateSrv",en]);function en(r){const e='<input type="text" class="hide input-mini tight-form-func-param"></input>';return{restrict:"E",template:_t,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(t,a){const l=t.part,u=l.def,m=a.find(".query-part-parameters"),y=t.debounce;t.partActions=[];function v(N){const _=D()(this),J=_.next();J.val(l.params[N]),J.css("width",_.width()+16+"px"),_.hide(),J.show(),J.focus(),J.select();const re=J.data("typeahead");re&&(J.val(""),re.lookup())}function L(N){const _=D()(this),J=_.prev(),re=_.val();(re!==""||l.def.params[N].optional)&&(J.html(r.highlightVariablesAsHtml(re)),l.updateParam(_.val(),N),t.$apply(()=>{t.handleEvent({$event:{name:"part-param-changed"}})})),_.hide(),J.show()}function f(N,_){_.which===13&&L.call(this,N)}function P(){this.style.width=(3+this.value.length)*8+"px"}function x(N,_,J){if(!_.options&&!_.dynamicLookup)return;const re=(ye,we)=>{if(_.options){let Ee=_.options;return _.type==="int"&&(Ee=(0,g.map)(Ee,Ie=>Ie.toString())),Ee}t.$apply(()=>{t.handleEvent({$event:{name:"get-param-options"}}).then(Ee=>{const Ie=(0,g.map)(Ee,Pe=>(0,g.escape)(Pe.value));we(Ie)})})};N.attr("data-provide","typeahead"),N.typeahead({source:re,minLength:0,items:1e3,updater:ye=>(ye=(0,g.unescape)(ye),setTimeout(()=>{L.call(N[0],J)},0),ye)});const ce=N.data("typeahead");ce.lookup=function(){this.query=this.$element.val()||"";const ye=this.source(this.query,D().proxy(this.process,this));return ye&&this.process(ye)},y&&(ce.lookup=(0,g.debounce)(ce.lookup,500,{leading:!0}))}t.showActionsMenu=()=>{(0,We.F)(t)(t.handleEvent({$event:{name:"get-part-actions"}}).then(N=>{t.partActions=N}))},t.triggerPartAction=N=>{t.handleEvent({$event:{name:"action",action:N}})};function X(){(0,g.each)(u.params,(N,_)=>{if(N.optional&&l.params.length<=_)return;_>0&&D()("<span>, </span>").appendTo(m);const J=r.highlightVariablesAsHtml(l.params[_]),re=D()('<a class="graphite-func-param-link pointer">'+J+"</a>"),ce=D()(e);re.appendTo(m),ce.appendTo(m),ce.blur((0,g.partial)(L,_)),ce.keyup(P),ce.keypress((0,g.partial)(f,_)),re.click((0,g.partial)(v,_)),x(ce,N,_)})}function he(){m.empty(),X()}he()}}}function tn(r){let e=this.query;return e===""?!0:(e[0]==="/"&&(e=e.substring(1)),e[e.length-1]==="/"&&(e=e.substring(0,e.length-1)),r.toLowerCase().match(e.toLowerCase()))}class Je{constructor(e,n,t,a){this.$scope=e,this.$sce=t,this.templateSrv=a,this.inputElement=n.find("input").first(),this.linkElement=n.find("a").first(),this.linkMode=!0,this.cancelBlur=null,this.labelMode=!1,this.lookupText=!1,this.debounce=!1,e.$watch("ctrl.model",this.modelChanged.bind(this))}$onInit(){this.labelMode?this.cssClasses="gf-form-label "+this.cssClass:this.cssClasses="gf-form-input gf-form-input--dropdown "+this.cssClass,this.placeholder&&this.inputElement.attr("placeholder",this.placeholder),this.inputElement.attr("data-provide","typeahead"),this.inputElement.typeahead({source:this.typeaheadSource.bind(this),minLength:0,items:1e4,updater:this.typeaheadUpdater.bind(this),matcher:tn});const e=this.inputElement.data("typeahead");e.lookup=function(){this.query=this.$element.val()||"",this.source(this.query,this.process.bind(this))},this.debounce&&(e.lookup=(0,g.debounce)(e.lookup,500,{leading:!0})),this.linkElement.keydown(n=>{(n.keyCode===40||n.keyCode===13)&&this.linkElement.click()}),this.inputElement.keydown(n=>{n.keyCode===13&&setTimeout(()=>{this.inputElement.blur()},300)}),this.inputElement.blur(this.inputBlur.bind(this)),this.startOpen&&setTimeout(this.open.bind(this),0)}getOptionsInternal(e){return(0,We.F)(this.$scope)(Promise.resolve(this.getOptions({$query:e})))}isPromiseLike(e){return e&&typeof e.then=="function"}modelChanged(){(0,g.isObject)(this.model)?this.updateDisplay(this.model.text):this.lookupText?this.getOptionsInternal("").then(e=>{const n=(0,g.find)(e,{value:this.model});this.updateDisplay(n?n.text:this.model)}):this.updateDisplay(this.model)}typeaheadSource(e,n){this.getOptionsInternal(e).then(t=>{this.optionCache=t;const a=(0,g.map)(t,l=>(0,g.escape)(l.text));this.allowCustom&&this.text!==""&&(0,g.indexOf)(a,this.text)===-1&&a.unshift(this.text),n(a)})}typeaheadUpdater(e){return e===this.text?(clearTimeout(this.cancelBlur),this.inputElement.focus(),e):(this.inputElement.val(e),this.switchToLink(!0),e)}switchToLink(e){this.linkMode&&!e||(clearTimeout(this.cancelBlur),this.cancelBlur=null,this.linkMode=!0,this.inputElement.hide(),this.linkElement.show(),this.updateValue(this.inputElement.val()))}inputBlur(){this.cancelBlur=setTimeout(this.switchToLink.bind(this),200)}updateValue(e){e=(0,g.unescape)(e),!(e===""||this.text===e)&&this.$scope.$apply(()=>{const n=(0,g.find)(this.optionCache,{text:e});n?((0,g.isObject)(this.model)?this.model=n:this.model=n.value,this.text=n.text):this.allowCustom&&((0,g.isObject)(this.model)?this.model.text=this.model.value=e:this.model=e,this.text=e),this.$scope.$$postDigest(()=>{this.$scope.$apply(()=>{this.onChange({$option:n})})})})}updateDisplay(e){this.text=e,this.display=this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(e))}open(){this.inputElement.css("width",Math.max(this.linkElement.width(),80)+16+"px"),this.inputElement.show(),this.inputElement.focus(),this.linkElement.hide(),this.linkMode=!1;const e=this.inputElement.data("typeahead");e&&(this.inputElement.val(""),e.lookup())}}Je.$inject=["$scope","$element","$sce","templateSrv"];const nn=`
<input type="text"
  data-provide="typeahead"
  class="gf-form-input"
  spellcheck="false"
  style="display:none">
</input>
<a ng-class="ctrl.cssClasses"
   tabindex="1"
   ng-click="ctrl.open()"
   give-focus="ctrl.focus"
   ng-bind-html="ctrl.display || '&nbsp;'">
</a>
`;function rn(){return{restrict:"E",template:nn,controller:Je,bindToController:!0,controllerAs:"ctrl",scope:{model:"=",getOptions:"&",onChange:"&",cssClass:"@",allowCustom:"@",labelMode:"@",lookupText:"@",placeholder:"@",startOpen:"@",debounce:"@"}}}o.Ay.directive("gfFormDropdown",rn);const an=`
<div class="baron__track">
  <div class="baron__bar"></div>
</div>
`,on="baron baron__root",sn="baron__scroller";function ln(){return{restrict:"A",link:(r,e,n)=>{let t=e.parent();const a=e;n.grafanaScrollbar&&n.grafanaScrollbar==="scrollonroot"&&(t=a),t.addClass(on),D()(an).appendTo(t),e.addClass(sn);const l={root:t[0],scroller:a[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling",track:".baron__track",direction:"v"},u=I()(l);r.$on("$destroy",()=>{u.dispose()})}}}o.Ay.directive("grafanaScrollbar",ln);var cn=i(44533);o.Ay.directive("jsonTree",[function(){return{restrict:"E",scope:{object:"=",startExpanded:"@",rootName:"@"},link:(e,n)=>{let t=e.startExpanded;e.startExpanded==="true"?t=2:e.startExpanded==="false"&&(t=1);const a={[e.rootName]:e.object},u=new cn.O(a,t,{animateOpen:!0}).render(!0);n.append(u)}}}]);const un=`
<label for="check-{{ctrl.id}}" class="gf-form-switch-container">
  <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">
    {{ctrl.label}}
    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">
      {{ctrl.tooltip}}
    </info-popover>
  </div>
  <div class="gf-form-switch {{ctrl.switchClass}}" ng-if="ctrl.show">
    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">
    <span class="gf-form-switch__slider"></span>
  </div>
</label>
`,hn=`
<label for="check-{{ctrl.id}}" class="gf-form-switch-container">
   <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">
    {{ctrl.label}}
    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">
      {{ctrl.tooltip}}
    </info-popover>
  </div>
  <div class="gf-form-checkbox {{ctrl.switchClass}}" ng-if="ctrl.show">
    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">
    <span class="gf-form-switch__checkbox"></span>
  </div>
</label>
`;class Be{constructor(e,n){this.$timeout=n,this.show=!0,this.id=e.$id}internalOnChange(){return this.$timeout(()=>this.onChange())}}Be.$inject=["$scope","$timeout"];function dn(){return{restrict:"E",controller:Be,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:un}}function pn(){return{restrict:"E",controller:Be,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:hn}}o.Ay.directive("gfFormSwitch",dn),o.Ay.directive("gfFormCheckbox",pn);function fn(){return{restrict:"E",template:`<icon name="'info-circle'" style="margin-left: 10px;" size="'xs'"></icon>`,transclude:!0,link:(r,e,n,t,a)=>{const l=n.offset||"0 -10px",u=n.position||"right middle";let m="drop-help drop-hide-out-of-bounds";const y="hover";e.addClass("gf-form-help-icon"),n.wide&&(m+=" drop-wide"),n.mode&&e.addClass("gf-form-help-icon--"+n.mode),a((v,L)=>{const f=document.createElement("div");f.className="markdown-html",(0,g.each)(v,x=>{f.appendChild(x)});const P={target:e[0],content:f,position:u,classes:m,openOn:y,hoverOpenDelay:400,tetherOptions:{offset:l,constraints:[{to:"window",attachment:"together",pin:!0}]}};r.$applyAsync(()=>{const x=new(te())(P),X=r.$on("$destroy",()=>{x.destroy(),X()})})})}}}o.Ay.directive("infoPopover",fn),o.Ay.directive("spectrumPicker",mn);function mn(){return{restrict:"E",require:"ngModel",scope:!0,replace:!0,template:'<color-picker color="ngModel.$viewValue" on-change="onColorChange"></color-picker>',link:(r,e,n,t)=>{r.ngModel=t,r.onColorChange=a=>{t.$setViewValue(a)}}}}var ke=i(2913);const gn="ace/theme/grafana-dark",vn="ace/theme/textmate",yn="text",bn=10,Cn=2,En=!0,wn=!0,An="<div></div>";async function xn(r,e,n){const t=n.mode||yn,a=n.maxLines||bn,l=n.showGutter!==void 0,u=n.tabSize||Cn,m=n.behavioursEnabled?n.behavioursEnabled==="true":En,y=n.snippetsEnabled?n.snippetsEnabled==="true":wn,v=e.get(0),{default:L}=await i.e(3832).then(i.t.bind(i,47496,23));await i.e(6464).then(i.t.bind(i,6464,23)),await i.e(2694).then(i.t.bind(i,52694,23)),await i.e(9772).then(i.t.bind(i,57391,23)),await i.e(2228).then(i.t.bind(i,32228,23)),await i.e(2514).then(i.t.bind(i,32514,23)),await i.e(7515).then(i.t.bind(i,17515,23)),await i.e(4289).then(i.t.bind(i,54289,23)),await i.e(1708).then(i.t.bind(i,11708,23)),await i.e(7613).then(i.t.bind(i,7613,23)),await i.e(8730).then(i.t.bind(i,98730,23)),await i.e(9118).then(i.t.bind(i,59118,23)),await i.e(5277).then(i.t.bind(i,45277,23)),await i.e(9384).then(i.t.bind(i,69384,23));const f=L.edit(v),P=f.getSession(),x={maxLines:a,showGutter:l,tabSize:u,behavioursEnabled:m,highlightActiveLine:!1,showPrintMargin:!1,autoScrollEditorIntoView:!0};f.setOptions(x),f.$blockScrolling=1/0,f.renderer.setScrollMargin(10,10),f.renderer.setPadding(10),N(),he(t),_(r.content),e.addClass("gf-code-editor");const X=e.find("textarea");X.addClass("gf-form-input"),X.attr("aria-label",n.textareaLabel),r.codeEditorFocus&&setTimeout(()=>{X.focus();const J=X[0];if(J.setSelectionRange){const re=X.val().length*2;J.setSelectionRange(re,re)}},100),P.on("change",J=>{r.$apply(()=>{const re=f.getValue();r.content=re})}),r.$watch("content",(J,re)=>{const ce=f.getValue();J!==ce&&J!==re&&r.$$postDigest(()=>{_(J)})}),f.on("blur",()=>{r.onChange()}),r.$on("$destroy",()=>{f.destroy()}),f.commands.addCommand({name:"executeQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:()=>{r.onChange()}});function he(J){if(L.acequire("ace/ext/language_tools"),f.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:y}),r.getCompleter()){const ce=f;ce.completers=ce.completers.slice(),ce.completers.push(r.getCompleter())}const re=`ace/mode/${J}`;P.setMode(re)}function N(){let J=gn;ke.Ay.bootData.user.lightTheme&&(J=vn),f.setTheme(J)}function _(J){f.setValue(J),f.clearSelection()}}function Tn(){return{restrict:"E",template:An,scope:{content:"=",datasource:"=",codeEditorFocus:"<",onChange:"&",getCompleter:"&"},link:xn}}o.Ay.directive("codeEditor",Tn);const Sn=`
<div class="dropdown cascade-open">
<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.label}}</a>
<span>{{part.def.wrapOpen}}</span><span class="query-part-parameters"></span><span>{{part.def.wrapClose}}</span>
<ul class="dropdown-menu">
  <li ng-repeat="action in partActions">
    <a ng-click="triggerPartAction(action)">{{action.text}}</a>
  </li>
</ul>
`;o.Ay.directive("sqlPartEditor",["templateSrv",Dn]);function Dn(r){const e='<input type="text" class="hide input-mini"></input>';return{restrict:"E",template:Sn,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(t,a){const l=t.part,u=l.def,m=a.find(".query-part-parameters"),y=t.debounce;let v=null;t.partActions=[];function L(J){const re=D()(this),ce=re.next();ce.val(l.params[J]),ce.css("width",re.width()+16+"px"),re.hide(),ce.show(),ce.focus(),ce.select();const ye=ce.data("typeahead");ye&&(ce.val(""),ye.lookup())}function f(J,re){v=setTimeout(()=>{P(J,re)},200)}function P(J,re){const ce=J.prev(),ye=J.val();(ye!==""||l.def.params[re].optional)&&(ce.html(r.highlightVariablesAsHtml(ye)),l.updateParam(J.val(),re),t.$apply(()=>{t.handleEvent({$event:{name:"part-param-changed"}})})),J.hide(),ce.show()}function x(J,re){re.which===13&&P(D()(this),J)}function X(){this.style.width=(3+this.value.length)*8+"px"}function he(J,re,ce){if(!re.options&&!re.dynamicLookup)return;const ye=(Ee,Ie)=>{if(re.options){let Pe=re.options;return re.type==="int"&&(Pe=(0,g.map)(Pe,Re=>Re.toString())),Pe}t.$apply(()=>{t.handleEvent({$event:{name:"get-param-options",param:re}}).then(Pe=>{const Re=(0,g.map)(Pe,sr=>(0,g.escape)(sr.value));(0,g.indexOf)(Re,l.params[ce])===-1&&Re.unshift((0,g.escape)(l.params[ce])),Ie(Re)})})};J.attr("data-provide","typeahead"),J.typeahead({source:ye,minLength:0,items:1e3,updater:Ee=>(Ee=(0,g.unescape)(Ee),Ee===l.params[ce]&&(clearTimeout(v),J.focus()),Ee)});const we=J.data("typeahead");we.lookup=function(){this.query=this.$element.val()||"";const Ee=this.source(this.query,D().proxy(this.process,this));return Ee&&this.process(Ee)},y&&(we.lookup=(0,g.debounce)(we.lookup,500,{leading:!0}))}t.showActionsMenu=()=>{t.handleEvent({$event:{name:"get-part-actions"}}).then(J=>{t.partActions=J})},t.triggerPartAction=J=>{t.handleEvent({$event:{name:"action",action:J}})};function N(){(0,g.each)(u.params,(J,re)=>{if(J.optional&&l.params.length<=re)return;re>0&&D()("<span>"+u.separator+"</span>").appendTo(m);const ce=r.highlightVariablesAsHtml(l.params[re]),ye=D()('<a class="query-part__link">'+ce+"</a>"),we=D()(e);ye.appendTo(m),we.appendTo(m),we.blur((0,g.partial)(f,we,re)),we.keyup(X),we.keypress((0,g.partial)(x,re)),ye.click((0,g.partial)(L,re)),he(we,J,re)})}function _(){m.empty(),N()}_()}}}o.m7.directive("datasourceHttpSettings",()=>({scope:{current:"=",suggestUrl:"@",noDirectAccess:"@",showForwardOAuthIdentityOption:"@"},templateUrl:"public/app/angular/partials/http_settings_next.html",link:{pre:r=>{r.showAccessOption=r.noDirectAccess!=="true",r.onChange=e=>{r.current=e}}}})),o.m7.directive("datasourceTlsAuthSettings",()=>({scope:{current:"="},templateUrl:"public/app/angular/partials/tls_auth_settings.html"}));var Ye=i(15162),Ve=i(91629);o.Ay.directive("pluginComponent",["$compile","$http","$templateCache","$location",$n]);function $n(r,e,n,t){function a(f){if(f.template)return Promise.resolve(f.template);const P=n.get(f.templateUrl);return P?Promise.resolve(P):e.get(f.templateUrl).then(x=>x.data)}function l(f,P){if(f)return f.indexOf("public")===0?f:P+"/"+f}function u(f){return f.Component.templateUrl=l(f.Component.templateUrl,f.baseUrl),()=>({templateUrl:f.Component.templateUrl,template:f.Component.template,restrict:"E",controller:f.Component,controllerAs:"ctrl",bindToController:!0,scope:f.bindings,link:(P,x,X,he)=>{he.link&&he.link(P,x,X,he),he.init&&he.init()}})}function m(f,P){const x={name:"panel-plugin-"+f.panel.type,bindings:{dashboard:"=",panel:"=",row:"="},attrs:{dashboard:"dashboard",panel:"panel",class:"panel-height-helper"}},X=ke.Ay.panels[f.panel.type];return(0,Ye.TV)(X.id).then(he=>{const N=he.angularPanelCtrl;return x.Component=N,!N||N.registered?x:N.templatePromise?N.templatePromise.then(_=>x):(X&&(N.templateUrl=l(N.templateUrl,X.baseUrl)),N.templatePromise=a(N).then(_=>(N.templateUrl=null,N.template=`<grafana-panel ctrl="ctrl" class="panel-height-helper">${_}</grafana-panel>`,{...x,baseUrl:X.baseUrl})),N.templatePromise)})}function y(f,P){switch(P.type){case"query-ctrl":{const x=f.ctrl.datasource;return Promise.resolve({baseUrl:x.meta.baseUrl,name:"query-ctrl-"+x.meta.id,bindings:{target:"=",panelCtrl:"=",datasource:"="},attrs:{target:"ctrl.target","panel-ctrl":"ctrl",datasource:"ctrl.datasource"},Component:x.components.QueryCtrl})}case"annotations-query-ctrl":{const x=f.ctrl.currentDatasource.meta.baseUrl,X=f.ctrl.currentDatasource.meta.id;return(0,Ve.cS)(f.ctrl.currentDatasource.meta).then(he=>({baseUrl:x,name:"annotations-query-ctrl-"+X,bindings:{annotation:"=",datasource:"="},attrs:{annotation:"ctrl.currentAnnotation",datasource:"ctrl.currentDatasource"},Component:he.components.AnnotationsQueryCtrl}))}case"datasource-config-ctrl":{const x=f.ctrl.datasourceMeta,X=t.url();return(0,Ve.cS)(x).then(he=>(f.$watch("ctrl.current",()=>{X===t.url()&&f.onModelChanged(f.ctrl.current)},!0),{baseUrl:x.baseUrl,name:"ds-config-"+x.id,bindings:{meta:"=",current:"="},attrs:{meta:"ctrl.datasourceMeta",current:"ctrl.current"},Component:he.angularConfigCtrl}))}case"app-config-ctrl":{const x=f.ctrl.model;return(0,Ve.ui)(x).then(X=>({baseUrl:x.baseUrl,name:"app-config-"+x.id,bindings:{appModel:"=",appEditCtrl:"="},attrs:{"app-model":"ctrl.model","app-edit-ctrl":"ctrl"},Component:X.angularConfigCtrl}))}case"panel":return m(f,P);default:return Promise.reject({message:"Could not find component type: "+P.type})}}function v(f,P,x){const X=d().element(document.createElement(x.name));(0,g.each)(x.attrs,(he,N)=>{X.attr(N,he)}),r(X)(f),P.empty(),setTimeout(()=>{f.$applyAsync(()=>{P.append(X),setTimeout(()=>{f.$applyAsync(()=>{f.$broadcast(S.ee.componentDidMount.name)})})})})}function L(f,P,x,X){if(X.notFound){P.empty();return}if(!X.Component)throw{message:"Failed to find exported plugin component for "+X.name};if(!X.Component.registered){const he=x.$normalize(X.name),N=u(X);o.Ay.directive(he,N),X.Component.registered=!0}v(f,P,X)}return{restrict:"E",link:(f,P,x)=>{y(f,x).then(X=>{L(f,P,x,X)}).catch(X=>{console.error("Plugin component error",X)})}}}var Ze=i(7376),Pn=i(81634),Mn=i(24284),Oe=i(28138);class qe{constructor(e,n,t,a,l,u){(0,Ze.w)(l),(0,Pn.j)(u),e.init=()=>{e.contextSrv=a,e.appSubUrl=ke.Ay.appSubUrl,e._=ie(),n.init()},t.colors=Mn.Tj,t.onAppEvent=function(m,y,v){let L;typeof m=="string"?L=t.$on(m,y):L=t.$on(m.name,y);let f=this;f.$id===1&&!v&&console.warn("warning rootScope onAppEvent called without localscope"),v&&(f=v),f.$on("$destroy",L)},t.appEvent=(m,y)=>{typeof m=="string"?(t.$emit(m,y),Oe.A.emit(m,y)):(t.$emit(m.name,y),Oe.A.emit(m,y))},e.init()}}qe.$inject=["$scope","utilSrv","$rootScope","contextSrv","angularLoader","$injector"];function kn(){return{restrict:"E",controller:qe,link:(r,e)=>{const n=D()("body");D().fn.modal.Constructor.prototype.enforceFocus=()=>{};let t=new Date().getTime(),a=!0;const l=60*5e3;function u(){a&&n.hasClass("page-dashboard")&&new Date().getTime()-t>l&&(a=!1,n.addClass("view-mode--inactive"))}function m(){t=new Date().getTime(),a||(a=!0,n.removeClass("view-mode--inactive"))}n.mousemove(m),n.keydown(m),document.addEventListener("wheel",m,{capture:!0,passive:!0}),document.addEventListener("visibilitychange",m),setInterval(u,2e3),n.click(y=>{const v=D()(y.target);if(v.parents().length===0)return;n.find(".dropdown-menu-open").removeClass("dropdown-menu-open");const L=v.closest("[data-click-hide]");if(L.length){const P=L.parent();L.detach(),setTimeout(()=>{P.append(L)},100)}const f=e.find(".popover");f.length>0&&v.parents(".graph-legend").length===0&&f.hide()})}}}o.Ay.directive("grafanaApp",kn);var ur=i(23345),hr=i(26415),dr=i(74526),Ln=i(72574),On=i(89191),In=i(16233),Rn=i(17493),Nn=i(74856),Fn=i(94429),Un=i(5808),_e=i(12131);class zn{constructor(){this.$get=()=>{},(0,_e.Lc)("Patch angular",!1,"RouteParamsProvider")}}class Wn{constructor(){(0,_e.Lc)("Patch angular",!1,"RouteProvider")}$get(){return this}}var Bn=i(4244);const Vn=()=>{o.m7.config(["$provide",r=>{r.decorator("$browser",["$delegate",e=>(e.onUrlChange=()=>{},e.url=()=>"",e)])}])},Hn=()=>{o.m7.config(["$provide",r=>{r.decorator("$location",["$delegate",e=>(e=new Bn.b,e)])}]),o.m7.provider("$route",Wn),o.m7.provider("$routeParams",zn)};function jn(){Vn(),Hn()}function Qn(r){r.oldInvoke=r.invoke,r.invoke=(e,n,t,a)=>{const l=t?.$scope?.$parent;return l&&(l.panel&&(n.panel=l.panel),l.dashboard&&(n.dashboard=l.dashboard),l.ctrl?.target&&(n.panelCtrl=l.ctrl,n.datasource=l.ctrl.datasource,n.target=l.ctrl.target),l.ctrl?.datasourceMeta&&(n.meta=l.ctrl.datasourceMeta,n.current=l.ctrl.current),l.ctrl?.currentAnnotation&&(n.annotation=l.ctrl.currentAnnotation,n.datasource=l.ctrl.currentDatasource),l.isAppConfigCtrl&&(n.appEditCtrl=l.ctrl,n.appModel=l.ctrl.model),l.$parent?.$parent?.ctrl?.appModel&&(n.appModel=l.$parent?.$parent?.ctrl?.appModel)),r.oldInvoke(e,n,t,a)}}var Kn=i(39741),Gn=i(18226),et=i(14792);function Xn(r){return function(n){const t=(0,U.useRef)(null),a=(0,U.useRef)(),l=(0,U.useRef)();return(0,U.useEffect)(()=>{if(!t.current)return;const u=(0,Ze.E)(),m='<plugin-component type="panel" class="panel-height-helper"></plugin-component>',y=new Yn,v=new Jn(r,n,y);a.current={panel:v,dashboard:(0,et.UA)().getCurrent(),size:{width:n.width,height:n.height},queryRunner:y},l.current=u.load(t.current,a.current,m)},[]),(0,U.useEffect)(()=>{l.current&&(a.current.size.height=n.height,a.current.size.width=n.width,a.current.panel.events.publish(new s.XM))},[n.width,n.height]),(0,U.useEffect)(()=>{a.current?.panel&&a.current.queryRunner.forwardNewData(n.data)},[n.data]),U.createElement("div",{ref:t,className:"panel-height-helper"})}}class Jn{constructor(e,n,t){n.options.angularOptions&&Object.assign(this,n.options.angularOptions),this.id=n.id,this.type=e.meta.id,this.title=n.title,this.fieldConfig=n.fieldConfig,this.options=n.options,this.plugin=e,this.events=new Gn.o,this.queryRunner=t}refresh(){this.events.publish(new k._)}render(){this.events.publish(new s.XM)}getQueryRunner(){return this.queryRunner}}class Yn{constructor(){this.subject=new Kn.m(1)}getData(e){return this.subject}forwardNewData(e){this.subject.next(e)}run(){}}var Zn=i(17172),qn=i(19347),_n=i(10096),er=i(71500),tr=i(6923),Te=i(95344);class nr{constructor(){}init(){Oe.l.subscribe(s.Ps,e=>this.showModal(e.payload)),Oe.l.subscribe(s.aP,this.hideModal.bind(this))}hideModal(){(0,Te.l)("UtilSrv","hideModal",""),this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss()}showModal(e){(0,Te.l)("UtilSrv","showModal","publish ShowModalReactEvent")}}var He=i(10154);class rr{clearPromiseCaches(){(0,Te.l)("annotations_srv.ts","clearPromiseCaches","DashboardQueryRunner")}getAnnotations(e){return(0,Te.l)("annotations_srv.ts","getAnnotations","DashboardQueryRunner.getResult"),Promise.resolve({annotations:[],alertState:void 0})}getAlertStates(e){return(0,Te.l)("annotations_srv.ts","getAlertStates","DashboardQueryRunner.getResult"),Promise.resolve(void 0)}getGlobalAnnotations(e){return(0,Te.l)("annotations_srv.ts","getGlobalAnnotations","DashboardQueryRunner.getResult"),Promise.resolve([])}saveAnnotationEvent(e){return(0,Te.l)("annotations_srv.ts","saveAnnotationEvent","api/saveAnnotation"),(0,He.vJ)(e)}updateAnnotationEvent(e){return(0,Te.l)("annotations_srv.ts","updateAnnotationEvent","api/updateAnnotation"),(0,He.rJ)(e)}deleteAnnotationEvent(e){return(0,Te.l)("annotations_srv.ts","deleteAnnotationEvent","api/deleteAnnotation"),(0,He.Xm)(e)}translateQueryResult(e,n){(0,Te.l)("annotations_srv.ts","translateQueryResult","DashboardQueryRunner/utils/translateQueryResult"),e.snapshotData&&(e=(0,g.cloneDeep)(e),delete e.snapshotData);for(const t of n)t.source=e,t.color=e.iconColor,t.type=e.name,t.isRegion=t.timeEnd&&t.time!==t.timeEnd;return n}}function ir(){o.Ay.factory("backendSrv",()=>(0,Zn.AI)()),o.Ay.factory("contextSrv",()=>_n.TP),o.Ay.factory("dashboardSrv",()=>(0,et.UA)()),o.Ay.factory("datasourceSrv",()=>(0,qn.l)()),o.Ay.factory("linkSrv",()=>(0,tr.mQ)()),o.Ay.factory("validationSrv",()=>er.P),o.Ay.service("annotationsSrv",rr),o.Ay.service("utilSrv",nr)}const ar={angular:{...d(),default:d()},"app/core/core_module":{default:o.m7,__useDefault:!0},"app/core/core":{appEvents:Oe.A,contextSrv:In.TP,coreModule:o.m7},"app/plugins/sdk":Un,"app/core/utils/promiseToDigest":{promiseToDigest:We.F}};class or{constructor(){this.preBootModules=[],this.ngModuleDependencies=[],this.registerFunctions={}}init(){const e=d().module("grafana",[]);(0,Ye.f7)(Xn),e.config(["$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$provide","$sceDelegateProvider",(t,a,l,u,m,y)=>{ke.$W.buildInfo.env!=="development"&&a.debugInfoEnabled(!1),u.useApplyAsync(!0),ke.$W.pluginsCDNBaseURL&&y.trustedResourceUrlList(["self",`${ke.$W.pluginsCDNBaseURL}/**`]),this.registerFunctions.controller=t.register,this.registerFunctions.directive=a.directive,this.registerFunctions.factory=m.factory,this.registerFunctions.service=m.service,this.registerFunctions.filter=l.register,m.decorator("$http",["$delegate","$templateCache",(v,L)=>{const f=v.get;return v.get=(P,x)=>(P.match(/\.html$/)&&(L.get(P)||(P+="?v="+new Date().getTime())),f(P,x)),v}])}]),this.ngModuleDependencies=["grafana.core","ngSanitize","grafana","pasvaz.bindonce","react"],o.yF.forEach(t=>{this.useModule(t)}),d().module("grafana.services").service("dashboardLoaderSrv",Rn.Fu),o.m7.factory("timeSrv",()=>(0,Nn.jG)()),o.m7.factory("templateSrv",()=>(0,Ln.w)()),qt(),ir(),jn();const n=(0,Fn.kB)(ar);On.zO.addImportMap({imports:n}),$.fn.tooltip.defaults.animation=!1}useModule(e){return this.preBootModules?this.preBootModules.push(e):(0,g.extend)(e,this.registerFunctions),this.ngModuleDependencies.push(e.name),e}bootstrap(){const e=d().bootstrap(document.getElementById("ngRoot"),this.ngModuleDependencies);return Qn(e),e.invoke(()=>(this.preBootModules.forEach(n=>{(0,g.extend)(n,this.registerFunctions)}),()=>{})),e}}},75519:(A,w,i)=>{"use strict";i.d(w,{F:()=>p});var z=i(2543),I=i.n(z),E=i(39070),S=i(14236),k=i(26272),o=i(70225),s=i(19752);class p extends o.y{constructor(h,d){super(h,d),this.skipDataOnInit=!1,this.dataList=[],this.useDataFrames=!1,this.panelDataObserver={next:B=>{if(this.panelData=B,B.state===E.Gu.Error&&(this.loading=!1,this.processDataError(B.error)),B.state===E.Gu.Loading){this.loading=!0,this.angularDirtyCheck();return}if(B.request){const{timeInfo:Z}=B.request;Z&&(this.timeInfo=Z)}if(B.timeRange&&(this.range=B.timeRange),this.useDataFrames)this.handleDataFrames(B.series);else{const Z=B.series.map(H=>(0,S.w3)(H));this.handleQueryResult({data:Z})}this.angularDirtyCheck()}},this.contextSrv=d.get("contextSrv"),this.datasourceSrv=d.get("datasourceSrv"),this.timeSrv=d.get("timeSrv"),this.templateSrv=d.get("templateSrv"),this.panel.datasource=this.panel.datasource||null,this.events.on(k.ee.refresh,this.onMetricsPanelRefresh.bind(this)),this.events.on(k.ee.panelTeardown,this.onPanelTearDown.bind(this)),this.events.on(k.ee.componentDidMount,this.onMetricsPanelMounted.bind(this))}onMetricsPanelMounted(){const h=this.panel.getQueryRunner();this.querySubscription=h.getData({withTransforms:!0,withFieldConfig:!0}).subscribe(this.panelDataObserver)}onPanelTearDown(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}onMetricsPanelRefresh(){if(!this.otherPanelInFullscreenMode()){if(this.panel.snapshotData){this.updateTimeRange();let h=this.panel.snapshotData;return(0,z.isArray)(h)||(h=h.data),this.panelData={state:E.Gu.Done,series:h,timeRange:this.range},this.$timeout(()=>{this.events.emit(k.ee.dataSnapshotLoad,h)})}return delete this.error,this.loading=!0,this.datasourceSrv.get(this.panel.datasource,this.panel.scopedVars).then(this.issueQueries.bind(this)).catch(h=>{this.processDataError(h)})}}processDataError(h){if(h.cancelled){console.log("Panel request cancelled",h);return}this.error=h.message||"Request Error",h.data&&(h.data.message?this.error=h.data.message:h.data.error&&(this.error=h.data.error)),this.angularDirtyCheck()}angularDirtyCheck(){this.$scope.$root.$$phase||this.$scope.$digest()}updateTimeRange(h){this.datasource=h||this.datasource,this.range=this.timeSrv.timeRange();const d=(0,s.nk)(this.panel,this.range);this.timeInfo=d.timeInfo,this.range=d.timeRange}issueQueries(h){this.updateTimeRange(h),this.datasource=h;const d=this.panel;return d.getQueryRunner().run({datasource:d.datasource,queries:d.targets,panelId:d.id,dashboardUID:this.dashboard.uid,timezone:this.dashboard.getTimezone(),timeInfo:this.timeInfo,timeRange:this.range,maxDataPoints:d.maxDataPoints||this.width,minInterval:d.interval,scopedVars:d.scopedVars,cacheTimeout:d.cacheTimeout,queryCachingTTL:d.queryCachingTTL,transformations:d.transformations})}handleDataFrames(h){this.loading=!1,this.dashboard&&this.dashboard.snapshot&&(this.panel.snapshotData=h.map(d=>(0,S.Kl)(d)));try{this.events.emit(k.ee.dataFramesReceived,h)}catch(d){this.processDataError(d)}}handleQueryResult(h){this.loading=!1,this.dashboard.snapshot&&(this.panel.snapshotData=h.data),(!h||!h.data)&&(console.log("Data source query result invalid, missing data field:",h),h={data:[]});try{this.events.emit(k.ee.dataReceived,h.data)}catch(d){this.processDataError(d)}}}},70225:(A,w,i)=>{"use strict";i.d(w,{y:()=>p});var z=i(2543),I=i.n(z),E=i(18226),S=i(26272),k=i(4244),o=i(2913),s=i(10096);class p{constructor(h,d){this.pluginName="",this.pluginId="",this.editModeInitiated=!1,this.loading=!1,this.onPluginTypeChange=Z=>{},this.panel=this.panel??h.$parent.panel,this.dashboard=this.dashboard??h.$parent.dashboard,this.$injector=d,this.$scope=h,this.$timeout=d.get("$timeout"),this.editorTabs=[],this.$location=new k.b,this.events=new E.o,this.timing={};const B=o.Ay.panels[this.panel.type];B&&(this.pluginId=B.id,this.pluginName=B.name),h.$on(S.ee.componentDidMount.name,()=>this.panelDidMount())}panelDidMount(){this.events.emit(S.ee.componentDidMount),this.events.emit(S.ee.initialized),this.dashboard.panelInitialized(this.panel)}renderingCompleted(){s.Ef.renderingCompleted()}refresh(){this.panel.refresh()}publishAppEvent(h,d){this.$scope.$root.appEvent(h,d)}initEditMode(){this.editModeInitiated||(this.editModeInitiated=!0,this.events.emit(S.ee.editModeInitialized))}addEditorTab(h,d,B,Z){const H={title:h,directiveFn:d,icon:Z};(0,z.isString)(d)&&(H.directiveFn=()=>({templateUrl:d})),B?this.editorTabs.splice(B,0,H):this.editorTabs.push(H)}getExtendedMenu(){const h=[];return this.events.emit(S.ee.initPanelActions,h),h}async getAdditionalMenuItems(){return[]}otherPanelInFullscreenMode(){return this.dashboard.otherPanelInFullscreen(this.panel)}render(h){this.events.emit(S.ee.render,h)}}},59559:(A,w,i)=>{"use strict";i.d(w,{a:()=>E});var z=i(2543),I=i.n(z);class E{constructor(k,o){this.$scope=k,this.$injector=o,this.panelCtrl=this.panelCtrl??k.ctrl.panelCtrl,this.target=this.target??k.ctrl.target,this.datasource=this.datasource??k.ctrl.datasource,this.panel=this.panelCtrl?.panel??k.ctrl.panelCtrl.panel,this.isLastQuery=(0,z.indexOf)(this.panel.targets,this.target)===this.panel.targets.length-1}refresh(){this.panelCtrl.refresh()}}},50410:(A,w,i)=>{"use strict";let z=i(12631);z.keys().forEach(I=>{z(I)})},8678:(A,w,i)=>{"use strict";i.d(w,{F:()=>z});const z=I=>E=>E.finally(I.$evalAsync)},5808:(A,w,i)=>{"use strict";i.r(w),i.d(w,{MetricsPanelCtrl:()=>s,PanelCtrl:()=>o,QueryCtrl:()=>p,loadPluginCss:()=>I.PL});var z=i(92341),I=i(89191),E=i(75519),S=i(70225),k=i(59559);const o=(0,z.Y)(S.y),s=(0,z.Y)(E.F),p=(0,z.Y)(k.a)},42346:()=>{(function(A){"use strict";var w={tagClass:function(o){return"label label-info"},itemValue:function(o){return o&&o.toString()},itemText:function(o){return this.itemValue(o)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(o,s){s.hide().fadeIn()}};function i(o,s){this.itemsArray=[],this.$element=A(o),this.$element.hide(),this.widthClass=s.widthClass||"width-9",this.isSelect=o.tagName==="SELECT",this.multiple=this.isSelect&&o.hasAttribute("multiple"),this.objectItems=s&&s.itemValue,this.placeholderText=o.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.$container=A('<div class="bootstrap-tagsinput"></div>'),this.$input=A('<input class="gf-form-input '+this.widthClass+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(s)}i.prototype={constructor:i,add:function(o,s){var p=this;if(!(p.options.maxTags&&p.itemsArray.length>=p.options.maxTags)&&!(o!==!1&&!o)){if(typeof o=="object"&&!p.objectItems)throw"Can't add objects when itemValue option is not set";if(!o.toString().match(/^\s*$/)){if(p.isSelect&&!p.multiple&&p.itemsArray.length>0&&p.remove(p.itemsArray[0]),typeof o=="string"&&this.$element[0].tagName==="INPUT"){var c=o.split(",");if(c.length>1){for(var h=0;h<c.length;h++)this.add(c[h],!0);s||p.pushVal();return}}var d=p.options.itemValue(o),B=p.options.itemText(o),Z=p.options.tagClass(o),H=A.grep(p.itemsArray,function(g){return p.options.itemValue(g)===d})[0];if(H){if(p.options.onTagExists){var q=A(".tag",p.$container).filter(function(){return A(this).data("item")===H});p.options.onTagExists(o,q)}return}p.itemsArray.push(o);var R=A('<span class="tag '+S(Z)+'">'+S(B)+'<span data-role="remove"></span></span>');if(R.data("item",o),p.findInputWrapper().before(R),R.after(" "),p.isSelect&&!A('option[value="'+escape(d)+'"]',p.$element)[0]){var j=A("<option selected>"+S(B)+"</option>");j.data("item",o),j.attr("value",d),p.$element.append(j)}s||p.pushVal(),p.options.maxTags===p.itemsArray.length&&p.$container.addClass("bootstrap-tagsinput-max"),p.$element.trigger(A.Event("itemAdded",{item:o}))}}},remove:function(o,s){var p=this;p.objectItems&&(typeof o=="object"?o=A.grep(p.itemsArray,function(c){return p.options.itemValue(c)==p.options.itemValue(o)})[0]:o=A.grep(p.itemsArray,function(c){return p.options.itemValue(c)==o})[0]),o&&(A(".tag",p.$container).filter(function(){return A(this).data("item")===o}).remove(),A("option",p.$element).filter(function(){return A(this).data("item")===o}).remove(),p.itemsArray.splice(A.inArray(o,p.itemsArray),1)),s||p.pushVal(),p.options.maxTags>p.itemsArray.length&&p.$container.removeClass("bootstrap-tagsinput-max"),p.$element.trigger(A.Event("itemRemoved",{item:o}))},removeAll:function(){var o=this;for(A(".tag",o.$container).remove(),A("option",o.$element).remove();o.itemsArray.length>0;)o.itemsArray.pop();o.pushVal(),o.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var o=this;A(".tag",o.$container).each(function(){var s=A(this),p=s.data("item"),c=o.options.itemValue(p),h=o.options.itemText(p),d=o.options.tagClass(p);if(s.attr("class",null),s.addClass("tag "+S(d)),s.contents().filter(function(){return this.nodeType==3})[0].nodeValue=S(h),o.isSelect){var B=A("option",o.$element).filter(function(){return A(this).data("item")===p});B.attr("value",c)}})},items:function(){return this.itemsArray},pushVal:function(){var o=this,s=A.map(o.items(),function(p){return o.options.itemValue(p).toString()});o.$element.val(s,!0).trigger("change")},build:function(o){var s=this;s.options=A.extend({},w,o);var p=s.options.typeahead||{};s.objectItems&&(s.options.freeInput=!1),z(s.options,"itemValue"),z(s.options,"itemText"),z(s.options,"tagClass"),s.options.source&&(p.source=s.options.source),p.source&&A.fn.typeahead&&(I(p,"source"),s.$input.typeahead({source:function(c,h){function d(H){for(var q=[],R=0;R<H.length;R++){var j=s.options.itemText(H[R]);B[j]=H[R],q.push(j)}h(q)}this.map={};var B=this.map,Z=p.source(c);A.isFunction(Z.success)?Z.success(d):A.when(Z).then(d)},updater:function(c){s.add(this.map[c])},matcher:function(c){return c.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(c){return c.sort()},highlighter:function(c){var h=new RegExp("("+this.query+")","gi");return c.replace(h,"<strong>$1</strong>")}})),s.$container.on("click",A.proxy(function(c){s.$input.focus()},s)),s.$container.on("blur","input",A.proxy(function(c){var h=A(c.target);s.add(h.val()),h.val(""),c.preventDefault()},s)),s.$container.on("keydown","input",A.proxy(function(c){var h=A(c.target),d=s.findInputWrapper();switch(c.which){case 8:if(k(h[0])===0){var B=d.prev();B&&s.remove(B.data("item"))}break;case 46:if(k(h[0])===0){var Z=d.next();Z&&s.remove(Z.data("item"))}break;case 37:var H=d.prev();h.val().length===0&&H[0]&&(H.before(d),h.focus());break;case 39:var q=d.next();h.val().length===0&&q[0]&&(q.after(d),h.focus());break;default:s.options.freeInput&&A.inArray(c.which,s.options.confirmKeys)>=0&&(s.add(h.val()),h.val(""),c.preventDefault())}h.attr("size",Math.max(this.inputSize,h.val().length))},s)),s.$container.on("click","[data-role=remove]",A.proxy(function(c){s.remove(A(c.target).closest(".tag").data("item")),c.stopPropagation()},s)),s.options.itemValue===w.itemValue&&(s.$element[0].tagName==="INPUT"?s.add(s.$element.val()):A("option",s.$element).each(function(){s.add(A(this).attr("value"),!0)}))},destroy:function(){var o=this;o.$container.off("keypress","input"),o.$container.off("click","[role=remove]"),o.$container.remove(),o.$element.removeData("tagsinput"),o.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var o=this.$input[0],s=this.$container[0];o&&o.parentNode!==s;)o=o.parentNode;return A(o)}},A.fn.tagsinput=function(o,s){var p=[];return this.each(function(){var c=A(this).data("tagsinput");if(!c)c=new i(this,o),A(this).data("tagsinput",c),p.push(c),this.tagName==="SELECT"&&A("option",A(this)).attr("selected","selected"),A(this).val(A(this).val());else{var h=c[o](s);h!==void 0&&p.push(h)}}),typeof o=="string"?p.length>1?p:p[0]:p},A.fn.tagsinput.Constructor=i;function z(o,s){if(typeof o[s]!="function"){var p=o[s];o[s]=function(c){return c[p]}}}function I(o,s){if(typeof o[s]!="function"){var p=o[s];o[s]=function(){return p}}}var E=A("<div />");function S(o){return o?E.text(o).html():""}function k(o){var s=0;if(document.selection){o.focus();var p=document.selection.createRange();p.moveStart("character",-o.value.length),s=p.text.length}else(o.selectionStart||o.selectionStart=="0")&&(s=o.selectionStart);return s}A(function(){A("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery)}}]);

//# sourceMappingURL=1133.cd705902767ed2e9bf55.js.map