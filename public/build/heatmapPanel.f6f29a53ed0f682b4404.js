"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5857],{96589:(nt,Ee,h)=>{h.d(Ee,{w:()=>Ie});var d=h(32196),oe=h(96540),Be=h(40845);const ye=10,Ie=({colorPalette:le,min:se,max:xe,display:T,hoverValue:fe,useStopsPercentage:ve})=>{const[Se,ie]=(0,oe.useState)([]),[pe,ce]=(0,oe.useState)({isShown:!1,value:0}),[ge,Le]=(0,oe.useState)(null),Ae=(0,Be.$j)(),ue=Ne(Ae,Se);(0,oe.useEffect)(()=>{ie(re({colorArray:le,stops:ye,useStopsPercentage:ve}))},[le,ve]);const be=De=>{const Oe=De.nativeEvent.offsetX,Te=De.currentTarget.offsetWidth,de=Math.floor(Oe*100/Te+1),he=Math.floor((xe-se)*de/100+se);ce({isShown:!0,value:he}),Le(de)},Re=()=>{ce({isShown:!1,value:0})};return(0,oe.useEffect)(()=>{Le(fe==null?null:o((fe-se)/(xe-se)))},[fe,se,xe]),oe.createElement("div",{className:ue.scaleWrapper,onMouseMove:be,onMouseLeave:Re},oe.createElement("div",{className:ue.scaleGradient},T&&(pe.isShown||fe!==void 0)&&oe.createElement("div",{className:ue.followerContainer},oe.createElement("div",{className:ue.follower,style:{left:`${ge}%`}}))),T&&oe.createElement("div",{className:ue.followerContainer},oe.createElement("div",{className:ue.legendValues},oe.createElement("span",{className:ue.disabled},T(se)),oe.createElement("span",{className:ue.disabled},T(xe))),ge!=null&&(pe.isShown||fe!==void 0)&&oe.createElement("span",{className:ue.hoverValue,style:{left:`${ge}%`}},T(fe??pe.value))))},re=({colorArray:le,stops:se,useStopsPercentage:xe=!0})=>{const T=le.length;if(xe&&T<=20){const ie=1/T*100;let pe=0;const ce=[];for(const ge of le)pe>0?ce.push(`${ge} ${pe}%`):ce.push(ge),pe+=ie,ce.push(`${ge} ${pe}%`);return ce}const fe=le[T-1],ve=Math.ceil(T/se),Se=new Set;for(let ie=0;ie<T;ie+=ve)Se.add(le[ie]);return Se.add(fe),[...Se]};function o(le){return le>1?100:le<0?0:le*100}const Ne=(le,se)=>({scaleWrapper:(0,d.css)({width:"100%",fontSize:"11px",opacity:1}),scaleGradient:(0,d.css)({background:`linear-gradient(90deg, ${se.join()})`,height:"9px",pointerEvents:"none",borderRadius:le.shape.radius.default}),legendValues:(0,d.css)({display:"flex",justifyContent:"space-between",pointerEvents:"none"}),hoverValue:(0,d.css)({position:"absolute",marginTop:"-14px",padding:"3px 15px",transform:"translateX(-50%)"}),followerContainer:(0,d.css)({position:"relative",pointerEvents:"none",whiteSpace:"nowrap"}),follower:(0,d.css)({position:"absolute",height:"13px",width:"13px",borderRadius:le.shape.radius.default,transform:"translateX(-50%) translateY(-50%)",border:`2px solid ${le.colors.text.primary}`,top:"5px"}),disabled:(0,d.css)({color:le.colors.text.disabled})})},46761:(nt,Ee,h)=>{h.r(Ee),h.d(Ee,{plugin:()=>Pt});var d=h(96540),oe=h(65158),Be=h(37055),ye=h(11261),Ie=h(27310),re=h(32264),o=h(52622),Ne=h(38248),le=h(11404),se=h(96589),xe=h(27825),T=h(3290),fe=h(32196),ve=h(90708),Se=h(94624),ie=h(41260),pe=h(97152),ce=h(40845),ge=h(79041),Le=h(67266),Ae=h(81297),ue=h(10175),be=h(77455),Re=h(17464),De=h(69503),Oe=h(62567),Te=h(86106),de=h(36613),he=h(83195),ze=h(28240),ot=h(11389),it=h(58749),st=h(92663),ke=h(79871),Ye=h(14792),Ke=h(1819),rt=h(22731);function je(e,a,t,s,l,n,u){let r=e.current?.getContext("2d");if(r!=null){let y=n;for(;s[y--]===s[n];);y++;let c=y+u,i=0,B=y;for(;B<c;){let q=l[B];i=Math.max(i,q),B++}let g=new Path2D,O=new Path2D;B=y;let j=0;for(;B<c;){let q=l[B];if(q>0){let I=q/i,V=j/(u+1);(B===n?g:O).rect(Math.round(a*V),Math.round(t*(1-I)),Math.round(a/u),Math.round(t*I))}B++,j++}r.clearRect(0,0,a,t),r.fillStyle="#2E3036",r.fill(O),r.fillStyle="#5794F2",r.fill(g)}}const Je=(e,a)=>{const t=e.heatmapColors?.palette,s=e.heatmapColors?.values[a];let l;return s!=null&&(l=t[s]),{cellColor:l,colorPalette:t}},Qe={year:1e3*60*60*24*365,month:1e3*60*60*24*30,week:1e3*60*60*24*7,day:1e3*60*60*24,h:1e3*60*60,m:1e3*60,s:1e3,ms:1},ct=new Set(["ms","s","m","h"]),ut=e=>{let a=1,t="ms";for(t in Qe)if(e>=Qe[t]){a=Math.floor(e/Qe[t]);break}const l=a!==1&&!ct.has(t)?t+"s":t;return`${a} ${l}`},Ge=(e,a,t)=>{let s;switch(a){case"x":s=t?e?.fields.find(({name:l})=>l==="x"||l==="xMin"||l==="xMax"):e?.fields[0];break;case"y":s=t?e?.fields.find(({name:l})=>l==="y"||l==="yMin"||l==="yMax"):e?.fields[1];break;case"count":s=t?e?.fields.find(({name:l})=>l==="count"):e?.fields[2];break}return s},Ze=(e,a)=>{let t=e.heatmap.fields,s=t.find(r=>r.name==="xMax"),l=t.find(r=>r.name==="yMin"),n=t.find(r=>r.name==="yMax"),u=s.config.interval;return{xBucketMin:s.values[a]-u,xBucketMax:s.values[a],yBucketMin:l.values[a],yBucketMax:n.values[a]}},dt=e=>e.seriesIdx===2?d.createElement(Ke.e,{data:e.dataRef.current.exemplars,rowIndex:e.dataIdxs[2],header:"Exemplar",padding:8}):d.createElement(mt,{...e}),mt=({dataIdxs:e,dataRef:a,showHistogram:t,isPinned:s,showColorScale:l=!1,scopedVars:n,replaceVars:u,mode:r,annotate:y})=>{const c=e[1],i=a.current,[B]=(0,d.useState)(()=>i.heatmap?.meta?.type===ie.m.HeatmapCells&&!(0,T.Nb)(i.heatmap)),g=Ge(i.heatmap,"x",B),O=Ge(i.heatmap,"y",B),j=Ge(i.heatmap,"count",B),q=p=>{if(g?.display)return(0,he.cN)(g.display(p));if(g?.type===ye.PU.time){const E="YYYY-MM-DD HH:mm:ss";return(0,Ye.UA)().getCurrent()?.formatDate(p,E)}return`${p}`},I=g.values,V=O.values,k=j.values,$=(0,T.eE)(i.heatmap),A=O?.display?p=>(0,he.cN)(O.display(p)):p=>`${p}`;let b=g?.config.interval,M,w,P,ee,K,R=[];const ae=p=>p%i.yBucketCount;let Q=ae(c);const X=(p=c)=>{if($.yOrdinalDisplay){const E=i.yLayout===o.D7.le?Q-1:Q,Y=i.yLayout===o.D7.le?Q:Q+1;M=E<0?$.yMinDisplay:`${$.yOrdinalDisplay[E]}`,w=`${$.yOrdinalDisplay[Y]}`,(!$.yOrdinalLabel||Number.isNaN(+$.yOrdinalLabel[0]))&&(K=i.yLayout===o.D7.le?w:M)}else{const E=V?.[Q];if(i.yLayout===o.D7.le)if(w=`${E}`,i.yLog){let z=(i.yLog===2?Math.log2:Math.log10)(E)-1/i.yLogSplit;M=`${i.yLog**z}`}else M=`${E-i.yBucketSize}`;else if(M=`${E}`,i.yLog){let z=(i.yLog===2?Math.log2:Math.log10)(E)+1/i.yLogSplit;w=`${i.yLog**z}`}else w=`${E+i.yBucketSize}`}i.xLayout===o.D7.le?(ee=I[p],P=ee-i.xBucketSize):(P=I[p],ee=P+i.xBucketSize)};B?{xBucketMin:P,xBucketMax:ee,yBucketMin:M,yBucketMax:w}=Ze(i,c):X();const{cellColor:G,colorPalette:v}=Je(i,c),U=(p,E)=>{let Y=[];for(let z=p;z<=E;z++){if(!k?.[z])continue;const te=Je(i,z).cellColor;D=Z(z),B?{xBucketMin:P,xBucketMax:ee,yBucketMin:M,yBucketMax:w}=Ze(i,z):(Q=ae(z),X(z));const{label:me,value:Fe}=J()[0];Y.push({label:me,value:Fe,color:te??"#FFF",isActive:c===z})}return Y},J=()=>{const p=r===o.$N.Multi&&!s;if(K)return p?[{label:`Name ${K}`,value:i.display(D)}]:[{label:"Name",value:K}];switch(i.yLayout){case o.D7.unknown:return p?[{label:A(M),value:i.display(D)}]:[{label:"",value:A(M)}]}return p?[{label:`Bucket ${A(M)}-${A(w)}`,value:i.display(D)}]:[{label:"Bucket",value:`${A(M)}-${A(w)}`}]},Z=p=>k?.[p];let D=Z(c);if(r===o.$N.Single||s){const p=b?[{label:"Duration",value:ut(b)}]:[];R=[{label:(0,ze.Ct)(j,i.heatmap),value:i.display(D),color:G??"#FFF",colorPlacement:ke.lJ.trailing,colorIndicator:ke.fX.value},...J(),...p]}if(r===o.$N.Multi&&!s){let p=g.values[c],E=c,Y=c;for(;g.values[E-1]===p;)E--;for(;g.values[Y+1]===p;)Y++;U(E,Y).forEach(te=>{R.push({label:te.label,value:te.value,color:te.color??"#FFF",colorIndicator:ke.fX.value,colorPlacement:ke.lJ.trailing,isActive:te.isActive})})}const H=i.heatmap?.fields.filter(p=>!p.config.custom?.hideFrom?.tooltip),N=[],_=new Set;for(const p of H??[]){if(p.config.links&&p.config.links.length>0&&i.heatmap){const Y=n.find(z=>z&&z.__dataContext&&z.__dataContext.value.field.name===K);p.getLinks=(0,ve._M)(i.heatmap,p,Y||{},u)}if(p.getLinks){const Y=p.values[c],z=p.display?p.display(Y):{text:`${Y}`,numeric:+Y};p.getLinks({calculatedValue:z,valueRowIndex:c}).forEach(te=>{const me=`${te.title}/${te.href}`;_.has(me)||(N.push(te),_.add(me))})}}let ne=(0,d.useRef)(null),W=264,m=64,x=Math.round(W*de.A.pxRatio),f=Math.round(m*de.A.pxRatio);(0,d.useEffect)(()=>{t&&I!=null&&k!=null&&r===o.$N.Single&&je(ne,x,f,I,k,c,i.yBucketCount)},[c]);const C={label:"",value:q(ee)};let S=[];r===o.$N.Single&&(t&&!B&&S.push(d.createElement("canvas",{width:x,height:f,ref:ne,style:{width:W+"px",height:m+"px"}})),v&&l&&S.push(d.createElement(se.w,{colorPalette:v,min:i.heatmapColors?.minValue,max:i.heatmapColors?.maxValue,display:i.display,hoverValue:D})));const F=(0,ce.of)(rt.$);return d.createElement("div",{className:F.wrapper},d.createElement(st.A,{headerLabel:C,isPinned:s}),d.createElement(ot.o,{contentLabelValue:R,customContent:S,isPinned:s}),s&&d.createElement(it.S,{dataLinks:N,annotate:y}))};var ft=h(66864),pt=h(55852);const ht=e=>e.hover.seriesIdx===2?d.createElement(Ke.e,{data:e.data.exemplars,rowIndex:e.hover.dataIdx,header:"Exemplar"}):d.createElement(yt,{...e}),yt=({data:e,hover:a,showHistogram:t=!1,scopedVars:s,replaceVars:l})=>{const n=a.dataIdx,[u]=(0,d.useState)(()=>e.heatmap?.meta?.type===ie.m.HeatmapCells&&!(0,T.Nb)(e.heatmap)),r=e.heatmap?.fields[0],y=e.heatmap?.fields[1],c=e.heatmap?.fields[2],i=v=>{if(r?.display)return(0,he.cN)(r.display(v));if(r?.type===ye.PU.time){const U="YYYY-MM-DD HH:mm:ss";return(0,Ye.UA)().getCurrent()?.formatDate(v,U)}return`${v}`},B=r?.values,g=y?.values,O=c?.values,j=(0,T.eE)(e.heatmap),q=y?.display?v=>(0,he.cN)(y.display(v)):v=>`${v}`,I=n%e.yBucketCount;let V,k,$;if(j.yOrdinalDisplay){const v=e.yLayout===o.D7.le?I-1:I,U=e.yLayout===o.D7.le?I:I+1;V=v<0?j.yMinDisplay:`${j.yOrdinalDisplay[v]}`,k=`${j.yOrdinalDisplay[U]}`,(!j.yOrdinalLabel||Number.isNaN(+j.yOrdinalLabel[0]))&&($=e.yLayout===o.D7.le?k:V)}else{const v=g?.[I];if(e.yLayout===o.D7.le)if(k=`${v}`,e.yLog){let J=(e.yLog===2?Math.log2:Math.log10)(v)-1/e.yLogSplit;V=`${e.yLog**J}`}else V=`${v-e.yBucketSize}`;else if(V=`${v}`,e.yLog){let J=(e.yLog===2?Math.log2:Math.log10)(v)+1/e.yLogSplit;k=`${e.yLog**J}`}else k=`${v+e.yBucketSize}`}let A,b;e.xLayout===o.D7.le?(b=B?.[n],A=b-e.xBucketSize):(A=B?.[n],b=A+e.xBucketSize);const M=O?.[n],w=e.heatmap?.fields.filter(v=>!v.config.custom?.hideFrom?.tooltip),P=[],ee=new Set;for(const v of w??[]){if(v.config.links&&v.config.links.length>0&&e.heatmap){const J=s.find(Z=>Z&&Z.__dataContext&&Z.__dataContext.value.field.name===$);v.getLinks=(0,ve._M)(e.heatmap,v,J||{},l)}if(v.getLinks){const J=v.values[n],Z=v.display?v.display(J):{text:`${J}`,numeric:+J};v.getLinks({calculatedValue:Z,valueRowIndex:n}).forEach(D=>{const H=`${D.title}/${D.href}`;ee.has(H)||(P.push(D),ee.add(H))})}}let K=(0,d.useRef)(null),R=264,ae=64,Q=Math.round(R*de.A.pxRatio),X=Math.round(ae*de.A.pxRatio);if((0,d.useEffect)(()=>{t&&B!=null&&O!=null&&je(K,Q,X,B,O,n,e.yBucketCount)},[n]),u)return d.createElement("div",null,d.createElement(Ke.e,{data:e.heatmap,rowIndex:n}));const G=()=>{if($)return d.createElement("div",null,"Name: ",$);switch(e.yLayout){case o.D7.unknown:return d.createElement("div",null,q(V))}return d.createElement("div",null,"Bucket: ",q(V)," - ",q(k))};return d.createElement(d.Fragment,null,d.createElement("div",null,d.createElement("div",null,i(A)),e.xLayout!==o.D7.unknown&&d.createElement("div",null,i(b))),t&&d.createElement("canvas",{width:Q,height:X,ref:K,style:{width:R+"px",height:ae+"px"}}),d.createElement("div",null,G(),d.createElement("div",null,(0,ze.Ct)(c,e.heatmap),": ",e.display(M))),P.length>0&&d.createElement(ft.gW,null,P.map((v,U)=>d.createElement(pt.z9,{key:U,icon:"external-link-alt",target:v.target,href:v.href,onClick:v.onClick,fill:"text",style:{width:"100%"}},v.title))))};var gt=h(73060),xt=h(57875),Ce=h(39132),Ue=h(69129),Me=h(77678),vt=h(51336),Xe=h(4134);function St(e){const{dataRef:a,theme:t,eventBus:s,onhover:l,onclick:n,isToolTipOpen:u,timeZone:r,getTimeRange:y,cellGap:c,hideLE:i,hideGE:B,yAxisConfig:g,ySizeDivisor:O,sync:j,eventsScope:q="__global_"}=e,I="x";let V="time",k=!0;a.current?.heatmap?.fields[0].type!==ye.PU.time&&(V=a.current?.heatmap?.fields[0].config?.unit??"x",k=!1);const $=devicePixelRatio;let A=a.current?.heatmap?.meta?.type;const b=t.visualization.getColorByName(e.exemplarColor);let M,w,P=new vt.e(r),ee;P.addHook("init",m=>{m.root.querySelectorAll(".u-cursor-pt").forEach(x=>{Object.assign(x.style,{borderRadius:"0",border:"1px solid white",background:"transparent"})}),n&&m.over.addEventListener("mouseup",x=>{m.cursor.drag._x||m.cursor.drag._y||n(x)},!0)}),k&&P.addHook("setData",m=>{let{min:x,max:f}=m.scales.x,C=y().from.valueOf(),S=y().to.valueOf();(x!==C||f!==S)&&queueMicrotask(()=>{m.setScale(I,{min:C,max:S})})}),P.addHook("syncRect",(m,x)=>{ee=x});const K={point:{[V]:null},data:a.current?.heatmap},R=new Ue.b_(K).setTags(["uplot"]),ae=new Ue.ql().setTags(["uplot"]);let Q;l&&P.addHook("setLegend",m=>{if(m.cursor.idxs!=null)for(let x=0;x<m.cursor.idxs.length;x++){const f=m.cursor.idxs[x];if(f!=null){const{left:C,top:S}=m.cursor;K.rowIndex=f,K.point[V]=m.posToVal(C,I),s.publish(R),u?.current||(Q&&(clearTimeout(Q),Q=0),l({seriesIdx:x,dataIdx:f,pageX:ee.left+C,pageY:ee.top+S}));return}}u?.current||Q||(Q=setTimeout(()=>{l(null),s.publish(ae)},100))}),P.addHook("drawClear",m=>{M=M||new Xe.C$(0,0,m.bbox.width,m.bbox.height),M.clear(),m.series.forEach((x,f)=>{f>0&&(x._paths=null)})}),P.setMode(2),P.addScale({scaleKey:I,isTime:k,orientation:o.Lt.Horizontal,direction:o.ON.Right,range:(m,x,f)=>{if(k)return[y().from.valueOf(),y().to.valueOf()];if(a.current?.xLayout===o.D7.le)return[x-a.current?.xBucketSize,f];if(a.current?.xLayout===o.D7.ge)return[x,f+a.current?.xBucketSize];{let C=a.current?.xBucketSize/2;return[x-C,f+C]}}});let X;if(!k){X=[];for(let m=0;m<10;m++)X.push(m*a.current?.xBucketSize)}P.addAxis({scaleKey:I,placement:o.vM.Bottom,incrs:X,isTime:k,theme:t,timeZone:r});const G=a.current?.heatmap?.fields[1];if(!G)return P;const U=G.config?.custom?.scaleDistribution??{type:o.L4.Linear},J=!!g.reverse,Z=A===ie.m.HeatmapCells&&!(0,T.Nb)(a.current?.heatmap),D=U.type!==o.L4.Linear||Z,H=(0,T.eE)(a.current?.heatmap).yOrdinalDisplay!=null,N="y_"+(Math.random()+1).toString(36).substring(7);P.addScale({scaleKey:N,isTime:!1,orientation:o.Lt.Vertical,direction:J?o.ON.Down:o.ON.Up,distribution:D?o.L4.Log:o.L4.Linear,log:U.log??2,range:Z?(m,x,f)=>{let C=m.data[1][2][0]/m.data[1][1][0];f*=C;let S,F;if([S,F]=D?de.A.rangeLog(x,f,U.log??2,!0):[x,f],D&&!H){let p=m.scales[N].log,E=p===2?Math.log2:Math.log10,{min:Y,max:z}=g;if(Y!=null&&Y>0){let te=E(Y);S=p**(0,Me.rs)(te,1)}if(z!=null&&z>0){let te=E(z);F=p**(0,Me.Uh)(te,1)}}return[S,F]}:(m,x,f)=>{let C=x,S=f,{min:F,max:p}=g;if(D){let E=m.scales[N].log,Y=!1,z=!1,te=E===2?Math.log2:Math.log10;if(O!==1){let me=te(x),Fe=te(f);Number.isInteger(me)||(C=E**(0,Me.rs)(me,1),Y=!0),Number.isInteger(Fe)||(S=E**(0,Me.Uh)(Fe,1),z=!0)}if(a.current?.yLayout===o.D7.le?Y||(C/=E):a.current?.yLayout===o.D7.ge?z||(S*=E):(C/=E/2,S*=E/2),!H){if(F!=null&&F>0){let me=te(F);C=E**(0,Me.rs)(me,1)}if(p!=null&&p>0){let me=te(p);S=E**(0,Me.Uh)(me,1)}}}else{let E=a.current?.yBucketSize;E===0&&(E=1),E&&(a.current?.yLayout===o.D7.le?C-=E:a.current?.yLayout===o.D7.ge?S+=E:(C-=E/2,S+=E/2)),H||(C=F??C,S=p??S)}return[C,S]}});const _=G.display??(0,he.j_)("short");P.addAxis({scaleKey:N,show:g.axisPlacement!==o.vM.Hidden,placement:g.axisPlacement||o.vM.Left,size:g.axisWidth||null,label:g.axisLabel,theme:t,formatValue:(m,x)=>(0,he.cN)(_(m,x)),splits:H?m=>{const x=(0,T.eE)(a.current?.heatmap);if(!x.yOrdinalDisplay)return[0,1];let f=x.yOrdinalDisplay.map((C,S)=>S);switch(a.current?.yLayout){case o.D7.le:f.unshift(-1);break;case o.D7.ge:f.push(f.length);break}if(m.height<60)f=[f[0],f[f.length-1]];else for(;f.length>3&&(m.height-15)/f.length<10;)f=f.filter((C,S)=>S%2===0);return f}:void 0,values:H?(m,x)=>{const f=(0,T.eE)(a.current?.heatmap);return f.yOrdinalDisplay?x.map(C=>C<0?f.yMinDisplay??"":f.yOrdinalDisplay[C]??""):x}:void 0});const ne=Z?Ct:Mt;P.addSeries({facets:[{scale:I,auto:!0,sorted:1},{scale:N,auto:!0}],pathBuilder:ne({each:(m,x,f,C,S,F,p)=>{M.add({x:C-m.bbox.left,y:S-m.bbox.top,w:F,h:p,sidx:x,didx:f})},gap:c,hideLE:i,hideGE:B,xAlign:a.current?.xLayout===o.D7.le?-1:a.current?.xLayout===o.D7.ge?1:0,yAlign:(a.current?.yLayout===o.D7.le?-1:a.current?.yLayout===o.D7.ge?1:0)*(J?-1:1),ySizeDivisor:O,disp:{fill:{values:(m,x)=>a.current?.heatmapColors?.values,index:a.current?.heatmapColors?.palette}}}),theme:t,scaleKey:""}),P.addSeries({facets:[{scale:I,auto:!0,sorted:1},{scale:N,auto:!0}],pathBuilder:Lt({each:(m,x,f,C,S,F,p)=>{M.add({x:C-m.bbox.left,y:S-m.bbox.top,w:F,h:p,sidx:x,didx:f})}},b),theme:t,scaleKey:""});const W={drag:{x:!0,y:!1,setScale:!1},dataIdx:(m,x)=>{if(x===1){w=null;let f=m.cursor.left*$,C=m.cursor.top*$;M.get(f,C,1,1,S=>{(0,Xe.ur)(f,C,S.x,S.y,S.x+S.w,S.y+S.h)&&(w=S)})}return w&&x===w.sidx?w.didx:null},points:{fill:"rgba(255,255,255, 0.3)",bbox:(m,x)=>{let f=w&&x===w.sidx;return{left:f?w.x/$:-10,top:f?w.y/$:-10,width:f?w.w/$:0,height:f?w.h/$:0}}}};return j&&j()!==Se.y.Off&&(W.sync={key:q,scales:[I,null],filters:{pub:(m,x,f,C,S,F,p)=>(f<0?(K.point[V]=null,s.publish(new Ue.ql)):(K.point[V]=x.posToVal(f,I),s.publish(R)),!0)}},P.setSync()),P.setCursor(W),P}const qe=4;function Mt(e){const{disp:a,each:t,gap:s=1,hideLE:l=-1/0,hideGE:n=1/0,xAlign:u=1,yAlign:r=1,ySizeDivisor:y=1}=e,c=devicePixelRatio,i=s>=qe?Math.round:g=>g,B=Math.round(s*c);return(g,O)=>(de.A.orient(g,O,(j,q,I,V,k,$,A,b,M,w,P,ee,K,R,ae)=>{let Q=g.data[O];const X=Q[0],G=Q[1],v=Q[2],U=X.length;let J=a.fill.values(g,O),Z=a.fill.index??[...new Set(J)],D=Z.map(F=>new Path2D),H=U-G.lastIndexOf(G[0]),N=U/H,_=G[1]-G[0]||k.max-k.min,ne=X[H]-X[0],W,m;V.distr===3?W=Math.abs($(X[0]*V.log,V,w,b)-$(X[0],V,w,b)):W=Math.abs($(ne,V,w,b)-$(0,V,w,b)),k.distr===3?m=Math.abs(A(G[0]*k.log,k,P,M)-A(G[0],k,P,M))/y:m=Math.abs(A(_,k,P,M)-A(0,k,P,M))/y,W=Math.max(1,i(W-B)),m=Math.max(1,i(m-B));let x=u===-1?-W:u===0?-W/2:0,f=r===1?-m:r===0?-m/2:0,C=G.slice(0,H).map(F=>i(A(F,k,P,M)+f)),S=Array.from({length:N},(F,p)=>i($(X[p*H],V,w,b)+x));for(let F=0;F<U;F++)if(v[F]>l&&v[F]<n){let p=S[~~(F/H)],E=C[F%H],Y=D[J[F]];R(Y,p,E,W,m),t(g,1,F,p,E,W,m)}return g.ctx.save(),g.ctx.rect(g.bbox.left,g.bbox.top,g.bbox.width,g.bbox.height),g.ctx.clip(),D.forEach((F,p)=>{g.ctx.fillStyle=Z[p],g.ctx.fill(F)}),g.ctx.restore(),null}),null)}function Lt(e,a){return(t,s)=>(de.A.orient(t,s,(l,n,u,r,y,c,i,B,g,O,j,q,I,V,k)=>{let $=new Path2D,A=[$],b=[a??"rgba(255,0,255,0.7)"];for(let M=0;M<n.length;M++){let w=u[M];if(!(y.distr===3&&y.log===2)){w-=.5;let Q=Math.round(Math.random())*2-1;w+=Q*.5*Math.random()}let ee=c(n[M],r,O,B),K=i(w,y,j,g),R=8,ae=8;V($,ee-R/2,K-ae/2,R,ae),e.each(t,s,M,ee-R/2,K-ae/2,R,ae)}t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),A.forEach((M,w)=>{t.ctx.fillStyle=b[w],t.ctx.fill(M)}),t.ctx.restore()}),null)}function Ct(e){const{disp:a,each:t,gap:s=1,hideLE:l=-1/0,hideGE:n=1/0}=e,u=devicePixelRatio,r=s>=qe?Math.round:c=>c,y=Math.round(s*u);return(c,i)=>(de.A.orient(c,i,(B,g,O,j,q,I,V,k,$,A,b,M,w,P,ee)=>{let K=c.data[i];const R=K[0],ae=K[1],Q=K[2],X=K[3],G=R.length;let v=a.fill.values(c,i),U=a.fill.index??[...new Set(v)],J=U.map(N=>new Path2D),Z=new Map,D=new Map;for(let N=0;N<R.length;N++){let _=R[N],ne=ae[N],W=Q[N];Z.has(_)||Z.set(_,r(I(_,j,A,k))),D.has(ne)||D.set(ne,r(V(ne,q,b,$))),D.has(W)||D.set(W,r(V(W,q,b,$)))}let H=Z.get(R.find(N=>N!==R[0]))-Z.get(R[0]);for(let N=0;N<G;N++){if(X[N]<=l||X[N]>=n)continue;let _=R[N],ne=ae[N],W=Q[N],m=Z.get(_),x=D.get(ne),f=D.get(W),C=H,S=x-f;C=Math.max(1,C-y),S=Math.max(1,S-y);let F=m-y/2-C,p=f+y/2,E=J[v[N]];P(E,F,p,C,S),t(c,1,N,F,p,C,S)}c.ctx.save(),c.ctx.rect(c.bbox.left,c.bbox.top,c.bbox.width,c.bbox.height),c.ctx.clip(),J.forEach((N,_)=>{c.ctx.fillStyle=U[_],c.ctx.fill(N)}),c.ctx.restore()}),null)}const _e=(e,a,t,s=-1/0,l=1/0)=>{if(a==null){a=1/0;for(let n=0;n<e.length;n++)e[n]>s&&e[n]<l&&(a=Math.min(a,e[n]))}if(t==null){t=-1/0;for(let n=0;n<e.length;n++)e[n]>s&&e[n]<l&&(t=Math.max(t,e[n]))}return[a,t]},et=(e,a,t,s)=>{let l=s-t||1,n=a.length,u=Array(e.length);for(let r=0;r<e.length;r++)u[r]=e[r]<t?0:e[r]>s?n-1:Math.min(n-1,Math.floor(n*(e[r]-t)/l));return u};function We(e,a,t,s,l,n,u){if(!e?.length)return{};(0,ze.Fm)(e);const r=a?.find(c=>c.name==="exemplar");if(n&&r?.fields.forEach((c,i)=>{r.fields[i].getLinks=n(r,c)}),t.calculate){if(re.$.featureToggles.transformationsVariableSupport){const c={...t,calculation:{xBuckets:{...t.calculation?.xBuckets},yBuckets:{...t.calculation?.yBuckets}}};return c.calculation?.xBuckets?.value&&u!==void 0&&(c.calculation.xBuckets.value=u(c.calculation.xBuckets.value)),c.calculation?.yBuckets?.value&&u!==void 0&&(c.calculation.yBuckets.value=u(c.calculation.yBuckets.value)),Ve((0,T.VQ)(e,c.calculation??{}),r,c,s,l)}return Ve((0,T.VQ)(e,t.calculation??{}),r,t,s,l)}let y;for(const c of e)switch(c.meta?.type){case ie.m.HeatmapCells:return(0,T.Nb)(c)?Ve(c,r,t,s,l):wt(c,r,t,s,l);case ie.m.HeatmapRows:y=c}if(!y)if(e.length>1)e.every(i=>!Number.isNaN((0,Ce.L)(i.fields[1].state?.displayName)))&&e.sort(Ce.Bm),y=[(0,gt.Fd)({frames:e})][0];else{let c=e[0],i=c.fields.filter(g=>g.type===ye.PU.number);i.every(g=>!Number.isNaN((0,Ce.L)(g.state?.displayName)))?(i.sort((g,O)=>(0,Ce.L)(g.state?.displayName)-(0,Ce.L)(O.state?.displayName)),y={...c,fields:[c.fields.find(g=>g.type===ye.PU.time),...i]}):y=c}return Ve((0,T.yJ)({unit:t.yAxis?.unit,decimals:t.yAxis?.decimals,...t.rowsFrame,frame:y}),r,t,s,l)}const wt=(e,a,t,s,l)=>{if(e.meta?.type!==ie.m.HeatmapCells||(0,T.Nb)(e))return{warning:"Expected sparse heatmap format",heatmap:e};$e(e.fields[1],t.yAxis,l);const n=e.fields[3],u=$e(n,t.cellValues,l);let[r,y]=_e(n.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge);return{heatmap:e,heatmapColors:{palette:s,values:et(n.values,s,r,y),minValue:r,maxValue:y},exemplars:a,display:c=>(0,he.cN)(u(c))}},Ve=(e,a,t,s,l)=>{if(e.meta?.type!==ie.m.HeatmapCells)return{warning:"Expected heatmap scanlines format",heatmap:e};if(e.fields.length<2||e.length<2)return{heatmap:e};const n=(0,T.eE)(e);let u,r,y;for(const M of e.fields)switch(M.name){case"y":r=M.name;case"yMin":case"yMax":{r||(r=M.name),n.yOrdinalDisplay==null&&$e(M,t.yAxis,l);break}case"x":case"xMin":case"xMax":u=M.name;break;default:M.type===ye.PU.number&&!y&&(y=M)}if(!r)return{warning:"Missing Y field",heatmap:e};if(!r)return{warning:"Missing X field",heatmap:e};if(!y)return{warning:"Missing value field",heatmap:e};const c=$e(y,t.cellValues,l),i=e.fields[0].values,B=e.fields[1].values,g=i.length;let O=g-B.lastIndexOf(B[0]),j=g/O,q=B[1]-B[0],I=i[O]-i[0],[V,k]=_e(y.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge),$=t.calculation?.xBuckets,A=t.calculation?.yBuckets;return{heatmap:e,heatmapColors:{palette:s,values:et(y.values,s,V,k),minValue:V,maxValue:k},exemplars:a?.length?a:void 0,xBucketSize:I,yBucketSize:q,xBucketCount:j,yBucketCount:O,yLog:A?.scale?.log??0,xLog:$?.scale?.log??0,xLogSplit:$?.scale?.log?+($?.value??"1"):1,yLogSplit:A?.scale?.log?+(A?.value??"1"):1,xLayout:u==="xMax"?o.D7.le:u==="xMin"?o.D7.ge:o.D7.unknown,yLayout:r==="yMax"?o.D7.le:r==="yMin"?o.D7.ge:o.D7.unknown,display:M=>(0,he.cN)(c(M))}};function $e(e,a,t){if(a?.unit?.length||a?.decimals!=null){const{unit:s,decimals:l}=a;e.display=void 0,e.config={...e.config},s?.length&&(e.config.unit=s),l!=null&&(e.config.decimals=l)}return e.display||(e.display=(0,xt.J)({field:e,theme:t})),e.display}var tt=h(44115),Et=h(77389),lt=h(84140),L=h(52995);const we=[{name:"BrBG",invert:"always"},{name:"PiYG",invert:"always"},{name:"PRGn",invert:"always"},{name:"PuOr",invert:"always"},{name:"RdBu",invert:"always"},{name:"RdGy",invert:"always"},{name:"RdYlBu",invert:"always"},{name:"RdYlGn",invert:"always"},{name:"Spectral",invert:"always"},{name:"Blues",invert:"dark"},{name:"Greens",invert:"dark"},{name:"Greys",invert:"dark"},{name:"Oranges",invert:"dark"},{name:"Purples",invert:"dark"},{name:"Reds",invert:"dark"},{name:"Turbo",invert:"light"},{name:"Cividis",invert:"light"},{name:"Viridis",invert:"light"},{name:"Magma",invert:"light"},{name:"Inferno",invert:"light"},{name:"Plasma",invert:"light"},{name:"Warm",invert:"light"},{name:"Cool",invert:"light"},{name:"Cubehelix",invert:"light",name2:"CubehelixDefault"},{name:"BuGn",invert:"dark"},{name:"BuPu",invert:"dark"},{name:"GnBu",invert:"dark"},{name:"OrRd",invert:"dark"},{name:"PuBuGn",invert:"dark"},{name:"PuBu",invert:"dark"},{name:"PuRd",invert:"dark"},{name:"RdPu",invert:"dark"},{name:"YlGnBu",invert:"dark"},{name:"YlGn",invert:"dark"},{name:"YlOrBr",invert:"dark"},{name:"YlOrRd",invert:"dark"},{name:"Rainbow",invert:"always"},{name:"Sinebow",invert:"always"}],Bt=we.find(e=>e.name==="Spectral");function Pe(e,a){const t={...L.KQ.color,...e},s=[],l=(t.steps??128)-1;if(e.mode===L.P7.Opacity){const n=(0,lt.A)(a.visualization.getColorByName(e.fill)).toPercentageRgb(),u=t.scale===L.uM.Exponential?tt.scalePow().exponent(t.exponent).domain([0,1]).range([0,1]):tt.scaleLinear().domain([0,1]).range([0,1]);for(let r=0;r<=l;r++)n.a=u(r/l),s.push((0,lt.A)(n).toString("hex8"))}else{const n=we.find(y=>y.name===t.scheme)??Bt;let u="interpolate"+(n.name2??n.name);const r=Et[u];for(let y=0;y<=l;y++){let c=r(y/l),i=c.indexOf("rgb")===0?"#"+[...c.matchAll(/\d+/g)].map(B=>(+B[0]).toString(16).padStart(2,"0")).join(""):c;s.push(i)}(n.invert==="always"||n.invert==="dark"&&a.isDark||n.invert==="light"&&a.isLight)&&s.reverse(),e.reverse&&s.reverse()}return s}const Nt=({data:e,id:a,timeRange:t,timeZone:s,width:l,height:n,options:u,fieldConfig:r,eventBus:y,onChangeTimeRange:c,replaceVariables:i})=>{const B=(0,ce.$j)(),g=(0,ce.of)(bt),{sync:O,canAddAnnotations:j}=(0,ge.d2)(),[q,I]=(0,d.useState)(null);let V=[];for(const D of e.series)for(const H of D.fields)H.state?.scopedVars&&V.push(H.state.scopedVars);let k=(0,d.useRef)(t);k.current=t;const $=(0,d.useCallback)((D,H)=>(0,ve._M)(D,H,H.state?.scopedVars??{},i),[i]),A=(0,d.useMemo)(()=>Pe(u.color,B),[u.color,B]),b=(0,d.useMemo)(()=>{try{return We(e.series,e.annotations,u,A,B,$,i)}catch(D){return{warning:`${D}`}}},[e.series,e.annotations,u,A,B,$,i]),M=(0,d.useMemo)(()=>{let D=[],H=[];const N=(0,T.eE)(b.heatmap);return b.exemplars?.length&&(D=b.exemplars?.fields[0].values,N.yMatchWithLabel&&N.yOrdinalDisplay!=null?H=(b.exemplars?.fields.find(W=>W.name===N.yMatchWithLabel).values).map(W=>N.yOrdinalLabel?.indexOf(W)):H=b.exemplars?.fields[1].values),[null,b.heatmap?.fields.map(_=>_.values),[D,H]]},[b.heatmap,b.exemplars]),[w,P]=(0,d.useState)(void 0),[ee,K]=(0,d.useState)(!1),R=(0,d.useRef)(!1),ae=()=>{R.current=!1,K(!1),X(null)},Q=()=>{R.current=!R.current,K(R.current)},X=(0,d.useCallback)(D=>{P(D??void 0)},[u,e.structureRev]),G=(0,d.useRef)(b);G.current=b;const v=re.$.featureToggles.newVizTooltips&&(O==null||O()!==Se.y.Tooltip),U=(0,d.useMemo)(()=>{const D=G.current?.heatmap?.fields[1].config?.custom?.scaleDistribution;return St({dataRef:G,theme:B,eventBus:y,onhover:v?null:X,onclick:!v&&u.tooltip.mode!==o.$N.None?Q:null,isToolTipOpen:R,timeZone:s,getTimeRange:()=>k.current,sync:O,cellGap:u.cellGap,hideLE:u.filterValues?.le,hideGE:u.filterValues?.ge,exemplarColor:u.exemplars?.color??"rgba(255,0,255,0.7)",yAxisConfig:u.yAxis,ySizeDivisor:D?.type===o.L4.Log?+(u.calculation?.yBuckets?.value||1):1})},[u,s,e.structureRev]),J=()=>{if(!b.heatmap||!u.legend.show)return null;let N=G.current?.heatmap?.meta?.type===ie.m.HeatmapCells&&!(0,T.Nb)(G.current?.heatmap)?3:2;const _=b.heatmap.fields[N];let ne;return w&&b.heatmap.fields&&w.seriesIdx===1&&(ne=_.values[w.dataIdx]),d.createElement(Le.KU.Legend,{placement:"bottom",maxHeight:"20%"},d.createElement("div",{className:g.colorScaleWrapper},d.createElement(se.w,{hoverValue:ne,colorPalette:A,min:G.current.heatmapColors?.minValue,max:G.current.heatmapColors?.maxValue,display:b.display})))};if(b.warning||!b.heatmap)return d.createElement(pe.a,{panelId:a,fieldConfig:r,data:e,needsNumberField:!0,message:b.warning});const Z=!!(j&&j());return d.createElement(d.Fragment,null,d.createElement(Le.KU,{width:l,height:n,legend:J()},(D,H)=>d.createElement(Ae.Z,{config:U,data:M,width:D,height:H},!v&&d.createElement(ue.j,{config:U,onZoom:c}),v&&d.createElement(d.Fragment,null,u.tooltip.mode!==o.$N.None&&d.createElement(be.xl,{config:U,hoverMode:be.b3.xyOne,queryZoom:c,render:(N,_,ne,W,m,x,f)=>{if(f)return null;if(Z&&x!=null){I(x),m();return}const C=()=>{let S=N.posToVal(N.cursor.left,"x");I({from:S,to:S}),m()};return d.createElement(dt,{mode:u.tooltip.mode,dataIdxs:_,seriesIdx:ne,dataRef:G,isPinned:W,dismiss:m,showHistogram:u.tooltip.yHistogram,showColorScale:u.tooltip.showColorScale,panelData:e,replaceVars:i,scopedVars:V,annotate:Z?C:void 0})},maxWidth:u.tooltip.maxWidth,maxHeight:u.tooltip.maxHeight}),d.createElement(Oe.W,{annotations:e.annotations??[],config:U,timeZone:s,newRange:q,setNewRange:I,canvasRegionRendering:!1})))),!v&&d.createElement(d.Fragment,null,d.createElement(Re.ZL,null,w&&u.tooltip.mode!==o.$N.None&&d.createElement(De.o,{position:{x:w.pageX,y:w.pageY},offset:{x:10,y:10},allowPointerEvents:R.current},ee&&d.createElement(Te.d,{onClick:ae}),d.createElement(ht,{timeRange:t,data:b,hover:w,showHistogram:u.tooltip.yHistogram,replaceVars:i,scopedVars:V})))))},bt=e=>({colorScaleWrapper:(0,fe.css)({marginLeft:"25px",padding:"10px 0",maxWidth:"300px"})}),Dt=e=>{if(Object.keys(e.options??{}).length===0)return at(e,"heatmap",{angular:e},e.fieldConfig);let a=e.options?.tooltip?.show;return a!==void 0&&(a===!0?e.options.tooltip.mode=o.$N.Single:a===!1&&(e.options.tooltip.mode=o.$N.None),delete e.options.tooltip?.show),e.options},at=(e,a,t,s)=>{if(a==="heatmap"&&t.angular){const{fieldConfig:l,options:n}=kt({...t.angular,fieldConfig:s});return e.fieldConfig=l,n}if(a==="heatmap-new"){const{bucketFrame:l,...n}=e.options;return l?{...n,rowsFrame:l}:e.options}return{}};function kt(e){const a={defaults:{},overrides:[]},t=e.dataFormat!=="tsbuckets",s={...L.KQ.calculation},l={logBase:1,...e.yAxis};t&&(e.xBucketSize?s.xBuckets={mode:o.J1.Size,value:`${e.xBucketSize}`}:e.xBucketNumber&&(s.xBuckets={mode:o.J1.Count,value:`${e.xBucketNumber}`}),e.yBucketSize?s.yBuckets={mode:o.J1.Size,value:`${e.yBucketSize}`}:e.xBucketNumber&&(s.yBuckets={mode:o.J1.Count,value:`${e.yBucketNumber}`}),l.logBase>1&&(s.yBuckets={mode:o.J1.Count,value:+l.splitFactor>0?`${l.splitFactor}`:void 0,scale:{type:o.L4.Log,log:l.logBase}}));const n=He(e.cards?.cardPadding,2),u={calculate:t,calculation:s,color:{...L.KQ.color,steps:128},cellGap:n||1,cellRadius:He(e.cards?.cardRound),yAxis:{axisPlacement:l.show===!1?o.vM.Hidden:o.vM.Left,reverse:!!e.reverseYBuckets,axisWidth:He(l.width),min:l.min,max:l.max,unit:l.format,decimals:l.decimals},cellValues:{decimals:He(e.tooltipDecimals)},rowsFrame:{layout:Vt(e.yBucketBound)},legend:{show:!!e.legend?.show},showValue:o.yL.Never,tooltip:{mode:e.tooltip?.show?o.$N.Single:o.$N.None,yHistogram:!!e.tooltip?.showHistogram},exemplars:{...L.KQ.exemplars}};e.hideZeroBuckets&&(u.filterValues={...L.KQ.filterValues});const r=e.color??{};switch(r?.mode){case"spectrum":{u.color.mode=L.P7.Scheme;const y=r.colorScheme;let c=we.find(i=>i.name===y);c||(c=we.find(i=>y.indexOf(i.name)>=0)),u.color.scheme=c?c.name:L.KQ.color.scheme;break}case"opacity":{u.color.mode=L.P7.Opacity,u.color.scale=r.scale;break}}return u.color.fill=r.cardColor,u.color.min=r.min,u.color.max=r.max,typeof r.min=="number"&&typeof r.max=="number"&&r.min>r.max&&(u.color.min=r.max,u.color.max=r.min,u.color.reverse=!0),{fieldConfig:a,options:u}}function Vt(e){switch(e){case"upper":return o.D7.ge;case"lower":return o.D7.le;case"middle":return o.D7.unknown}return o.D7.auto}function He(e,a){if(e==null||e==="")return a;const t=+e;return isNaN(t)?a:t}class $t{getSuggestionsForData(a){const{dataSummary:t}=a;if(!a.data?.series||!t.hasData||t.timeFieldCount<1||t.numberFieldCount<2||t.numberFieldCount>10)return;const s=Pe(L.KQ.color,re.$.theme2),l=We(a.data.series,void 0,L.KQ,s,re.$.theme2);!l||l.warning||a.getListAppender({name:"",pluginId:"heatmap",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}})}}const Pt=new oe.m(Nt).useFieldConfig({disableStandardOptions:Object.values(Be.uo).filter(e=>e!==Be.uo.Links),useCustomConfig:e=>{e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Y axis scale",category:["Heatmap"],editor:Ne.W,override:Ne.W,defaultValue:{type:o.L4.Linear},shouldApply:a=>a.type===ye.PU.number,process:Ie.hS,hideFromDefaults:!0}),(0,le.e)(e)}}).setPanelChangeHandler(at).setMigrationHandler(Dt).setPanelOptions((e,a)=>{const t=a.options??L.KQ;let s=!1;if(a.data.length>0)try{const n=Pe(t.color,re.$.theme2),u=We(a.data,void 0,t,n,re.$.theme2,void 0,a.replaceVariables);s=(0,T.eE)(u.heatmap).yOrdinalDisplay!=null}catch{}let l=["Heatmap"];e.addRadio({path:"calculate",name:"Calculate from data",defaultValue:L.KQ.calculate,category:l,settings:{options:[{label:"Yes",value:!0},{label:"No",value:!1}]}}),t.calculate&&(0,xe.J)("calculation.",e,t.calculation,l),l=["Y Axis"],e.addRadio({path:"yAxis.axisPlacement",name:"Placement",defaultValue:L.KQ.yAxis.axisPlacement??o.vM.Left,category:l,settings:{options:[{label:"Left",value:o.vM.Left},{label:"Right",value:o.vM.Right},{label:"Hidden",value:o.vM.Hidden}]}}).addUnitPicker({category:l,path:"yAxis.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"yAxis.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),s||e.addNumberInput({path:"yAxis.min",name:"Min value",settings:{placeholder:"Auto"},category:l}).addTextInput({path:"yAxis.max",name:"Max value",settings:{placeholder:"Auto"},category:l}),e.addNumberInput({path:"yAxis.axisWidth",name:"Axis width",defaultValue:L.KQ.yAxis.axisWidth,settings:{placeholder:"Auto",min:5},category:l}).addTextInput({path:"yAxis.axisLabel",name:"Axis label",defaultValue:L.KQ.yAxis.axisLabel,settings:{placeholder:"Auto"},category:l}),t.calculate||e.addRadio({path:"rowsFrame.layout",name:"Tick alignment",defaultValue:L.KQ.rowsFrame?.layout??o.D7.auto,category:l,settings:{options:[{label:"Auto",value:o.D7.auto},{label:"Top (LE)",value:o.D7.le},{label:"Middle",value:o.D7.unknown},{label:"Bottom (GE)",value:o.D7.ge}]}}),e.addBooleanSwitch({path:"yAxis.reverse",name:"Reverse",defaultValue:L.KQ.yAxis.reverse===!0,category:l}),l=["Colors"],e.addRadio({path:"color.mode",name:"Mode",defaultValue:L.KQ.color.mode,category:l,settings:{options:[{label:"Scheme",value:L.P7.Scheme},{label:"Opacity",value:L.P7.Opacity}]}}),e.addColorPicker({path:"color.fill",name:"Color",defaultValue:L.KQ.color.fill,category:l,showIf:n=>n.color.mode===L.P7.Opacity}),e.addRadio({path:"color.scale",name:"Scale",defaultValue:L.KQ.color.scale,category:l,settings:{options:[{label:"Exponential",value:L.uM.Exponential},{label:"Linear",value:L.uM.Linear}]},showIf:n=>n.color.mode===L.P7.Opacity}),e.addSliderInput({path:"color.exponent",name:"Exponent",defaultValue:L.KQ.color.exponent,category:l,settings:{min:.1,max:2,step:.1},showIf:n=>n.color.mode===L.P7.Opacity&&n.color.scale===L.uM.Exponential}),e.addSelect({path:"color.scheme",name:"Scheme",description:"",defaultValue:L.KQ.color.scheme,category:l,settings:{options:we.map(n=>({value:n.name,label:n.name}))},showIf:n=>n.color.mode!==L.P7.Opacity}),e.addSliderInput({path:"color.steps",name:"Steps",defaultValue:L.KQ.color.steps,category:l,settings:{min:2,max:128,step:1}}).addBooleanSwitch({path:"color.reverse",name:"Reverse",defaultValue:L.KQ.color.reverse,category:l}).addCustomEditor({id:"__scale__",path:"__scale__",name:"",category:l,editor:()=>{const n=Pe(t.color,re.$.theme2);return d.createElement("div",null,d.createElement(se.w,{colorPalette:n,min:1,max:100}))}}),e.addNumberInput({path:"color.min",name:"Start color scale from value",defaultValue:L.KQ.color.min,settings:{placeholder:"Auto (min)"},category:l}).addNumberInput({path:"color.max",name:"End color scale at value",defaultValue:L.KQ.color.max,settings:{placeholder:"Auto (max)"},category:l}),l=["Cell display"],t.calculate||e.addTextInput({path:"rowsFrame.value",name:"Value name",defaultValue:L.KQ.rowsFrame?.value,settings:{placeholder:"Value"},category:l}),e.addUnitPicker({category:l,path:"cellValues.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"cellValues.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),e.addSliderInput({name:"Cell gap",path:"cellGap",defaultValue:L.KQ.cellGap,category:l,settings:{min:0,max:25}}).addNumberInput({path:"filterValues.le",name:"Hide cells with values <=",defaultValue:L.KQ.filterValues?.le,settings:{placeholder:"None"},category:l}).addNumberInput({path:"filterValues.ge",name:"Hide cells with values >=",defaultValue:L.KQ.filterValues?.ge,settings:{placeholder:"None"},category:l}),l=["Tooltip"],e.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:l,defaultValue:o.$N.Single,settings:{options:[{value:o.$N.Single,label:"Single"},{value:o.$N.Multi,label:"All"},{value:o.$N.None,label:"Hidden"}]}}),e.addBooleanSwitch({path:"tooltip.yHistogram",name:"Show histogram (Y axis)",defaultValue:L.KQ.tooltip.yHistogram,category:l,showIf:n=>n.tooltip.mode===o.$N.Single}),e.addBooleanSwitch({path:"tooltip.showColorScale",name:"Show color scale",defaultValue:L.KQ.tooltip.showColorScale,category:l,showIf:n=>n.tooltip.mode===o.$N.Single&&re.$.featureToggles.newVizTooltips}),e.addNumberInput({path:"tooltip.maxWidth",name:"Max width",category:l,settings:{integer:!0},showIf:n=>re.$.featureToggles.newVizTooltips&&n.tooltip?.mode!==o.$N.None}),e.addNumberInput({path:"tooltip.maxHeight",name:"Max height",category:l,settings:{integer:!0},showIf:n=>re.$.featureToggles.newVizTooltips&&n.tooltip?.mode!==o.$N.None}),l=["Legend"],e.addBooleanSwitch({path:"legend.show",name:"Show legend",defaultValue:L.KQ.legend.show,category:l}),l=["Exemplars"],e.addColorPicker({path:"exemplars.color",name:"Color",defaultValue:L.KQ.exemplars.color,category:l})}).setSuggestionsSupplier(new $t).setDataSupport({annotations:!0})}}]);

//# sourceMappingURL=heatmapPanel.f6f29a53ed0f682b4404.js.map